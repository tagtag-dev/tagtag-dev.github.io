[{"data":1,"prerenderedAt":4401},["ShallowReactive",2],{"navigation":3,"/deployment/production":107,"/deployment/production-surround":4396},[4,18,35,60,81,94,103],{"title":5,"path":6,"stem":7,"children":8,"page":17},"Getting Started","/getting-started","1.getting-started",[9,13],{"title":10,"path":11,"stem":12},"项目介绍","/getting-started/introduction","1.getting-started/1.introduction",{"title":14,"path":15,"stem":16},"快速上手","/getting-started/quick-start","1.getting-started/2.quick-start",false,{"title":19,"path":20,"stem":21,"children":22,"page":17},"Architecture","/architecture","2.architecture",[23,27,31],{"title":24,"path":25,"stem":26},"架构概览","/architecture/overview","2.architecture/1.overview",{"title":28,"path":29,"stem":30},"项目结构","/architecture/project-structure","2.architecture/2.project-structure",{"title":32,"path":33,"stem":34},"前端架构","/architecture/frontend-architecture","2.architecture/3.frontend-architecture",{"title":36,"path":37,"stem":38,"children":39,"page":17},"Developer Guide","/developer-guide","3.developer-guide",[40,44,48,52,56],{"title":41,"path":42,"stem":43},"实战教程：开发 CRUD 功能","/developer-guide/crud-tutorial","3.developer-guide/1.crud-tutorial",{"title":45,"path":46,"stem":47},"代码规范与最佳实践","/developer-guide/code-style","3.developer-guide/2.code-style",{"title":49,"path":50,"stem":51},"测试指南","/developer-guide/testing","3.developer-guide/3.testing",{"title":53,"path":54,"stem":55},"前端开发指南","/developer-guide/frontend-development","3.developer-guide/4.frontend-development",{"title":57,"path":58,"stem":59},"AI 辅助开发","/developer-guide/ai-development","3.developer-guide/5.ai-development",{"title":61,"path":62,"stem":63,"children":64,"page":17},"Modules","/modules","3.modules",[65,69,73,77],{"title":66,"path":67,"stem":68},"身份管理 (IAM)","/modules/iam","3.modules/1.iam",{"title":70,"path":71,"stem":72},"系统模块","/modules/system","3.modules/2.system",{"title":74,"path":75,"stem":76},"认证模块","/modules/auth","3.modules/3.auth",{"title":78,"path":79,"stem":80},"存储模块","/modules/storage","3.modules/4.storage",{"title":82,"path":83,"stem":84,"children":85,"page":17},"Deployment","/deployment","4.deployment",[86,90],{"title":87,"path":88,"stem":89},"生产环境部署","/deployment/production","4.deployment/1.production",{"title":91,"path":92,"stem":93},"容器化部署","/deployment/containerization","4.deployment/2.containerization",{"title":95,"path":96,"stem":97,"children":98,"page":17},"Maintenance","/maintenance","5.maintenance",[99],{"title":100,"path":101,"stem":102},"监控与维护","/maintenance/monitoring","5.maintenance/1.monitoring",{"title":104,"path":105,"stem":106},"更新日志","/releases","releases",{"id":108,"title":87,"body":109,"description":4390,"extension":4391,"links":4392,"meta":4393,"navigation":315,"path":88,"seo":4394,"stem":89,"__hash__":4395},"docs/4.deployment/1.production.md",{"type":110,"value":111,"toc":4340},"minimark",[112,116,121,126,129,234,238,241,248,540,544,548,553,569,574,684,688,693,697,711,716,939,943,947,960,965,1315,1319,1327,1332,1780,1784,1788,1792,1804,1808,1886,1890,1894,1908,1912,2225,2229,2233,2244,2248,2332,2337,2471,2475,2479,2483,2712,2716,2721,2742,2746,2820,2824,2829,2849,2853,2945,2949,2952,2972,2977,2988,2992,2996,3000,3146,3150,3154,3171,3176,3187,3192,3203,3207,3211,3228,3232,3252,3256,3279,3283,3303,3307,3311,3314,3352,3356,3376,3381,3398,3402,3406,3411,3498,3503,3533,3538,3739,3743,3747,3967,3971,3975,4001,4005,4031,4036,4056,4060,4064,4070,4075,4155,4159,4164,4168,4249,4253,4258,4262,4326,4330,4333,4336],[113,114,115],"p",{},"本文档详细介绍 Tagtag Starter 项目在生产环境的部署配置，包括服务器选型、后端部署、前端部署、数据库优化和安全配置等内容。",[117,118,120],"h2",{"id":119},"_1-服务器选型与配置","1. 服务器选型与配置",[122,123,125],"h3",{"id":124},"_11-服务器架构","1.1 服务器架构",[113,127,128],{},"Tagtag Starter 采用前后端分离架构，生产环境建议使用以下服务器配置：",[130,131,132,151],"table",{},[133,134,135],"thead",{},[136,137,138,142,145,148],"tr",{},[139,140,141],"th",{},"服务类型",[139,143,144],{},"推荐配置",[139,146,147],{},"数量",[139,149,150],{},"用途",[152,153,154,169,183,196,210,222],"tbody",{},[136,155,156,160,163,166],{},[157,158,159],"td",{},"负载均衡",[157,161,162],{},"4核8G",[157,164,165],{},"1",[157,167,168],{},"流量分发、SSL 终止",[136,170,171,174,177,180],{},[157,172,173],{},"后端应用",[157,175,176],{},"8核16G",[157,178,179],{},"2+",[157,181,182],{},"运行 Spring Boot 应用",[136,184,185,188,190,193],{},[157,186,187],{},"前端应用",[157,189,162],{},[157,191,192],{},"2",[157,194,195],{},"运行 Nginx 服务，部署静态资源",[136,197,198,201,204,207],{},[157,199,200],{},"数据库",[157,202,203],{},"16核32G",[157,205,206],{},"1主1从",[157,208,209],{},"运行 MySQL 数据库",[136,211,212,215,217,219],{},[157,213,214],{},"Redis",[157,216,162],{},[157,218,206],{},[157,220,221],{},"缓存、会话存储",[136,223,224,227,229,231],{},[157,225,226],{},"监控",[157,228,162],{},[157,230,165],{},[157,232,233],{},"运行 Prometheus、Grafana 等监控工具",[122,235,237],{"id":236},"_12-操作系统配置","1.2 操作系统配置",[113,239,240],{},"建议使用 CentOS 7.9 或 Ubuntu 20.04 LTS 作为服务器操作系统。",[113,242,243,247],{},[244,245,246],"strong",{},"系统优化建议","：",[249,250,255],"pre",{"className":251,"code":252,"language":253,"meta":254,"style":254},"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","# 关闭不必要的服务\nsystemctl stop firewalld\nsystemctl disable firewalld\nsystemctl stop postfix\nsystemctl disable postfix\n\n# 设置系统时区\ntimedatectl set-timezone Asia/Shanghai\n\n# 关闭 SELinux\nsed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config\nsetenforce 0\n\n# 优化文件描述符限制\ncat >> /etc/security/limits.conf \u003C\u003C EOF\n* soft nofile 65535\n* hard nofile 65535\nEOF\n\n# 优化内核参数\ncat >> /etc/sysctl.conf \u003C\u003C EOF\n# 网络优化\nnet.core.somaxconn = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_tw_recycle = 1\nnet.ipv4.ip_local_port_range = 1024 65535\n\n# 内存优化\nvm.swappiness = 10\nvm.overcommit_memory = 1\nEOF\n\n# 应用内核参数\nsysctl -p\n","bash","",[256,257,258,267,281,291,301,310,317,323,335,340,346,368,378,383,389,407,413,419,425,430,436,450,456,462,468,474,480,486,492,497,503,509,515,520,525,531],"code",{"__ignoreMap":254},[259,260,263],"span",{"class":261,"line":262},"line",1,[259,264,266],{"class":265},"sHwdD","# 关闭不必要的服务\n",[259,268,270,274,278],{"class":261,"line":269},2,[259,271,273],{"class":272},"sBMFI","systemctl",[259,275,277],{"class":276},"sfazB"," stop",[259,279,280],{"class":276}," firewalld\n",[259,282,284,286,289],{"class":261,"line":283},3,[259,285,273],{"class":272},[259,287,288],{"class":276}," disable",[259,290,280],{"class":276},[259,292,294,296,298],{"class":261,"line":293},4,[259,295,273],{"class":272},[259,297,277],{"class":276},[259,299,300],{"class":276}," postfix\n",[259,302,304,306,308],{"class":261,"line":303},5,[259,305,273],{"class":272},[259,307,288],{"class":276},[259,309,300],{"class":276},[259,311,313],{"class":261,"line":312},6,[259,314,316],{"emptyLinePlaceholder":315},true,"\n",[259,318,320],{"class":261,"line":319},7,[259,321,322],{"class":265},"# 设置系统时区\n",[259,324,326,329,332],{"class":261,"line":325},8,[259,327,328],{"class":272},"timedatectl",[259,330,331],{"class":276}," set-timezone",[259,333,334],{"class":276}," Asia/Shanghai\n",[259,336,338],{"class":261,"line":337},9,[259,339,316],{"emptyLinePlaceholder":315},[259,341,343],{"class":261,"line":342},10,[259,344,345],{"class":265},"# 关闭 SELinux\n",[259,347,349,352,355,359,362,365],{"class":261,"line":348},11,[259,350,351],{"class":272},"sed",[259,353,354],{"class":276}," -i",[259,356,358],{"class":357},"sMK4o"," '",[259,360,361],{"class":276},"s/SELINUX=enforcing/SELINUX=disabled/",[259,363,364],{"class":357},"'",[259,366,367],{"class":276}," /etc/selinux/config\n",[259,369,371,374],{"class":261,"line":370},12,[259,372,373],{"class":272},"setenforce",[259,375,377],{"class":376},"sbssI"," 0\n",[259,379,381],{"class":261,"line":380},13,[259,382,316],{"emptyLinePlaceholder":315},[259,384,386],{"class":261,"line":385},14,[259,387,388],{"class":265},"# 优化文件描述符限制\n",[259,390,392,395,398,401,404],{"class":261,"line":391},15,[259,393,394],{"class":272},"cat",[259,396,397],{"class":357}," >>",[259,399,400],{"class":276}," /etc/security/limits.conf",[259,402,403],{"class":357}," \u003C\u003C",[259,405,406],{"class":357}," EOF\n",[259,408,410],{"class":261,"line":409},16,[259,411,412],{"class":276},"* soft nofile 65535\n",[259,414,416],{"class":261,"line":415},17,[259,417,418],{"class":276},"* hard nofile 65535\n",[259,420,422],{"class":261,"line":421},18,[259,423,424],{"class":357},"EOF\n",[259,426,428],{"class":261,"line":427},19,[259,429,316],{"emptyLinePlaceholder":315},[259,431,433],{"class":261,"line":432},20,[259,434,435],{"class":265},"# 优化内核参数\n",[259,437,439,441,443,446,448],{"class":261,"line":438},21,[259,440,394],{"class":272},[259,442,397],{"class":357},[259,444,445],{"class":276}," /etc/sysctl.conf",[259,447,403],{"class":357},[259,449,406],{"class":357},[259,451,453],{"class":261,"line":452},22,[259,454,455],{"class":276},"# 网络优化\n",[259,457,459],{"class":261,"line":458},23,[259,460,461],{"class":276},"net.core.somaxconn = 65535\n",[259,463,465],{"class":261,"line":464},24,[259,466,467],{"class":276},"net.ipv4.tcp_max_syn_backlog = 65535\n",[259,469,471],{"class":261,"line":470},25,[259,472,473],{"class":276},"net.ipv4.tcp_fin_timeout = 30\n",[259,475,477],{"class":261,"line":476},26,[259,478,479],{"class":276},"net.ipv4.tcp_tw_reuse = 1\n",[259,481,483],{"class":261,"line":482},27,[259,484,485],{"class":276},"net.ipv4.tcp_tw_recycle = 1\n",[259,487,489],{"class":261,"line":488},28,[259,490,491],{"class":276},"net.ipv4.ip_local_port_range = 1024 65535\n",[259,493,495],{"class":261,"line":494},29,[259,496,316],{"emptyLinePlaceholder":315},[259,498,500],{"class":261,"line":499},30,[259,501,502],{"class":276},"# 内存优化\n",[259,504,506],{"class":261,"line":505},31,[259,507,508],{"class":276},"vm.swappiness = 10\n",[259,510,512],{"class":261,"line":511},32,[259,513,514],{"class":276},"vm.overcommit_memory = 1\n",[259,516,518],{"class":261,"line":517},33,[259,519,424],{"class":357},[259,521,523],{"class":261,"line":522},34,[259,524,316],{"emptyLinePlaceholder":315},[259,526,528],{"class":261,"line":527},35,[259,529,530],{"class":265},"# 应用内核参数\n",[259,532,534,537],{"class":261,"line":533},36,[259,535,536],{"class":272},"sysctl",[259,538,539],{"class":276}," -p\n",[117,541,543],{"id":542},"_2-后端部署","2. 后端部署",[122,545,547],{"id":546},"_21-构建打包","2.1 构建打包",[113,549,550,247],{},[244,551,552],{},"步骤",[554,555,556,560,563,566],"ol",{},[557,558,559],"li",{},"克隆代码仓库",[557,561,562],{},"配置环境变量",[557,564,565],{},"构建 Maven 项目",[557,567,568],{},"生成 Docker 镜像（可选）",[113,570,571,247],{},[244,572,573],{},"命令示例",[249,575,577],{"className":251,"code":576,"language":253,"meta":254,"style":254},"# 克隆代码\ngit clone https://github.com/your-org/tagtag.git\ncd tagtag\n\n# 配置环境变量\nexport MAVEN_OPTS=\"-Xmx2g -Xms1g\"\n\n# 构建项目\nmvn clean package -DskipTests\n\n# 生成 Docker 镜像（可选）\ndocker build -t tagtag/backend:latest .\n",[256,578,579,584,595,604,608,613,635,639,644,658,662,667],{"__ignoreMap":254},[259,580,581],{"class":261,"line":262},[259,582,583],{"class":265},"# 克隆代码\n",[259,585,586,589,592],{"class":261,"line":269},[259,587,588],{"class":272},"git",[259,590,591],{"class":276}," clone",[259,593,594],{"class":276}," https://github.com/your-org/tagtag.git\n",[259,596,597,601],{"class":261,"line":283},[259,598,600],{"class":599},"s2Zo4","cd",[259,602,603],{"class":276}," tagtag\n",[259,605,606],{"class":261,"line":293},[259,607,316],{"emptyLinePlaceholder":315},[259,609,610],{"class":261,"line":303},[259,611,612],{"class":265},"# 配置环境变量\n",[259,614,615,619,623,626,629,632],{"class":261,"line":312},[259,616,618],{"class":617},"spNyl","export",[259,620,622],{"class":621},"sTEyZ"," MAVEN_OPTS",[259,624,625],{"class":357},"=",[259,627,628],{"class":357},"\"",[259,630,631],{"class":276},"-Xmx2g -Xms1g",[259,633,634],{"class":357},"\"\n",[259,636,637],{"class":261,"line":319},[259,638,316],{"emptyLinePlaceholder":315},[259,640,641],{"class":261,"line":325},[259,642,643],{"class":265},"# 构建项目\n",[259,645,646,649,652,655],{"class":261,"line":337},[259,647,648],{"class":272},"mvn",[259,650,651],{"class":276}," clean",[259,653,654],{"class":276}," package",[259,656,657],{"class":276}," -DskipTests\n",[259,659,660],{"class":261,"line":342},[259,661,316],{"emptyLinePlaceholder":315},[259,663,664],{"class":261,"line":348},[259,665,666],{"class":265},"# 生成 Docker 镜像（可选）\n",[259,668,669,672,675,678,681],{"class":261,"line":370},[259,670,671],{"class":272},"docker",[259,673,674],{"class":276}," build",[259,676,677],{"class":276}," -t",[259,679,680],{"class":276}," tagtag/backend:latest",[259,682,683],{"class":276}," .\n",[122,685,687],{"id":686},"_22-部署方式","2.2 部署方式",[689,690,692],"h4",{"id":691},"_221-传统部署","2.2.1 传统部署",[113,694,695,247],{},[244,696,552],{},[554,698,699,702,705,708],{},[557,700,701],{},"将构建好的 JAR 文件上传到服务器",[557,703,704],{},"创建启动脚本",[557,706,707],{},"配置 Systemd 服务",[557,709,710],{},"启动服务",[113,712,713,247],{},[244,714,715],{},"示例",[249,717,719],{"className":251,"code":718,"language":253,"meta":254,"style":254},"# 创建部署目录\nmkdir -p /opt/tagtag/backend\ncd /opt/tagtag/backend\n\n# 上传 JAR 文件\nscp target/tagtag-backend.jar root@server:/opt/tagtag/backend/\n\n# 创建启动脚本\ncat > start.sh \u003C\u003C EOF\n#!/bin/bash\njava -jar -Xmx8g -Xms4g -Dspring.profiles.active=prod tagtag-backend.jar\nEOF\n\nchmod +x start.sh\n\n# 配置 Systemd 服务\ncat > /etc/systemd/system/tagtag-backend.service \u003C\u003C EOF\n[Unit]\nDescription=Tagtag Starter Backend Service\nAfter=network.target\n\n[Service]\nUser=root\nWorkingDirectory=/opt/tagtag/backend\nExecStart=/opt/tagtag/backend/start.sh\nRestart=always\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# 启动服务\nsystemctl daemon-reload\nsystemctl start tagtag-backend\nsystemctl enable tagtag-backend\n",[256,720,721,726,737,743,747,752,763,767,772,786,791,796,800,804,815,819,824,837,842,847,852,856,861,866,871,876,881,886,890,895,900,904,908,913,920,930],{"__ignoreMap":254},[259,722,723],{"class":261,"line":262},[259,724,725],{"class":265},"# 创建部署目录\n",[259,727,728,731,734],{"class":261,"line":269},[259,729,730],{"class":272},"mkdir",[259,732,733],{"class":276}," -p",[259,735,736],{"class":276}," /opt/tagtag/backend\n",[259,738,739,741],{"class":261,"line":283},[259,740,600],{"class":599},[259,742,736],{"class":276},[259,744,745],{"class":261,"line":293},[259,746,316],{"emptyLinePlaceholder":315},[259,748,749],{"class":261,"line":303},[259,750,751],{"class":265},"# 上传 JAR 文件\n",[259,753,754,757,760],{"class":261,"line":312},[259,755,756],{"class":272},"scp",[259,758,759],{"class":276}," target/tagtag-backend.jar",[259,761,762],{"class":276}," root@server:/opt/tagtag/backend/\n",[259,764,765],{"class":261,"line":319},[259,766,316],{"emptyLinePlaceholder":315},[259,768,769],{"class":261,"line":325},[259,770,771],{"class":265},"# 创建启动脚本\n",[259,773,774,776,779,782,784],{"class":261,"line":337},[259,775,394],{"class":272},[259,777,778],{"class":357}," >",[259,780,781],{"class":276}," start.sh",[259,783,403],{"class":357},[259,785,406],{"class":357},[259,787,788],{"class":261,"line":342},[259,789,790],{"class":276},"#!/bin/bash\n",[259,792,793],{"class":261,"line":348},[259,794,795],{"class":276},"java -jar -Xmx8g -Xms4g -Dspring.profiles.active=prod tagtag-backend.jar\n",[259,797,798],{"class":261,"line":370},[259,799,424],{"class":357},[259,801,802],{"class":261,"line":380},[259,803,316],{"emptyLinePlaceholder":315},[259,805,806,809,812],{"class":261,"line":385},[259,807,808],{"class":272},"chmod",[259,810,811],{"class":276}," +x",[259,813,814],{"class":276}," start.sh\n",[259,816,817],{"class":261,"line":391},[259,818,316],{"emptyLinePlaceholder":315},[259,820,821],{"class":261,"line":409},[259,822,823],{"class":265},"# 配置 Systemd 服务\n",[259,825,826,828,830,833,835],{"class":261,"line":415},[259,827,394],{"class":272},[259,829,778],{"class":357},[259,831,832],{"class":276}," /etc/systemd/system/tagtag-backend.service",[259,834,403],{"class":357},[259,836,406],{"class":357},[259,838,839],{"class":261,"line":421},[259,840,841],{"class":276},"[Unit]\n",[259,843,844],{"class":261,"line":427},[259,845,846],{"class":276},"Description=Tagtag Starter Backend Service\n",[259,848,849],{"class":261,"line":432},[259,850,851],{"class":276},"After=network.target\n",[259,853,854],{"class":261,"line":438},[259,855,316],{"emptyLinePlaceholder":315},[259,857,858],{"class":261,"line":452},[259,859,860],{"class":276},"[Service]\n",[259,862,863],{"class":261,"line":458},[259,864,865],{"class":276},"User=root\n",[259,867,868],{"class":261,"line":464},[259,869,870],{"class":276},"WorkingDirectory=/opt/tagtag/backend\n",[259,872,873],{"class":261,"line":470},[259,874,875],{"class":276},"ExecStart=/opt/tagtag/backend/start.sh\n",[259,877,878],{"class":261,"line":476},[259,879,880],{"class":276},"Restart=always\n",[259,882,883],{"class":261,"line":482},[259,884,885],{"class":276},"RestartSec=5\n",[259,887,888],{"class":261,"line":488},[259,889,316],{"emptyLinePlaceholder":315},[259,891,892],{"class":261,"line":494},[259,893,894],{"class":276},"[Install]\n",[259,896,897],{"class":261,"line":499},[259,898,899],{"class":276},"WantedBy=multi-user.target\n",[259,901,902],{"class":261,"line":505},[259,903,424],{"class":357},[259,905,906],{"class":261,"line":511},[259,907,316],{"emptyLinePlaceholder":315},[259,909,910],{"class":261,"line":517},[259,911,912],{"class":265},"# 启动服务\n",[259,914,915,917],{"class":261,"line":522},[259,916,273],{"class":272},[259,918,919],{"class":276}," daemon-reload\n",[259,921,922,924,927],{"class":261,"line":527},[259,923,273],{"class":272},[259,925,926],{"class":276}," start",[259,928,929],{"class":276}," tagtag-backend\n",[259,931,932,934,937],{"class":261,"line":533},[259,933,273],{"class":272},[259,935,936],{"class":276}," enable",[259,938,929],{"class":276},[689,940,942],{"id":941},"_222-docker-部署","2.2.2 Docker 部署",[113,944,945,247],{},[244,946,552],{},[554,948,949,952,955,958],{},[557,950,951],{},"安装 Docker",[557,953,954],{},"拉取或构建 Docker 镜像",[557,956,957],{},"创建 Docker Compose 文件",[557,959,710],{},[113,961,962,247],{},[244,963,964],{},"Docker Compose 示例",[249,966,970],{"className":967,"code":968,"language":969,"meta":254,"style":254},"language-yaml shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","version: '3.8'\n\nservices:\n  tagtag-backend:\n    image: tagtag/backend:latest\n    container_name: tagtag-backend\n    ports:\n      - \"8080:8080\"\n    environment:\n      - SPRING_PROFILES_ACTIVE=prod\n      - DB_HOST=mysql\n      - DB_PORT=3306\n      - DB_USERNAME=root\n      - DB_PASSWORD=password\n      - REDIS_HOST=redis\n      - REDIS_PORT=6379\n    depends_on:\n      - mysql\n      - redis\n    restart: always\n    volumes:\n      - ./logs:/opt/tagtag/logs\n\n  mysql:\n    image: mysql:8.0\n    container_name: mysql\n    ports:\n      - \"3306:3306\"\n    environment:\n      - MYSQL_ROOT_PASSWORD=password\n      - MYSQL_DATABASE=tagtag\n    restart: always\n    volumes:\n      - ./mysql/data:/var/lib/mysql\n      - ./mysql/conf:/etc/mysql/conf.d\n\n  redis:\n    image: redis:7.0\n    container_name: redis\n    ports:\n      - \"6379:6379\"\n    restart: always\n    volumes:\n      - ./redis/data:/data\n","yaml",[256,971,972,989,993,1001,1008,1018,1027,1034,1047,1054,1061,1068,1075,1082,1089,1096,1103,1110,1117,1124,1134,1141,1148,1152,1159,1168,1176,1182,1193,1199,1206,1213,1221,1227,1234,1241,1245,1253,1263,1272,1279,1291,1300,1307],{"__ignoreMap":254},[259,973,974,978,981,983,986],{"class":261,"line":262},[259,975,977],{"class":976},"swJcz","version",[259,979,980],{"class":357},":",[259,982,358],{"class":357},[259,984,985],{"class":276},"3.8",[259,987,988],{"class":357},"'\n",[259,990,991],{"class":261,"line":269},[259,992,316],{"emptyLinePlaceholder":315},[259,994,995,998],{"class":261,"line":283},[259,996,997],{"class":976},"services",[259,999,1000],{"class":357},":\n",[259,1002,1003,1006],{"class":261,"line":293},[259,1004,1005],{"class":976},"  tagtag-backend",[259,1007,1000],{"class":357},[259,1009,1010,1013,1015],{"class":261,"line":303},[259,1011,1012],{"class":976},"    image",[259,1014,980],{"class":357},[259,1016,1017],{"class":276}," tagtag/backend:latest\n",[259,1019,1020,1023,1025],{"class":261,"line":312},[259,1021,1022],{"class":976},"    container_name",[259,1024,980],{"class":357},[259,1026,929],{"class":276},[259,1028,1029,1032],{"class":261,"line":319},[259,1030,1031],{"class":976},"    ports",[259,1033,1000],{"class":357},[259,1035,1036,1039,1042,1045],{"class":261,"line":325},[259,1037,1038],{"class":357},"      -",[259,1040,1041],{"class":357}," \"",[259,1043,1044],{"class":276},"8080:8080",[259,1046,634],{"class":357},[259,1048,1049,1052],{"class":261,"line":337},[259,1050,1051],{"class":976},"    environment",[259,1053,1000],{"class":357},[259,1055,1056,1058],{"class":261,"line":342},[259,1057,1038],{"class":357},[259,1059,1060],{"class":276}," SPRING_PROFILES_ACTIVE=prod\n",[259,1062,1063,1065],{"class":261,"line":348},[259,1064,1038],{"class":357},[259,1066,1067],{"class":276}," DB_HOST=mysql\n",[259,1069,1070,1072],{"class":261,"line":370},[259,1071,1038],{"class":357},[259,1073,1074],{"class":276}," DB_PORT=3306\n",[259,1076,1077,1079],{"class":261,"line":380},[259,1078,1038],{"class":357},[259,1080,1081],{"class":276}," DB_USERNAME=root\n",[259,1083,1084,1086],{"class":261,"line":385},[259,1085,1038],{"class":357},[259,1087,1088],{"class":276}," DB_PASSWORD=password\n",[259,1090,1091,1093],{"class":261,"line":391},[259,1092,1038],{"class":357},[259,1094,1095],{"class":276}," REDIS_HOST=redis\n",[259,1097,1098,1100],{"class":261,"line":409},[259,1099,1038],{"class":357},[259,1101,1102],{"class":276}," REDIS_PORT=6379\n",[259,1104,1105,1108],{"class":261,"line":415},[259,1106,1107],{"class":976},"    depends_on",[259,1109,1000],{"class":357},[259,1111,1112,1114],{"class":261,"line":421},[259,1113,1038],{"class":357},[259,1115,1116],{"class":276}," mysql\n",[259,1118,1119,1121],{"class":261,"line":427},[259,1120,1038],{"class":357},[259,1122,1123],{"class":276}," redis\n",[259,1125,1126,1129,1131],{"class":261,"line":432},[259,1127,1128],{"class":976},"    restart",[259,1130,980],{"class":357},[259,1132,1133],{"class":276}," always\n",[259,1135,1136,1139],{"class":261,"line":438},[259,1137,1138],{"class":976},"    volumes",[259,1140,1000],{"class":357},[259,1142,1143,1145],{"class":261,"line":452},[259,1144,1038],{"class":357},[259,1146,1147],{"class":276}," ./logs:/opt/tagtag/logs\n",[259,1149,1150],{"class":261,"line":458},[259,1151,316],{"emptyLinePlaceholder":315},[259,1153,1154,1157],{"class":261,"line":464},[259,1155,1156],{"class":976},"  mysql",[259,1158,1000],{"class":357},[259,1160,1161,1163,1165],{"class":261,"line":470},[259,1162,1012],{"class":976},[259,1164,980],{"class":357},[259,1166,1167],{"class":276}," mysql:8.0\n",[259,1169,1170,1172,1174],{"class":261,"line":476},[259,1171,1022],{"class":976},[259,1173,980],{"class":357},[259,1175,1116],{"class":276},[259,1177,1178,1180],{"class":261,"line":482},[259,1179,1031],{"class":976},[259,1181,1000],{"class":357},[259,1183,1184,1186,1188,1191],{"class":261,"line":488},[259,1185,1038],{"class":357},[259,1187,1041],{"class":357},[259,1189,1190],{"class":276},"3306:3306",[259,1192,634],{"class":357},[259,1194,1195,1197],{"class":261,"line":494},[259,1196,1051],{"class":976},[259,1198,1000],{"class":357},[259,1200,1201,1203],{"class":261,"line":499},[259,1202,1038],{"class":357},[259,1204,1205],{"class":276}," MYSQL_ROOT_PASSWORD=password\n",[259,1207,1208,1210],{"class":261,"line":505},[259,1209,1038],{"class":357},[259,1211,1212],{"class":276}," MYSQL_DATABASE=tagtag\n",[259,1214,1215,1217,1219],{"class":261,"line":511},[259,1216,1128],{"class":976},[259,1218,980],{"class":357},[259,1220,1133],{"class":276},[259,1222,1223,1225],{"class":261,"line":517},[259,1224,1138],{"class":976},[259,1226,1000],{"class":357},[259,1228,1229,1231],{"class":261,"line":522},[259,1230,1038],{"class":357},[259,1232,1233],{"class":276}," ./mysql/data:/var/lib/mysql\n",[259,1235,1236,1238],{"class":261,"line":527},[259,1237,1038],{"class":357},[259,1239,1240],{"class":276}," ./mysql/conf:/etc/mysql/conf.d\n",[259,1242,1243],{"class":261,"line":533},[259,1244,316],{"emptyLinePlaceholder":315},[259,1246,1248,1251],{"class":261,"line":1247},37,[259,1249,1250],{"class":976},"  redis",[259,1252,1000],{"class":357},[259,1254,1256,1258,1260],{"class":261,"line":1255},38,[259,1257,1012],{"class":976},[259,1259,980],{"class":357},[259,1261,1262],{"class":276}," redis:7.0\n",[259,1264,1266,1268,1270],{"class":261,"line":1265},39,[259,1267,1022],{"class":976},[259,1269,980],{"class":357},[259,1271,1123],{"class":276},[259,1273,1275,1277],{"class":261,"line":1274},40,[259,1276,1031],{"class":976},[259,1278,1000],{"class":357},[259,1280,1282,1284,1286,1289],{"class":261,"line":1281},41,[259,1283,1038],{"class":357},[259,1285,1041],{"class":357},[259,1287,1288],{"class":276},"6379:6379",[259,1290,634],{"class":357},[259,1292,1294,1296,1298],{"class":261,"line":1293},42,[259,1295,1128],{"class":976},[259,1297,980],{"class":357},[259,1299,1133],{"class":276},[259,1301,1303,1305],{"class":261,"line":1302},43,[259,1304,1138],{"class":976},[259,1306,1000],{"class":357},[259,1308,1310,1312],{"class":261,"line":1309},44,[259,1311,1038],{"class":357},[259,1313,1314],{"class":276}," ./redis/data:/data\n",[122,1316,1318],{"id":1317},"_23-配置文件管理","2.3 配置文件管理",[113,1320,1321,247,1324],{},[244,1322,1323],{},"生产环境配置文件",[256,1325,1326],{},"application-prod.yml",[113,1328,1329,247],{},[244,1330,1331],{},"核心配置项",[249,1333,1335],{"className":967,"code":1334,"language":969,"meta":254,"style":254},"# 服务器配置\nserver:\n  port: 8080\n  servlet:\n    context-path: /api\n  tomcat:\n    threads:\n      max: 200\n      min-spare: 10\n    connection-timeout: 30000\n\n# 数据库配置\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/tagtag?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai\n    username: root\n    password: password\n    hikari:\n      maximum-pool-size: 50\n      minimum-idle: 10\n      connection-timeout: 30000\n      idle-timeout: 600000\n      max-lifetime: 1800000\n\n# Redis 配置\n  redis:\n    host: localhost\n    port: 6379\n    password: \n    database: 0\n    timeout: 3000ms\n    lettuce:\n      pool:\n        max-active: 100\n        max-idle: 20\n        min-idle: 5\n        max-wait: -1ms\n\n# JWT 配置\njwt:\n  secret: your-secret-key\n  expiration: 3600\n  refresh-expiration: 86400\n\n# 日志配置\nlogging:\n  level:\n    root: info\n    com.tagtag: debug\n  file:\n    name: /opt/tagtag/logs/tagtag.log\n    max-size: 100MB\n    max-history: 30\n",[256,1336,1337,1342,1349,1359,1366,1376,1383,1390,1400,1410,1420,1424,1429,1436,1443,1453,1463,1473,1480,1490,1499,1508,1518,1528,1532,1537,1543,1553,1563,1572,1581,1591,1598,1605,1615,1625,1635,1645,1649,1654,1661,1671,1681,1691,1695,1701,1709,1717,1728,1739,1747,1758,1769],{"__ignoreMap":254},[259,1338,1339],{"class":261,"line":262},[259,1340,1341],{"class":265},"# 服务器配置\n",[259,1343,1344,1347],{"class":261,"line":269},[259,1345,1346],{"class":976},"server",[259,1348,1000],{"class":357},[259,1350,1351,1354,1356],{"class":261,"line":283},[259,1352,1353],{"class":976},"  port",[259,1355,980],{"class":357},[259,1357,1358],{"class":376}," 8080\n",[259,1360,1361,1364],{"class":261,"line":293},[259,1362,1363],{"class":976},"  servlet",[259,1365,1000],{"class":357},[259,1367,1368,1371,1373],{"class":261,"line":303},[259,1369,1370],{"class":976},"    context-path",[259,1372,980],{"class":357},[259,1374,1375],{"class":276}," /api\n",[259,1377,1378,1381],{"class":261,"line":312},[259,1379,1380],{"class":976},"  tomcat",[259,1382,1000],{"class":357},[259,1384,1385,1388],{"class":261,"line":319},[259,1386,1387],{"class":976},"    threads",[259,1389,1000],{"class":357},[259,1391,1392,1395,1397],{"class":261,"line":325},[259,1393,1394],{"class":976},"      max",[259,1396,980],{"class":357},[259,1398,1399],{"class":376}," 200\n",[259,1401,1402,1405,1407],{"class":261,"line":337},[259,1403,1404],{"class":976},"      min-spare",[259,1406,980],{"class":357},[259,1408,1409],{"class":376}," 10\n",[259,1411,1412,1415,1417],{"class":261,"line":342},[259,1413,1414],{"class":976},"    connection-timeout",[259,1416,980],{"class":357},[259,1418,1419],{"class":376}," 30000\n",[259,1421,1422],{"class":261,"line":348},[259,1423,316],{"emptyLinePlaceholder":315},[259,1425,1426],{"class":261,"line":370},[259,1427,1428],{"class":265},"# 数据库配置\n",[259,1430,1431,1434],{"class":261,"line":380},[259,1432,1433],{"class":976},"spring",[259,1435,1000],{"class":357},[259,1437,1438,1441],{"class":261,"line":385},[259,1439,1440],{"class":976},"  datasource",[259,1442,1000],{"class":357},[259,1444,1445,1448,1450],{"class":261,"line":391},[259,1446,1447],{"class":976},"    url",[259,1449,980],{"class":357},[259,1451,1452],{"class":276}," jdbc:mysql://localhost:3306/tagtag?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai\n",[259,1454,1455,1458,1460],{"class":261,"line":409},[259,1456,1457],{"class":976},"    username",[259,1459,980],{"class":357},[259,1461,1462],{"class":276}," root\n",[259,1464,1465,1468,1470],{"class":261,"line":415},[259,1466,1467],{"class":976},"    password",[259,1469,980],{"class":357},[259,1471,1472],{"class":276}," password\n",[259,1474,1475,1478],{"class":261,"line":421},[259,1476,1477],{"class":976},"    hikari",[259,1479,1000],{"class":357},[259,1481,1482,1485,1487],{"class":261,"line":427},[259,1483,1484],{"class":976},"      maximum-pool-size",[259,1486,980],{"class":357},[259,1488,1489],{"class":376}," 50\n",[259,1491,1492,1495,1497],{"class":261,"line":432},[259,1493,1494],{"class":976},"      minimum-idle",[259,1496,980],{"class":357},[259,1498,1409],{"class":376},[259,1500,1501,1504,1506],{"class":261,"line":438},[259,1502,1503],{"class":976},"      connection-timeout",[259,1505,980],{"class":357},[259,1507,1419],{"class":376},[259,1509,1510,1513,1515],{"class":261,"line":452},[259,1511,1512],{"class":976},"      idle-timeout",[259,1514,980],{"class":357},[259,1516,1517],{"class":376}," 600000\n",[259,1519,1520,1523,1525],{"class":261,"line":458},[259,1521,1522],{"class":976},"      max-lifetime",[259,1524,980],{"class":357},[259,1526,1527],{"class":376}," 1800000\n",[259,1529,1530],{"class":261,"line":464},[259,1531,316],{"emptyLinePlaceholder":315},[259,1533,1534],{"class":261,"line":470},[259,1535,1536],{"class":265},"# Redis 配置\n",[259,1538,1539,1541],{"class":261,"line":476},[259,1540,1250],{"class":976},[259,1542,1000],{"class":357},[259,1544,1545,1548,1550],{"class":261,"line":482},[259,1546,1547],{"class":976},"    host",[259,1549,980],{"class":357},[259,1551,1552],{"class":276}," localhost\n",[259,1554,1555,1558,1560],{"class":261,"line":488},[259,1556,1557],{"class":976},"    port",[259,1559,980],{"class":357},[259,1561,1562],{"class":376}," 6379\n",[259,1564,1565,1567,1569],{"class":261,"line":494},[259,1566,1467],{"class":976},[259,1568,980],{"class":357},[259,1570,1571],{"class":621}," \n",[259,1573,1574,1577,1579],{"class":261,"line":499},[259,1575,1576],{"class":976},"    database",[259,1578,980],{"class":357},[259,1580,377],{"class":376},[259,1582,1583,1586,1588],{"class":261,"line":505},[259,1584,1585],{"class":976},"    timeout",[259,1587,980],{"class":357},[259,1589,1590],{"class":276}," 3000ms\n",[259,1592,1593,1596],{"class":261,"line":511},[259,1594,1595],{"class":976},"    lettuce",[259,1597,1000],{"class":357},[259,1599,1600,1603],{"class":261,"line":517},[259,1601,1602],{"class":976},"      pool",[259,1604,1000],{"class":357},[259,1606,1607,1610,1612],{"class":261,"line":522},[259,1608,1609],{"class":976},"        max-active",[259,1611,980],{"class":357},[259,1613,1614],{"class":376}," 100\n",[259,1616,1617,1620,1622],{"class":261,"line":527},[259,1618,1619],{"class":976},"        max-idle",[259,1621,980],{"class":357},[259,1623,1624],{"class":376}," 20\n",[259,1626,1627,1630,1632],{"class":261,"line":533},[259,1628,1629],{"class":976},"        min-idle",[259,1631,980],{"class":357},[259,1633,1634],{"class":376}," 5\n",[259,1636,1637,1640,1642],{"class":261,"line":1247},[259,1638,1639],{"class":976},"        max-wait",[259,1641,980],{"class":357},[259,1643,1644],{"class":276}," -1ms\n",[259,1646,1647],{"class":261,"line":1255},[259,1648,316],{"emptyLinePlaceholder":315},[259,1650,1651],{"class":261,"line":1265},[259,1652,1653],{"class":265},"# JWT 配置\n",[259,1655,1656,1659],{"class":261,"line":1274},[259,1657,1658],{"class":976},"jwt",[259,1660,1000],{"class":357},[259,1662,1663,1666,1668],{"class":261,"line":1281},[259,1664,1665],{"class":976},"  secret",[259,1667,980],{"class":357},[259,1669,1670],{"class":276}," your-secret-key\n",[259,1672,1673,1676,1678],{"class":261,"line":1293},[259,1674,1675],{"class":976},"  expiration",[259,1677,980],{"class":357},[259,1679,1680],{"class":376}," 3600\n",[259,1682,1683,1686,1688],{"class":261,"line":1302},[259,1684,1685],{"class":976},"  refresh-expiration",[259,1687,980],{"class":357},[259,1689,1690],{"class":376}," 86400\n",[259,1692,1693],{"class":261,"line":1309},[259,1694,316],{"emptyLinePlaceholder":315},[259,1696,1698],{"class":261,"line":1697},45,[259,1699,1700],{"class":265},"# 日志配置\n",[259,1702,1704,1707],{"class":261,"line":1703},46,[259,1705,1706],{"class":976},"logging",[259,1708,1000],{"class":357},[259,1710,1712,1715],{"class":261,"line":1711},47,[259,1713,1714],{"class":976},"  level",[259,1716,1000],{"class":357},[259,1718,1720,1723,1725],{"class":261,"line":1719},48,[259,1721,1722],{"class":976},"    root",[259,1724,980],{"class":357},[259,1726,1727],{"class":276}," info\n",[259,1729,1731,1734,1736],{"class":261,"line":1730},49,[259,1732,1733],{"class":976},"    com.tagtag",[259,1735,980],{"class":357},[259,1737,1738],{"class":276}," debug\n",[259,1740,1742,1745],{"class":261,"line":1741},50,[259,1743,1744],{"class":976},"  file",[259,1746,1000],{"class":357},[259,1748,1750,1753,1755],{"class":261,"line":1749},51,[259,1751,1752],{"class":976},"    name",[259,1754,980],{"class":357},[259,1756,1757],{"class":276}," /opt/tagtag/logs/tagtag.log\n",[259,1759,1761,1764,1766],{"class":261,"line":1760},52,[259,1762,1763],{"class":976},"    max-size",[259,1765,980],{"class":357},[259,1767,1768],{"class":276}," 100MB\n",[259,1770,1772,1775,1777],{"class":261,"line":1771},53,[259,1773,1774],{"class":976},"    max-history",[259,1776,980],{"class":357},[259,1778,1779],{"class":376}," 30\n",[117,1781,1783],{"id":1782},"_3-前端部署","3. 前端部署",[122,1785,1787],{"id":1786},"_31-构建打包","3.1 构建打包",[113,1789,1790,247],{},[244,1791,552],{},[554,1793,1794,1796,1799,1802],{},[557,1795,559],{},[557,1797,1798],{},"安装依赖",[557,1800,1801],{},"构建生产版本",[557,1803,568],{},[113,1805,1806,247],{},[244,1807,573],{},[249,1809,1811],{"className":251,"code":1810,"language":253,"meta":254,"style":254},"# 克隆代码\ngit clone https://github.com/your-org/tagtag.git\ncd tagtag/tagtag-ui\n\n# 安装依赖\npnpm install\n\n# 构建生产版本\npnpm build\n\n# 生成 Docker 镜像（可选）\ndocker build -t tagtag/frontend:latest .\n",[256,1812,1813,1817,1825,1832,1836,1841,1849,1853,1858,1865,1869,1873],{"__ignoreMap":254},[259,1814,1815],{"class":261,"line":262},[259,1816,583],{"class":265},[259,1818,1819,1821,1823],{"class":261,"line":269},[259,1820,588],{"class":272},[259,1822,591],{"class":276},[259,1824,594],{"class":276},[259,1826,1827,1829],{"class":261,"line":283},[259,1828,600],{"class":599},[259,1830,1831],{"class":276}," tagtag/tagtag-ui\n",[259,1833,1834],{"class":261,"line":293},[259,1835,316],{"emptyLinePlaceholder":315},[259,1837,1838],{"class":261,"line":303},[259,1839,1840],{"class":265},"# 安装依赖\n",[259,1842,1843,1846],{"class":261,"line":312},[259,1844,1845],{"class":272},"pnpm",[259,1847,1848],{"class":276}," install\n",[259,1850,1851],{"class":261,"line":319},[259,1852,316],{"emptyLinePlaceholder":315},[259,1854,1855],{"class":261,"line":325},[259,1856,1857],{"class":265},"# 构建生产版本\n",[259,1859,1860,1862],{"class":261,"line":337},[259,1861,1845],{"class":272},[259,1863,1864],{"class":276}," build\n",[259,1866,1867],{"class":261,"line":342},[259,1868,316],{"emptyLinePlaceholder":315},[259,1870,1871],{"class":261,"line":348},[259,1872,666],{"class":265},[259,1874,1875,1877,1879,1881,1884],{"class":261,"line":370},[259,1876,671],{"class":272},[259,1878,674],{"class":276},[259,1880,677],{"class":276},[259,1882,1883],{"class":276}," tagtag/frontend:latest",[259,1885,683],{"class":276},[122,1887,1889],{"id":1888},"_32-nginx-部署","3.2 Nginx 部署",[113,1891,1892,247],{},[244,1893,552],{},[554,1895,1896,1899,1902,1905],{},[557,1897,1898],{},"安装 Nginx",[557,1900,1901],{},"配置 Nginx 虚拟主机",[557,1903,1904],{},"将构建好的静态文件复制到 Nginx 目录",[557,1906,1907],{},"启动 Nginx 服务",[113,1909,1910,247],{},[244,1911,715],{},[249,1913,1915],{"className":251,"code":1914,"language":253,"meta":254,"style":254},"# 安装 Nginx\nyum install -y nginx\n\n# 创建部署目录\nmkdir -p /usr/share/nginx/html/tagtag\n\n# 复制静态文件\ncp -r dist/* /usr/share/nginx/html/tagtag/\n\n# 配置 Nginx\ncat > /etc/nginx/conf.d/tagtag.conf \u003C\u003C EOF\nserver {\n    listen 80;\n    server_name tagtag.your-domain.com;\n    \n    # 静态资源配置\n    location / {\n        root /usr/share/nginx/html/tagtag;\n        index index.html;\n        try_files $uri $uri/ /index.html;\n    }\n    \n    # API 代理配置\n    location /api {\n        proxy_pass http://backend-server:8080;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket 支持\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n    \n    # 日志配置\n    access_log /var/log/nginx/tagtag.access.log main;\n    error_log /var/log/nginx/tagtag.error.log error;\n}\nEOF\n\n# 检查 Nginx 配置\nnginx -t\n\n# 重启 Nginx\nsystemctl restart nginx\nsystemctl enable nginx\n",[256,1916,1917,1922,1936,1940,1944,1953,1957,1962,1979,1983,1988,2001,2006,2011,2016,2021,2026,2031,2036,2041,2055,2060,2064,2069,2074,2079,2090,2100,2110,2120,2125,2130,2135,2145,2150,2154,2158,2163,2168,2173,2178,2182,2186,2191,2199,2203,2208,2217],{"__ignoreMap":254},[259,1918,1919],{"class":261,"line":262},[259,1920,1921],{"class":265},"# 安装 Nginx\n",[259,1923,1924,1927,1930,1933],{"class":261,"line":269},[259,1925,1926],{"class":272},"yum",[259,1928,1929],{"class":276}," install",[259,1931,1932],{"class":276}," -y",[259,1934,1935],{"class":276}," nginx\n",[259,1937,1938],{"class":261,"line":283},[259,1939,316],{"emptyLinePlaceholder":315},[259,1941,1942],{"class":261,"line":293},[259,1943,725],{"class":265},[259,1945,1946,1948,1950],{"class":261,"line":303},[259,1947,730],{"class":272},[259,1949,733],{"class":276},[259,1951,1952],{"class":276}," /usr/share/nginx/html/tagtag\n",[259,1954,1955],{"class":261,"line":312},[259,1956,316],{"emptyLinePlaceholder":315},[259,1958,1959],{"class":261,"line":319},[259,1960,1961],{"class":265},"# 复制静态文件\n",[259,1963,1964,1967,1970,1973,1976],{"class":261,"line":325},[259,1965,1966],{"class":272},"cp",[259,1968,1969],{"class":276}," -r",[259,1971,1972],{"class":276}," dist/",[259,1974,1975],{"class":621},"*",[259,1977,1978],{"class":276}," /usr/share/nginx/html/tagtag/\n",[259,1980,1981],{"class":261,"line":337},[259,1982,316],{"emptyLinePlaceholder":315},[259,1984,1985],{"class":261,"line":342},[259,1986,1987],{"class":265},"# 配置 Nginx\n",[259,1989,1990,1992,1994,1997,1999],{"class":261,"line":348},[259,1991,394],{"class":272},[259,1993,778],{"class":357},[259,1995,1996],{"class":276}," /etc/nginx/conf.d/tagtag.conf",[259,1998,403],{"class":357},[259,2000,406],{"class":357},[259,2002,2003],{"class":261,"line":370},[259,2004,2005],{"class":276},"server {\n",[259,2007,2008],{"class":261,"line":380},[259,2009,2010],{"class":276},"    listen 80;\n",[259,2012,2013],{"class":261,"line":385},[259,2014,2015],{"class":276},"    server_name tagtag.your-domain.com;\n",[259,2017,2018],{"class":261,"line":391},[259,2019,2020],{"class":276},"    \n",[259,2022,2023],{"class":261,"line":409},[259,2024,2025],{"class":276},"    # 静态资源配置\n",[259,2027,2028],{"class":261,"line":415},[259,2029,2030],{"class":276},"    location / {\n",[259,2032,2033],{"class":261,"line":421},[259,2034,2035],{"class":276},"        root /usr/share/nginx/html/tagtag;\n",[259,2037,2038],{"class":261,"line":427},[259,2039,2040],{"class":276},"        index index.html;\n",[259,2042,2043,2046,2049,2052],{"class":261,"line":432},[259,2044,2045],{"class":276},"        try_files ",[259,2047,2048],{"class":621},"$uri",[259,2050,2051],{"class":621}," $uri",[259,2053,2054],{"class":276},"/ /index.html;\n",[259,2056,2057],{"class":261,"line":438},[259,2058,2059],{"class":276},"    }\n",[259,2061,2062],{"class":261,"line":452},[259,2063,2020],{"class":276},[259,2065,2066],{"class":261,"line":458},[259,2067,2068],{"class":276},"    # API 代理配置\n",[259,2070,2071],{"class":261,"line":464},[259,2072,2073],{"class":276},"    location /api {\n",[259,2075,2076],{"class":261,"line":470},[259,2077,2078],{"class":276},"        proxy_pass http://backend-server:8080;\n",[259,2080,2081,2084,2087],{"class":261,"line":476},[259,2082,2083],{"class":276},"        proxy_set_header Host ",[259,2085,2086],{"class":621},"$host",[259,2088,2089],{"class":276},";\n",[259,2091,2092,2095,2098],{"class":261,"line":482},[259,2093,2094],{"class":276},"        proxy_set_header X-Real-IP ",[259,2096,2097],{"class":621},"$remote_addr",[259,2099,2089],{"class":276},[259,2101,2102,2105,2108],{"class":261,"line":488},[259,2103,2104],{"class":276},"        proxy_set_header X-Forwarded-For ",[259,2106,2107],{"class":621},"$proxy_add_x_forwarded_for",[259,2109,2089],{"class":276},[259,2111,2112,2115,2118],{"class":261,"line":494},[259,2113,2114],{"class":276},"        proxy_set_header X-Forwarded-Proto ",[259,2116,2117],{"class":621},"$scheme",[259,2119,2089],{"class":276},[259,2121,2122],{"class":261,"line":499},[259,2123,2124],{"class":276},"        \n",[259,2126,2127],{"class":261,"line":505},[259,2128,2129],{"class":276},"        # WebSocket 支持\n",[259,2131,2132],{"class":261,"line":511},[259,2133,2134],{"class":276},"        proxy_http_version 1.1;\n",[259,2136,2137,2140,2143],{"class":261,"line":517},[259,2138,2139],{"class":276},"        proxy_set_header Upgrade ",[259,2141,2142],{"class":621},"$http_upgrade",[259,2144,2089],{"class":276},[259,2146,2147],{"class":261,"line":522},[259,2148,2149],{"class":276},"        proxy_set_header Connection \"upgrade\";\n",[259,2151,2152],{"class":261,"line":527},[259,2153,2059],{"class":276},[259,2155,2156],{"class":261,"line":533},[259,2157,2020],{"class":276},[259,2159,2160],{"class":261,"line":1247},[259,2161,2162],{"class":276},"    # 日志配置\n",[259,2164,2165],{"class":261,"line":1255},[259,2166,2167],{"class":276},"    access_log /var/log/nginx/tagtag.access.log main;\n",[259,2169,2170],{"class":261,"line":1265},[259,2171,2172],{"class":276},"    error_log /var/log/nginx/tagtag.error.log error;\n",[259,2174,2175],{"class":261,"line":1274},[259,2176,2177],{"class":276},"}\n",[259,2179,2180],{"class":261,"line":1281},[259,2181,424],{"class":357},[259,2183,2184],{"class":261,"line":1293},[259,2185,316],{"emptyLinePlaceholder":315},[259,2187,2188],{"class":261,"line":1302},[259,2189,2190],{"class":265},"# 检查 Nginx 配置\n",[259,2192,2193,2196],{"class":261,"line":1309},[259,2194,2195],{"class":272},"nginx",[259,2197,2198],{"class":276}," -t\n",[259,2200,2201],{"class":261,"line":1697},[259,2202,316],{"emptyLinePlaceholder":315},[259,2204,2205],{"class":261,"line":1703},[259,2206,2207],{"class":265},"# 重启 Nginx\n",[259,2209,2210,2212,2215],{"class":261,"line":1711},[259,2211,273],{"class":272},[259,2213,2214],{"class":276}," restart",[259,2216,1935],{"class":276},[259,2218,2219,2221,2223],{"class":261,"line":1719},[259,2220,273],{"class":272},[259,2222,936],{"class":276},[259,2224,1935],{"class":276},[122,2226,2228],{"id":2227},"_33-ssl-配置","3.3 SSL 配置",[113,2230,2231,247],{},[244,2232,552],{},[554,2234,2235,2238,2241],{},[557,2236,2237],{},"申请 SSL 证书（推荐使用 Let's Encrypt）",[557,2239,2240],{},"配置 Nginx SSL",[557,2242,2243],{},"强制 HTTPS 跳转",[113,2245,2246,247],{},[244,2247,715],{},[249,2249,2251],{"className":251,"code":2250,"language":253,"meta":254,"style":254},"# 安装 Certbot\nyum install -y epel-release\nyum install -y certbot python3-certbot-nginx\n\n# 申请 SSL 证书\ncertbot --nginx -d tagtag.your-domain.com\n\n# 自动续约\necho \"0 3 * * * certbot renew --quiet\" >> /var/spool/cron/root\n",[256,2252,2253,2258,2269,2283,2287,2292,2306,2310,2315],{"__ignoreMap":254},[259,2254,2255],{"class":261,"line":262},[259,2256,2257],{"class":265},"# 安装 Certbot\n",[259,2259,2260,2262,2264,2266],{"class":261,"line":269},[259,2261,1926],{"class":272},[259,2263,1929],{"class":276},[259,2265,1932],{"class":276},[259,2267,2268],{"class":276}," epel-release\n",[259,2270,2271,2273,2275,2277,2280],{"class":261,"line":283},[259,2272,1926],{"class":272},[259,2274,1929],{"class":276},[259,2276,1932],{"class":276},[259,2278,2279],{"class":276}," certbot",[259,2281,2282],{"class":276}," python3-certbot-nginx\n",[259,2284,2285],{"class":261,"line":293},[259,2286,316],{"emptyLinePlaceholder":315},[259,2288,2289],{"class":261,"line":303},[259,2290,2291],{"class":265},"# 申请 SSL 证书\n",[259,2293,2294,2297,2300,2303],{"class":261,"line":312},[259,2295,2296],{"class":272},"certbot",[259,2298,2299],{"class":276}," --nginx",[259,2301,2302],{"class":276}," -d",[259,2304,2305],{"class":276}," tagtag.your-domain.com\n",[259,2307,2308],{"class":261,"line":319},[259,2309,316],{"emptyLinePlaceholder":315},[259,2311,2312],{"class":261,"line":325},[259,2313,2314],{"class":265},"# 自动续约\n",[259,2316,2317,2320,2322,2325,2327,2329],{"class":261,"line":337},[259,2318,2319],{"class":599},"echo",[259,2321,1041],{"class":357},[259,2323,2324],{"class":276},"0 3 * * * certbot renew --quiet",[259,2326,628],{"class":357},[259,2328,397],{"class":357},[259,2330,2331],{"class":276}," /var/spool/cron/root\n",[113,2333,2334,247],{},[244,2335,2336],{},"Nginx SSL 配置",[249,2338,2341],{"className":2339,"code":2340,"language":2195,"meta":254,"style":254},"language-nginx shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","server {\n    listen 443 ssl http2;\n    server_name tagtag.your-domain.com;\n    \n    # SSL 配置\n    ssl_certificate /etc/letsencrypt/live/tagtag.your-domain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/tagtag.your-domain.com/privkey.pem;\n    ssl_session_timeout 1d;\n    ssl_session_cache shared:MozSSL:10m;\n    ssl_session_tickets off;\n    \n    # TLS 配置\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    \n    # HSTS 配置\n    add_header Strict-Transport-Security \"max-age=63072000\" always;\n    \n    # 其他配置...\n}\n\n# 强制 HTTPS 跳转\nserver {\n    listen 80;\n    server_name tagtag.your-domain.com;\n    return 301 https://$server_name$request_uri;\n}\n",[256,2342,2343,2347,2352,2356,2360,2365,2370,2375,2380,2385,2390,2394,2399,2404,2409,2414,2418,2423,2428,2432,2437,2441,2445,2450,2454,2458,2462,2467],{"__ignoreMap":254},[259,2344,2345],{"class":261,"line":262},[259,2346,2005],{},[259,2348,2349],{"class":261,"line":269},[259,2350,2351],{},"    listen 443 ssl http2;\n",[259,2353,2354],{"class":261,"line":283},[259,2355,2015],{},[259,2357,2358],{"class":261,"line":293},[259,2359,2020],{},[259,2361,2362],{"class":261,"line":303},[259,2363,2364],{},"    # SSL 配置\n",[259,2366,2367],{"class":261,"line":312},[259,2368,2369],{},"    ssl_certificate /etc/letsencrypt/live/tagtag.your-domain.com/fullchain.pem;\n",[259,2371,2372],{"class":261,"line":319},[259,2373,2374],{},"    ssl_certificate_key /etc/letsencrypt/live/tagtag.your-domain.com/privkey.pem;\n",[259,2376,2377],{"class":261,"line":325},[259,2378,2379],{},"    ssl_session_timeout 1d;\n",[259,2381,2382],{"class":261,"line":337},[259,2383,2384],{},"    ssl_session_cache shared:MozSSL:10m;\n",[259,2386,2387],{"class":261,"line":342},[259,2388,2389],{},"    ssl_session_tickets off;\n",[259,2391,2392],{"class":261,"line":348},[259,2393,2020],{},[259,2395,2396],{"class":261,"line":370},[259,2397,2398],{},"    # TLS 配置\n",[259,2400,2401],{"class":261,"line":380},[259,2402,2403],{},"    ssl_protocols TLSv1.2 TLSv1.3;\n",[259,2405,2406],{"class":261,"line":385},[259,2407,2408],{},"    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n",[259,2410,2411],{"class":261,"line":391},[259,2412,2413],{},"    ssl_prefer_server_ciphers off;\n",[259,2415,2416],{"class":261,"line":409},[259,2417,2020],{},[259,2419,2420],{"class":261,"line":415},[259,2421,2422],{},"    # HSTS 配置\n",[259,2424,2425],{"class":261,"line":421},[259,2426,2427],{},"    add_header Strict-Transport-Security \"max-age=63072000\" always;\n",[259,2429,2430],{"class":261,"line":427},[259,2431,2020],{},[259,2433,2434],{"class":261,"line":432},[259,2435,2436],{},"    # 其他配置...\n",[259,2438,2439],{"class":261,"line":438},[259,2440,2177],{},[259,2442,2443],{"class":261,"line":452},[259,2444,316],{"emptyLinePlaceholder":315},[259,2446,2447],{"class":261,"line":458},[259,2448,2449],{},"# 强制 HTTPS 跳转\n",[259,2451,2452],{"class":261,"line":464},[259,2453,2005],{},[259,2455,2456],{"class":261,"line":470},[259,2457,2010],{},[259,2459,2460],{"class":261,"line":476},[259,2461,2015],{},[259,2463,2464],{"class":261,"line":482},[259,2465,2466],{},"    return 301 https://$server_name$request_uri;\n",[259,2468,2469],{"class":261,"line":488},[259,2470,2177],{},[117,2472,2474],{"id":2473},"_4-数据库优化","4. 数据库优化",[122,2476,2478],{"id":2477},"_41-mysql-配置优化","4.1 MySQL 配置优化",[113,2480,2481,247],{},[244,2482,1331],{},[249,2484,2488],{"className":2485,"code":2486,"language":2487,"meta":254,"style":254},"language-ini shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","# /etc/my.cnf\n\n[mysqld]\n# 基础配置\nuser = mysql\ndatadir = /var/lib/mysql\nsocket = /var/lib/mysql/mysql.sock\npid-file = /var/run/mysqld/mysqld.pid\n\n# 字符集配置\ncharacter-set-server = utf8mb4\ncollation-server = utf8mb4_unicode_ci\ninit_connect = 'SET NAMES utf8mb4'\n\n# 内存配置\ninnodb_buffer_pool_size = 20G  # 建议为服务器内存的 50%-70%\ninnodb_log_buffer_size = 128M\nkey_buffer_size = 256M\nquery_cache_size = 0\nquery_cache_type = 0\n\n# 连接配置\nmax_connections = 2000\nmax_connect_errors = 10000\nwait_timeout = 600\ninteractive_timeout = 600\n\n# InnoDB 配置\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 2  # 生产环境建议设置为 2\ninnodb_log_file_size = 2G\ninnodb_log_files_in_group = 2\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 8000\ninnodb_doublewrite = 1\ninnodb_thread_concurrency = 0\n\n# 日志配置\nslow_query_log = 1\nslow_query_log_file = /var/lib/mysql/slow.log\nlong_query_time = 2\nlog_queries_not_using_indexes = 0\n\n# 其他配置\nskip-name-resolve\nlower_case_table_names = 1\n","ini",[256,2489,2490,2495,2499,2504,2509,2514,2519,2524,2529,2533,2538,2543,2548,2553,2557,2562,2567,2572,2577,2582,2587,2591,2596,2601,2606,2611,2616,2620,2625,2630,2635,2640,2645,2650,2655,2660,2665,2669,2673,2678,2683,2688,2693,2697,2702,2707],{"__ignoreMap":254},[259,2491,2492],{"class":261,"line":262},[259,2493,2494],{},"# /etc/my.cnf\n",[259,2496,2497],{"class":261,"line":269},[259,2498,316],{"emptyLinePlaceholder":315},[259,2500,2501],{"class":261,"line":283},[259,2502,2503],{},"[mysqld]\n",[259,2505,2506],{"class":261,"line":293},[259,2507,2508],{},"# 基础配置\n",[259,2510,2511],{"class":261,"line":303},[259,2512,2513],{},"user = mysql\n",[259,2515,2516],{"class":261,"line":312},[259,2517,2518],{},"datadir = /var/lib/mysql\n",[259,2520,2521],{"class":261,"line":319},[259,2522,2523],{},"socket = /var/lib/mysql/mysql.sock\n",[259,2525,2526],{"class":261,"line":325},[259,2527,2528],{},"pid-file = /var/run/mysqld/mysqld.pid\n",[259,2530,2531],{"class":261,"line":337},[259,2532,316],{"emptyLinePlaceholder":315},[259,2534,2535],{"class":261,"line":342},[259,2536,2537],{},"# 字符集配置\n",[259,2539,2540],{"class":261,"line":348},[259,2541,2542],{},"character-set-server = utf8mb4\n",[259,2544,2545],{"class":261,"line":370},[259,2546,2547],{},"collation-server = utf8mb4_unicode_ci\n",[259,2549,2550],{"class":261,"line":380},[259,2551,2552],{},"init_connect = 'SET NAMES utf8mb4'\n",[259,2554,2555],{"class":261,"line":385},[259,2556,316],{"emptyLinePlaceholder":315},[259,2558,2559],{"class":261,"line":391},[259,2560,2561],{},"# 内存配置\n",[259,2563,2564],{"class":261,"line":409},[259,2565,2566],{},"innodb_buffer_pool_size = 20G  # 建议为服务器内存的 50%-70%\n",[259,2568,2569],{"class":261,"line":415},[259,2570,2571],{},"innodb_log_buffer_size = 128M\n",[259,2573,2574],{"class":261,"line":421},[259,2575,2576],{},"key_buffer_size = 256M\n",[259,2578,2579],{"class":261,"line":427},[259,2580,2581],{},"query_cache_size = 0\n",[259,2583,2584],{"class":261,"line":432},[259,2585,2586],{},"query_cache_type = 0\n",[259,2588,2589],{"class":261,"line":438},[259,2590,316],{"emptyLinePlaceholder":315},[259,2592,2593],{"class":261,"line":452},[259,2594,2595],{},"# 连接配置\n",[259,2597,2598],{"class":261,"line":458},[259,2599,2600],{},"max_connections = 2000\n",[259,2602,2603],{"class":261,"line":464},[259,2604,2605],{},"max_connect_errors = 10000\n",[259,2607,2608],{"class":261,"line":470},[259,2609,2610],{},"wait_timeout = 600\n",[259,2612,2613],{"class":261,"line":476},[259,2614,2615],{},"interactive_timeout = 600\n",[259,2617,2618],{"class":261,"line":482},[259,2619,316],{"emptyLinePlaceholder":315},[259,2621,2622],{"class":261,"line":488},[259,2623,2624],{},"# InnoDB 配置\n",[259,2626,2627],{"class":261,"line":494},[259,2628,2629],{},"innodb_file_per_table = 1\n",[259,2631,2632],{"class":261,"line":499},[259,2633,2634],{},"innodb_flush_log_at_trx_commit = 2  # 生产环境建议设置为 2\n",[259,2636,2637],{"class":261,"line":505},[259,2638,2639],{},"innodb_log_file_size = 2G\n",[259,2641,2642],{"class":261,"line":511},[259,2643,2644],{},"innodb_log_files_in_group = 2\n",[259,2646,2647],{"class":261,"line":517},[259,2648,2649],{},"innodb_io_capacity = 4000\n",[259,2651,2652],{"class":261,"line":522},[259,2653,2654],{},"innodb_io_capacity_max = 8000\n",[259,2656,2657],{"class":261,"line":527},[259,2658,2659],{},"innodb_doublewrite = 1\n",[259,2661,2662],{"class":261,"line":533},[259,2663,2664],{},"innodb_thread_concurrency = 0\n",[259,2666,2667],{"class":261,"line":1247},[259,2668,316],{"emptyLinePlaceholder":315},[259,2670,2671],{"class":261,"line":1255},[259,2672,1700],{},[259,2674,2675],{"class":261,"line":1265},[259,2676,2677],{},"slow_query_log = 1\n",[259,2679,2680],{"class":261,"line":1274},[259,2681,2682],{},"slow_query_log_file = /var/lib/mysql/slow.log\n",[259,2684,2685],{"class":261,"line":1281},[259,2686,2687],{},"long_query_time = 2\n",[259,2689,2690],{"class":261,"line":1293},[259,2691,2692],{},"log_queries_not_using_indexes = 0\n",[259,2694,2695],{"class":261,"line":1302},[259,2696,316],{"emptyLinePlaceholder":315},[259,2698,2699],{"class":261,"line":1309},[259,2700,2701],{},"# 其他配置\n",[259,2703,2704],{"class":261,"line":1697},[259,2705,2706],{},"skip-name-resolve\n",[259,2708,2709],{"class":261,"line":1703},[259,2710,2711],{},"lower_case_table_names = 1\n",[122,2713,2715],{"id":2714},"_42-索引优化","4.2 索引优化",[113,2717,2718,247],{},[244,2719,2720],{},"索引设计原则",[2722,2723,2724,2727,2730,2733,2736,2739],"ul",{},[557,2725,2726],{},"为经常查询的字段创建索引",[557,2728,2729],{},"为 JOIN 条件字段创建索引",[557,2731,2732],{},"为 ORDER BY 和 GROUP BY 字段创建索引",[557,2734,2735],{},"避免创建过多索引",[557,2737,2738],{},"使用复合索引时，将最常用的字段放在前面",[557,2740,2741],{},"定期优化表和重建索引",[113,2743,2744,247],{},[244,2745,715],{},[249,2747,2751],{"className":2748,"code":2749,"language":2750,"meta":254,"style":254},"language-sql shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","-- 创建复合索引\nCREATE INDEX idx_user_name_email ON sys_user(username, email);\n\n-- 重建索引\nALTER TABLE sys_user ENGINE=InnoDB;\n\n-- 分析表\nANALYZE TABLE sys_user;\n","sql",[256,2752,2753,2758,2775,2779,2784,2800,2804,2809],{"__ignoreMap":254},[259,2754,2755],{"class":261,"line":262},[259,2756,2757],{"class":265},"-- 创建复合索引\n",[259,2759,2760,2763,2766,2769,2772],{"class":261,"line":269},[259,2761,2762],{"class":376},"CREATE",[259,2764,2765],{"class":376}," INDEX",[259,2767,2768],{"class":599}," idx_user_name_email",[259,2770,2771],{"class":376}," ON",[259,2773,2774],{"class":621}," sys_user(username, email);\n",[259,2776,2777],{"class":261,"line":283},[259,2778,316],{"emptyLinePlaceholder":315},[259,2780,2781],{"class":261,"line":293},[259,2782,2783],{"class":265},"-- 重建索引\n",[259,2785,2786,2789,2792,2795,2797],{"class":261,"line":303},[259,2787,2788],{"class":376},"ALTER",[259,2790,2791],{"class":376}," TABLE",[259,2793,2794],{"class":621}," sys_user ENGINE",[259,2796,625],{"class":357},[259,2798,2799],{"class":621},"InnoDB;\n",[259,2801,2802],{"class":261,"line":312},[259,2803,316],{"emptyLinePlaceholder":315},[259,2805,2806],{"class":261,"line":319},[259,2807,2808],{"class":265},"-- 分析表\n",[259,2810,2811,2814,2817],{"class":261,"line":325},[259,2812,2813],{"class":621},"ANALYZE ",[259,2815,2816],{"class":376},"TABLE",[259,2818,2819],{"class":621}," sys_user;\n",[122,2821,2823],{"id":2822},"_43-查询优化","4.3 查询优化",[113,2825,2826,247],{},[244,2827,2828],{},"优化建议",[2722,2830,2831,2834,2837,2840,2843,2846],{},[557,2832,2833],{},"使用 EXPLAIN 分析查询计划",[557,2835,2836],{},"避免 SELECT *，只查询需要的字段",[557,2838,2839],{},"避免在 WHERE 子句中使用函数",[557,2841,2842],{},"避免在 WHERE 子句中对字段进行运算",[557,2844,2845],{},"使用 LIMIT 限制返回结果数量",[557,2847,2848],{},"合理使用 JOIN，避免笛卡尔积",[113,2850,2851,247],{},[244,2852,715],{},[249,2854,2856],{"className":2748,"code":2855,"language":2750,"meta":254,"style":254},"-- 不好的查询\nSELECT * FROM sys_user WHERE DATE(create_time) = '2023-01-01';\n\n-- 优化后的查询\nSELECT id, username, email FROM sys_user WHERE create_time BETWEEN '2023-01-01 00:00:00' AND '2023-01-01 23:59:59';\n",[256,2857,2858,2863,2897,2901,2906],{"__ignoreMap":254},[259,2859,2860],{"class":261,"line":262},[259,2861,2862],{"class":265},"-- 不好的查询\n",[259,2864,2865,2868,2871,2874,2877,2880,2883,2886,2888,2890,2893,2895],{"class":261,"line":269},[259,2866,2867],{"class":376},"SELECT",[259,2869,2870],{"class":357}," *",[259,2872,2873],{"class":376}," FROM",[259,2875,2876],{"class":621}," sys_user ",[259,2878,2879],{"class":376},"WHERE",[259,2881,2882],{"class":617}," DATE",[259,2884,2885],{"class":621},"(create_time) ",[259,2887,625],{"class":357},[259,2889,358],{"class":357},[259,2891,2892],{"class":276},"2023-01-01",[259,2894,364],{"class":357},[259,2896,2089],{"class":621},[259,2898,2899],{"class":261,"line":283},[259,2900,316],{"emptyLinePlaceholder":315},[259,2902,2903],{"class":261,"line":293},[259,2904,2905],{"class":265},"-- 优化后的查询\n",[259,2907,2908,2910,2913,2916,2918,2920,2923,2926,2928,2931,2933,2936,2938,2941,2943],{"class":261,"line":303},[259,2909,2867],{"class":376},[259,2911,2912],{"class":621}," id, username, email ",[259,2914,2915],{"class":376},"FROM",[259,2917,2876],{"class":621},[259,2919,2879],{"class":376},[259,2921,2922],{"class":621}," create_time ",[259,2924,2925],{"class":376},"BETWEEN",[259,2927,358],{"class":357},[259,2929,2930],{"class":276},"2023-01-01 00:00:00",[259,2932,364],{"class":357},[259,2934,2935],{"class":376}," AND",[259,2937,358],{"class":357},[259,2939,2940],{"class":276},"2023-01-01 23:59:59",[259,2942,364],{"class":357},[259,2944,2089],{"class":621},[122,2946,2948],{"id":2947},"_44-分库分表","4.4 分库分表",[113,2950,2951],{},"当数据量达到一定规模时，建议考虑分库分表：",[2722,2953,2954,2960,2966],{},[557,2955,2956,2959],{},[244,2957,2958],{},"水平分表","：将同一张表的数据按照一定规则分散到多个表中",[557,2961,2962,2965],{},[244,2963,2964],{},"垂直分表","：将一张表的字段按照访问频率和大小分散到多个表中",[557,2967,2968,2971],{},[244,2969,2970],{},"分库","：将不同业务的数据分散到不同的数据库中",[113,2973,2974,247],{},[244,2975,2976],{},"分表策略",[2722,2978,2979,2982,2985],{},[557,2980,2981],{},"按时间分表（如按月份）",[557,2983,2984],{},"按 ID 分表（如哈希分表）",[557,2986,2987],{},"按业务字段分表（如按用户 ID）",[117,2989,2991],{"id":2990},"_5-redis-优化","5. Redis 优化",[122,2993,2995],{"id":2994},"_51-配置优化","5.1 配置优化",[113,2997,2998,247],{},[244,2999,1331],{},[249,3001,3003],{"className":2485,"code":3002,"language":2487,"meta":254,"style":254},"# /etc/redis.conf\n\n# 基础配置\nbind 0.0.0.0\nprotected-mode yes\nport 6379\ndaemonize yes\npidfile /var/run/redis_6379.pid\nlogfile /var/log/redis/redis.log\n\n# 内存配置\nmaxmemory 6G  # 建议为服务器内存的 50%-70%\nmaxmemory-policy allkeys-lru  # 内存不足时的淘汰策略\n\n# 持久化配置\nsave 900 1\nsave 300 10\nsave 60 10000\ndbfilename dump.rdb\ndir /var/lib/redis\nappendonly yes\nappendfilename \"appendonly.aof\"\nappendfsync everysec  # 生产环境建议设置为 everysec\n\n# 连接配置\ntimeout 300\nmaxclients 10000\n\n# 其他配置\ntcp-keepalive 300\n",[256,3004,3005,3010,3014,3018,3023,3028,3033,3038,3043,3048,3052,3056,3061,3066,3070,3075,3080,3085,3090,3095,3100,3105,3110,3115,3119,3123,3128,3133,3137,3141],{"__ignoreMap":254},[259,3006,3007],{"class":261,"line":262},[259,3008,3009],{},"# /etc/redis.conf\n",[259,3011,3012],{"class":261,"line":269},[259,3013,316],{"emptyLinePlaceholder":315},[259,3015,3016],{"class":261,"line":283},[259,3017,2508],{},[259,3019,3020],{"class":261,"line":293},[259,3021,3022],{},"bind 0.0.0.0\n",[259,3024,3025],{"class":261,"line":303},[259,3026,3027],{},"protected-mode yes\n",[259,3029,3030],{"class":261,"line":312},[259,3031,3032],{},"port 6379\n",[259,3034,3035],{"class":261,"line":319},[259,3036,3037],{},"daemonize yes\n",[259,3039,3040],{"class":261,"line":325},[259,3041,3042],{},"pidfile /var/run/redis_6379.pid\n",[259,3044,3045],{"class":261,"line":337},[259,3046,3047],{},"logfile /var/log/redis/redis.log\n",[259,3049,3050],{"class":261,"line":342},[259,3051,316],{"emptyLinePlaceholder":315},[259,3053,3054],{"class":261,"line":348},[259,3055,2561],{},[259,3057,3058],{"class":261,"line":370},[259,3059,3060],{},"maxmemory 6G  # 建议为服务器内存的 50%-70%\n",[259,3062,3063],{"class":261,"line":380},[259,3064,3065],{},"maxmemory-policy allkeys-lru  # 内存不足时的淘汰策略\n",[259,3067,3068],{"class":261,"line":385},[259,3069,316],{"emptyLinePlaceholder":315},[259,3071,3072],{"class":261,"line":391},[259,3073,3074],{},"# 持久化配置\n",[259,3076,3077],{"class":261,"line":409},[259,3078,3079],{},"save 900 1\n",[259,3081,3082],{"class":261,"line":415},[259,3083,3084],{},"save 300 10\n",[259,3086,3087],{"class":261,"line":421},[259,3088,3089],{},"save 60 10000\n",[259,3091,3092],{"class":261,"line":427},[259,3093,3094],{},"dbfilename dump.rdb\n",[259,3096,3097],{"class":261,"line":432},[259,3098,3099],{},"dir /var/lib/redis\n",[259,3101,3102],{"class":261,"line":438},[259,3103,3104],{},"appendonly yes\n",[259,3106,3107],{"class":261,"line":452},[259,3108,3109],{},"appendfilename \"appendonly.aof\"\n",[259,3111,3112],{"class":261,"line":458},[259,3113,3114],{},"appendfsync everysec  # 生产环境建议设置为 everysec\n",[259,3116,3117],{"class":261,"line":464},[259,3118,316],{"emptyLinePlaceholder":315},[259,3120,3121],{"class":261,"line":470},[259,3122,2595],{},[259,3124,3125],{"class":261,"line":476},[259,3126,3127],{},"timeout 300\n",[259,3129,3130],{"class":261,"line":482},[259,3131,3132],{},"maxclients 10000\n",[259,3134,3135],{"class":261,"line":488},[259,3136,316],{"emptyLinePlaceholder":315},[259,3138,3139],{"class":261,"line":494},[259,3140,2701],{},[259,3142,3143],{"class":261,"line":499},[259,3144,3145],{},"tcp-keepalive 300\n",[122,3147,3149],{"id":3148},"_52-缓存优化","5.2 缓存优化",[113,3151,3152,247],{},[244,3153,2828],{},[2722,3155,3156,3159,3162,3165,3168],{},[557,3157,3158],{},"设置合理的缓存过期时间",[557,3160,3161],{},"避免缓存雪崩、缓存击穿和缓存穿透",[557,3163,3164],{},"使用缓存预热",[557,3166,3167],{},"定期清理过期缓存",[557,3169,3170],{},"合理使用 Redis 数据结构",[113,3172,3173,247],{},[244,3174,3175],{},"缓存雪崩解决方案",[2722,3177,3178,3181,3184],{},[557,3179,3180],{},"设置随机过期时间",[557,3182,3183],{},"使用 Redis 集群",[557,3185,3186],{},"实现缓存降级",[113,3188,3189,247],{},[244,3190,3191],{},"缓存穿透解决方案",[2722,3193,3194,3197,3200],{},[557,3195,3196],{},"使用布隆过滤器",[557,3198,3199],{},"缓存空值",[557,3201,3202],{},"限流和熔断",[117,3204,3206],{"id":3205},"_6-安全配置","6. 安全配置",[122,3208,3210],{"id":3209},"_61-网络安全","6.1 网络安全",[2722,3212,3213,3216,3219,3222,3225],{},[557,3214,3215],{},"使用防火墙限制访问端口",[557,3217,3218],{},"配置 VPN 或专线连接",[557,3220,3221],{},"使用 SSL/TLS 加密传输",[557,3223,3224],{},"定期进行安全扫描",[557,3226,3227],{},"配置入侵检测系统（IDS）",[122,3229,3231],{"id":3230},"_62-服务器安全","6.2 服务器安全",[2722,3233,3234,3237,3240,3243,3246,3249],{},[557,3235,3236],{},"定期更新系统和软件包",[557,3238,3239],{},"使用强密码和密钥认证",[557,3241,3242],{},"禁用 root 远程登录",[557,3244,3245],{},"配置 sudo 权限",[557,3247,3248],{},"启用日志审计",[557,3250,3251],{},"定期备份服务器配置",[122,3253,3255],{"id":3254},"_63-应用安全","6.3 应用安全",[2722,3257,3258,3261,3264,3267,3270,3273,3276],{},[557,3259,3260],{},"实现细粒度的权限控制",[557,3262,3263],{},"对敏感数据进行加密存储",[557,3265,3266],{},"防止 SQL 注入",[557,3268,3269],{},"防止 XSS 攻击",[557,3271,3272],{},"防止 CSRF 攻击",[557,3274,3275],{},"实现 API 限流和熔断",[557,3277,3278],{},"定期进行代码审计",[122,3280,3282],{"id":3281},"_64-数据安全","6.4 数据安全",[2722,3284,3285,3288,3291,3294,3297,3300],{},[557,3286,3287],{},"定期备份数据库",[557,3289,3290],{},"实现数据加密",[557,3292,3293],{},"配置访问控制列表（ACL）",[557,3295,3296],{},"数据脱敏处理",[557,3298,3299],{},"实现数据恢复机制",[557,3301,3302],{},"定期进行数据完整性检查",[117,3304,3306],{"id":3305},"_7-监控与日志","7. 监控与日志",[122,3308,3310],{"id":3309},"_71-监控系统","7.1 监控系统",[113,3312,3313],{},"推荐使用 Prometheus + Grafana 搭建监控系统：",[2722,3315,3316,3322,3328,3334,3340,3346],{},[557,3317,3318,3321],{},[244,3319,3320],{},"Prometheus","：收集监控数据",[557,3323,3324,3327],{},[244,3325,3326],{},"Grafana","：可视化监控数据",[557,3329,3330,3333],{},[244,3331,3332],{},"Node Exporter","：监控服务器指标",[557,3335,3336,3339],{},[244,3337,3338],{},"JMX Exporter","：监控 Java 应用",[557,3341,3342,3345],{},[244,3343,3344],{},"MySQL Exporter","：监控 MySQL 数据库",[557,3347,3348,3351],{},[244,3349,3350],{},"Redis Exporter","：监控 Redis",[122,3353,3355],{"id":3354},"_72-日志管理","7.2 日志管理",[2722,3357,3358,3364,3370],{},[557,3359,3360,3363],{},[244,3361,3362],{},"ELK Stack","：Elasticsearch + Logstash + Kibana",[557,3365,3366,3369],{},[244,3367,3368],{},"Loki","：轻量级日志聚合系统",[557,3371,3372,3375],{},[244,3373,3374],{},"Filebeat","：日志采集器",[113,3377,3378,247],{},[244,3379,3380],{},"日志配置建议",[2722,3382,3383,3386,3389,3392,3395],{},[557,3384,3385],{},"统一日志格式",[557,3387,3388],{},"包含必要的上下文信息",[557,3390,3391],{},"实现日志分级",[557,3393,3394],{},"定期清理过期日志",[557,3396,3397],{},"配置日志告警",[117,3399,3401],{"id":3400},"_8-备份与恢复","8. 备份与恢复",[122,3403,3405],{"id":3404},"_81-数据库备份","8.1 数据库备份",[113,3407,3408,247],{},[244,3409,3410],{},"全量备份",[249,3412,3414],{"className":251,"code":3413,"language":253,"meta":254,"style":254},"# 使用 mysqldump 进行全量备份\nmysqldump -u root -p --all-databases --single-transaction --routines --triggers --events > /backup/mysql/full_backup_$(date +%Y%m%d_%H%M%S).sql\n\n# 使用 xtrabackup 进行全量备份\nxtrabackup --backup --target-dir=/backup/mysql/full_backup_$(date +%Y%m%d_%H%M%S)\n",[256,3415,3416,3421,3469,3473,3478],{"__ignoreMap":254},[259,3417,3418],{"class":261,"line":262},[259,3419,3420],{"class":265},"# 使用 mysqldump 进行全量备份\n",[259,3422,3423,3426,3429,3432,3434,3437,3440,3443,3446,3449,3451,3454,3457,3460,3463,3466],{"class":261,"line":269},[259,3424,3425],{"class":272},"mysqldump",[259,3427,3428],{"class":276}," -u",[259,3430,3431],{"class":276}," root",[259,3433,733],{"class":276},[259,3435,3436],{"class":276}," --all-databases",[259,3438,3439],{"class":276}," --single-transaction",[259,3441,3442],{"class":276}," --routines",[259,3444,3445],{"class":276}," --triggers",[259,3447,3448],{"class":276}," --events",[259,3450,778],{"class":357},[259,3452,3453],{"class":276}," /backup/mysql/full_backup_",[259,3455,3456],{"class":357},"$(",[259,3458,3459],{"class":272},"date",[259,3461,3462],{"class":276}," +%Y%m%d_%H%M%S",[259,3464,3465],{"class":357},")",[259,3467,3468],{"class":276},".sql\n",[259,3470,3471],{"class":261,"line":283},[259,3472,316],{"emptyLinePlaceholder":315},[259,3474,3475],{"class":261,"line":293},[259,3476,3477],{"class":265},"# 使用 xtrabackup 进行全量备份\n",[259,3479,3480,3483,3486,3489,3491,3493,3495],{"class":261,"line":303},[259,3481,3482],{"class":272},"xtrabackup",[259,3484,3485],{"class":276}," --backup",[259,3487,3488],{"class":276}," --target-dir=/backup/mysql/full_backup_",[259,3490,3456],{"class":357},[259,3492,3459],{"class":272},[259,3494,3462],{"class":276},[259,3496,3497],{"class":357},")\n",[113,3499,3500,247],{},[244,3501,3502],{},"增量备份",[249,3504,3506],{"className":251,"code":3505,"language":253,"meta":254,"style":254},"# 使用 xtrabackup 进行增量备份\nxtrabackup --backup --target-dir=/backup/mysql/incremental_$(date +%Y%m%d_%H%M%S) --incremental-basedir=/backup/mysql/full_backup_20230101_000000\n",[256,3507,3508,3513],{"__ignoreMap":254},[259,3509,3510],{"class":261,"line":262},[259,3511,3512],{"class":265},"# 使用 xtrabackup 进行增量备份\n",[259,3514,3515,3517,3519,3522,3524,3526,3528,3530],{"class":261,"line":269},[259,3516,3482],{"class":272},[259,3518,3485],{"class":276},[259,3520,3521],{"class":276}," --target-dir=/backup/mysql/incremental_",[259,3523,3456],{"class":357},[259,3525,3459],{"class":272},[259,3527,3462],{"class":276},[259,3529,3465],{"class":357},[259,3531,3532],{"class":276}," --incremental-basedir=/backup/mysql/full_backup_20230101_000000\n",[113,3534,3535,247],{},[244,3536,3537],{},"定时备份脚本",[249,3539,3541],{"className":251,"code":3540,"language":253,"meta":254,"style":254},"cat > /usr/local/bin/mysql_backup.sh \u003C\u003C EOF\n#!/bin/bash\n\nBACKUP_DIR=\"/backup/mysql\"\nDATE=$(date +%Y%m%d_%H%M%S)\nFULL_BACKUP_DIR=\"$BACKUP_DIR/full_$DATE\"\n\n# 创建备份目录\nmkdir -p $FULL_BACKUP_DIR\n\n# 执行全量备份\nmysqldump -u root -p\"password\" --all-databases --single-transaction --routines --triggers --events > $FULL_BACKUP_DIR/full_backup.sql\n\n# 压缩备份文件\ntar -czf $BACKUP_DIR/full_backup_$DATE.tar.gz -C $BACKUP_DIR full_$DATE\n\n# 删除临时目录\nrm -rf $FULL_BACKUP_DIR\n\n# 删除 7 天前的备份\nfind $BACKUP_DIR -name \"full_backup_*.tar.gz\" -mtime +7 -delete\nEOF\n\n# 添加到定时任务\nchmod +x /usr/local/bin/mysql_backup.sh\necho \"0 2 * * * /usr/local/bin/mysql_backup.sh\" >> /var/spool/cron/root\n",[256,3542,3543,3556,3560,3564,3569,3582,3598,3602,3607,3615,3619,3624,3635,3639,3644,3667,3671,3676,3683,3687,3692,3702,3706,3710,3715,3724],{"__ignoreMap":254},[259,3544,3545,3547,3549,3552,3554],{"class":261,"line":262},[259,3546,394],{"class":272},[259,3548,778],{"class":357},[259,3550,3551],{"class":276}," /usr/local/bin/mysql_backup.sh",[259,3553,403],{"class":357},[259,3555,406],{"class":357},[259,3557,3558],{"class":261,"line":269},[259,3559,790],{"class":276},[259,3561,3562],{"class":261,"line":283},[259,3563,316],{"emptyLinePlaceholder":315},[259,3565,3566],{"class":261,"line":293},[259,3567,3568],{"class":276},"BACKUP_DIR=\"/backup/mysql\"\n",[259,3570,3571,3574,3576,3578,3580],{"class":261,"line":303},[259,3572,3573],{"class":276},"DATE=",[259,3575,3456],{"class":357},[259,3577,3459],{"class":272},[259,3579,3462],{"class":276},[259,3581,3497],{"class":357},[259,3583,3584,3587,3590,3593,3596],{"class":261,"line":312},[259,3585,3586],{"class":276},"FULL_BACKUP_DIR=\"",[259,3588,3589],{"class":621},"$BACKUP_DIR",[259,3591,3592],{"class":276},"/full_",[259,3594,3595],{"class":621},"$DATE",[259,3597,634],{"class":276},[259,3599,3600],{"class":261,"line":319},[259,3601,316],{"emptyLinePlaceholder":315},[259,3603,3604],{"class":261,"line":325},[259,3605,3606],{"class":276},"# 创建备份目录\n",[259,3608,3609,3612],{"class":261,"line":337},[259,3610,3611],{"class":276},"mkdir -p ",[259,3613,3614],{"class":621},"$FULL_BACKUP_DIR\n",[259,3616,3617],{"class":261,"line":342},[259,3618,316],{"emptyLinePlaceholder":315},[259,3620,3621],{"class":261,"line":348},[259,3622,3623],{"class":276},"# 执行全量备份\n",[259,3625,3626,3629,3632],{"class":261,"line":370},[259,3627,3628],{"class":276},"mysqldump -u root -p\"password\" --all-databases --single-transaction --routines --triggers --events > ",[259,3630,3631],{"class":621},"$FULL_BACKUP_DIR",[259,3633,3634],{"class":276},"/full_backup.sql\n",[259,3636,3637],{"class":261,"line":380},[259,3638,316],{"emptyLinePlaceholder":315},[259,3640,3641],{"class":261,"line":385},[259,3642,3643],{"class":276},"# 压缩备份文件\n",[259,3645,3646,3649,3651,3654,3656,3659,3661,3664],{"class":261,"line":391},[259,3647,3648],{"class":276},"tar -czf ",[259,3650,3589],{"class":621},[259,3652,3653],{"class":276},"/full_backup_",[259,3655,3595],{"class":621},[259,3657,3658],{"class":276},".tar.gz -C ",[259,3660,3589],{"class":621},[259,3662,3663],{"class":276}," full_",[259,3665,3666],{"class":621},"$DATE\n",[259,3668,3669],{"class":261,"line":409},[259,3670,316],{"emptyLinePlaceholder":315},[259,3672,3673],{"class":261,"line":415},[259,3674,3675],{"class":276},"# 删除临时目录\n",[259,3677,3678,3681],{"class":261,"line":421},[259,3679,3680],{"class":276},"rm -rf ",[259,3682,3614],{"class":621},[259,3684,3685],{"class":261,"line":427},[259,3686,316],{"emptyLinePlaceholder":315},[259,3688,3689],{"class":261,"line":432},[259,3690,3691],{"class":276},"# 删除 7 天前的备份\n",[259,3693,3694,3697,3699],{"class":261,"line":438},[259,3695,3696],{"class":276},"find ",[259,3698,3589],{"class":621},[259,3700,3701],{"class":276}," -name \"full_backup_*.tar.gz\" -mtime +7 -delete\n",[259,3703,3704],{"class":261,"line":452},[259,3705,424],{"class":357},[259,3707,3708],{"class":261,"line":458},[259,3709,316],{"emptyLinePlaceholder":315},[259,3711,3712],{"class":261,"line":464},[259,3713,3714],{"class":265},"# 添加到定时任务\n",[259,3716,3717,3719,3721],{"class":261,"line":470},[259,3718,808],{"class":272},[259,3720,811],{"class":276},[259,3722,3723],{"class":276}," /usr/local/bin/mysql_backup.sh\n",[259,3725,3726,3728,3730,3733,3735,3737],{"class":261,"line":476},[259,3727,2319],{"class":599},[259,3729,1041],{"class":357},[259,3731,3732],{"class":276},"0 2 * * * /usr/local/bin/mysql_backup.sh",[259,3734,628],{"class":357},[259,3736,397],{"class":357},[259,3738,2331],{"class":276},[122,3740,3742],{"id":3741},"_82-应用备份","8.2 应用备份",[113,3744,3745,247],{},[244,3746,715],{},[249,3748,3750],{"className":251,"code":3749,"language":253,"meta":254,"style":254},"# 备份应用配置和数据\nBACKUP_DIR=\"/backup/app\"\nDATE=$(date +%Y%m%d_%H%M%S)\nmkdir -p $BACKUP_DIR/$DATE\n\n# 备份配置文件\ncp -r /opt/tagtag/backend/config $BACKUP_DIR/$DATE/\n\n# 备份日志（可选）\ncp -r /opt/tagtag/backend/logs $BACKUP_DIR/$DATE/\n\n# 备份静态资源\ncp -r /usr/share/nginx/html/tagtag $BACKUP_DIR/$DATE/\n\n# 压缩备份文件\ntar -czf $BACKUP_DIR/app_backup_$DATE.tar.gz -C $BACKUP_DIR $DATE\n\n# 删除临时目录\nrm -rf $BACKUP_DIR/$DATE\n\n# 删除 7 天前的备份\nfind $BACKUP_DIR -name \"app_backup_*.tar.gz\" -mtime +7 -delete\n",[256,3751,3752,3757,3771,3785,3799,3803,3808,3826,3830,3835,3852,3856,3861,3878,3882,3886,3910,3914,3918,3932,3936,3940],{"__ignoreMap":254},[259,3753,3754],{"class":261,"line":262},[259,3755,3756],{"class":265},"# 备份应用配置和数据\n",[259,3758,3759,3762,3764,3766,3769],{"class":261,"line":269},[259,3760,3761],{"class":621},"BACKUP_DIR",[259,3763,625],{"class":357},[259,3765,628],{"class":357},[259,3767,3768],{"class":276},"/backup/app",[259,3770,634],{"class":357},[259,3772,3773,3776,3779,3781,3783],{"class":261,"line":283},[259,3774,3775],{"class":621},"DATE",[259,3777,3778],{"class":357},"=$(",[259,3780,3459],{"class":272},[259,3782,3462],{"class":276},[259,3784,3497],{"class":357},[259,3786,3787,3789,3791,3794,3797],{"class":261,"line":293},[259,3788,730],{"class":272},[259,3790,733],{"class":276},[259,3792,3793],{"class":621}," $BACKUP_DIR",[259,3795,3796],{"class":276},"/",[259,3798,3666],{"class":621},[259,3800,3801],{"class":261,"line":303},[259,3802,316],{"emptyLinePlaceholder":315},[259,3804,3805],{"class":261,"line":312},[259,3806,3807],{"class":265},"# 备份配置文件\n",[259,3809,3810,3812,3814,3817,3819,3821,3823],{"class":261,"line":319},[259,3811,1966],{"class":272},[259,3813,1969],{"class":276},[259,3815,3816],{"class":276}," /opt/tagtag/backend/config",[259,3818,3793],{"class":621},[259,3820,3796],{"class":276},[259,3822,3595],{"class":621},[259,3824,3825],{"class":276},"/\n",[259,3827,3828],{"class":261,"line":325},[259,3829,316],{"emptyLinePlaceholder":315},[259,3831,3832],{"class":261,"line":337},[259,3833,3834],{"class":265},"# 备份日志（可选）\n",[259,3836,3837,3839,3841,3844,3846,3848,3850],{"class":261,"line":342},[259,3838,1966],{"class":272},[259,3840,1969],{"class":276},[259,3842,3843],{"class":276}," /opt/tagtag/backend/logs",[259,3845,3793],{"class":621},[259,3847,3796],{"class":276},[259,3849,3595],{"class":621},[259,3851,3825],{"class":276},[259,3853,3854],{"class":261,"line":348},[259,3855,316],{"emptyLinePlaceholder":315},[259,3857,3858],{"class":261,"line":370},[259,3859,3860],{"class":265},"# 备份静态资源\n",[259,3862,3863,3865,3867,3870,3872,3874,3876],{"class":261,"line":380},[259,3864,1966],{"class":272},[259,3866,1969],{"class":276},[259,3868,3869],{"class":276}," /usr/share/nginx/html/tagtag",[259,3871,3793],{"class":621},[259,3873,3796],{"class":276},[259,3875,3595],{"class":621},[259,3877,3825],{"class":276},[259,3879,3880],{"class":261,"line":385},[259,3881,316],{"emptyLinePlaceholder":315},[259,3883,3884],{"class":261,"line":391},[259,3885,3643],{"class":265},[259,3887,3888,3891,3894,3896,3899,3901,3904,3907],{"class":261,"line":409},[259,3889,3890],{"class":272},"tar",[259,3892,3893],{"class":276}," -czf",[259,3895,3793],{"class":621},[259,3897,3898],{"class":276},"/app_backup_",[259,3900,3595],{"class":621},[259,3902,3903],{"class":276},".tar.gz",[259,3905,3906],{"class":276}," -C",[259,3908,3909],{"class":621}," $BACKUP_DIR $DATE\n",[259,3911,3912],{"class":261,"line":415},[259,3913,316],{"emptyLinePlaceholder":315},[259,3915,3916],{"class":261,"line":421},[259,3917,3675],{"class":265},[259,3919,3920,3923,3926,3928,3930],{"class":261,"line":427},[259,3921,3922],{"class":272},"rm",[259,3924,3925],{"class":276}," -rf",[259,3927,3793],{"class":621},[259,3929,3796],{"class":276},[259,3931,3666],{"class":621},[259,3933,3934],{"class":261,"line":432},[259,3935,316],{"emptyLinePlaceholder":315},[259,3937,3938],{"class":261,"line":438},[259,3939,3691],{"class":265},[259,3941,3942,3945,3948,3951,3953,3956,3958,3961,3964],{"class":261,"line":452},[259,3943,3944],{"class":272},"find",[259,3946,3947],{"class":621}," $BACKUP_DIR ",[259,3949,3950],{"class":276},"-name",[259,3952,1041],{"class":357},[259,3954,3955],{"class":276},"app_backup_*.tar.gz",[259,3957,628],{"class":357},[259,3959,3960],{"class":276}," -mtime",[259,3962,3963],{"class":276}," +7",[259,3965,3966],{"class":276}," -delete\n",[117,3968,3970],{"id":3969},"_9-性能测试","9. 性能测试",[122,3972,3974],{"id":3973},"_91-负载测试工具","9.1 负载测试工具",[2722,3976,3977,3983,3989,3995],{},[557,3978,3979,3982],{},[244,3980,3981],{},"JMeter","：功能强大的负载测试工具",[557,3984,3985,3988],{},[244,3986,3987],{},"Gatling","：基于 Scala 的高性能负载测试工具",[557,3990,3991,3994],{},[244,3992,3993],{},"k6","：现代化的负载测试工具",[557,3996,3997,4000],{},[244,3998,3999],{},"Apache Benchmark (ab)","：简单易用的 HTTP 负载测试工具",[122,4002,4004],{"id":4003},"_92-测试场景","9.2 测试场景",[2722,4006,4007,4013,4019,4025],{},[557,4008,4009,4012],{},[244,4010,4011],{},"并发测试","：测试系统在不同并发数下的性能",[557,4014,4015,4018],{},[244,4016,4017],{},"压力测试","：测试系统的极限性能",[557,4020,4021,4024],{},[244,4022,4023],{},"稳定性测试","：长时间运行测试，检查系统稳定性",[557,4026,4027,4030],{},[244,4028,4029],{},"容量测试","：测试系统的最大容量",[113,4032,4033,247],{},[244,4034,4035],{},"JMeter 测试示例",[554,4037,4038,4041,4044,4047,4050,4053],{},[557,4039,4040],{},"创建测试计划",[557,4042,4043],{},"添加线程组",[557,4045,4046],{},"添加 HTTP 请求",[557,4048,4049],{},"添加监听器（如聚合报告、图表结果）",[557,4051,4052],{},"运行测试",[557,4054,4055],{},"分析结果",[117,4057,4059],{"id":4058},"_10-常见问题与解决方案","10. 常见问题与解决方案",[122,4061,4063],{"id":4062},"_101-应用启动失败","10.1 应用启动失败",[113,4065,4066,4069],{},[244,4067,4068],{},"问题","：应用启动后立即退出",[113,4071,4072,247],{},[244,4073,4074],{},"解决方案",[249,4076,4078],{"className":251,"code":4077,"language":253,"meta":254,"style":254},"# 查看日志\ncat /opt/tagtag/backend/logs/application.log\n\n# 检查端口占用\nnetstat -tlnp | grep 8080\n\n# 检查数据库连接\ntelnet mysql-server 3306\n\n# 检查 Redis 连接\ntelnet redis-server 6379\n",[256,4079,4080,4085,4092,4096,4101,4117,4121,4126,4137,4141,4146],{"__ignoreMap":254},[259,4081,4082],{"class":261,"line":262},[259,4083,4084],{"class":265},"# 查看日志\n",[259,4086,4087,4089],{"class":261,"line":269},[259,4088,394],{"class":272},[259,4090,4091],{"class":276}," /opt/tagtag/backend/logs/application.log\n",[259,4093,4094],{"class":261,"line":283},[259,4095,316],{"emptyLinePlaceholder":315},[259,4097,4098],{"class":261,"line":293},[259,4099,4100],{"class":265},"# 检查端口占用\n",[259,4102,4103,4106,4109,4112,4115],{"class":261,"line":303},[259,4104,4105],{"class":272},"netstat",[259,4107,4108],{"class":276}," -tlnp",[259,4110,4111],{"class":357}," |",[259,4113,4114],{"class":272}," grep",[259,4116,1358],{"class":376},[259,4118,4119],{"class":261,"line":312},[259,4120,316],{"emptyLinePlaceholder":315},[259,4122,4123],{"class":261,"line":319},[259,4124,4125],{"class":265},"# 检查数据库连接\n",[259,4127,4128,4131,4134],{"class":261,"line":325},[259,4129,4130],{"class":272},"telnet",[259,4132,4133],{"class":276}," mysql-server",[259,4135,4136],{"class":376}," 3306\n",[259,4138,4139],{"class":261,"line":337},[259,4140,316],{"emptyLinePlaceholder":315},[259,4142,4143],{"class":261,"line":342},[259,4144,4145],{"class":265},"# 检查 Redis 连接\n",[259,4147,4148,4150,4153],{"class":261,"line":348},[259,4149,4130],{"class":272},[259,4151,4152],{"class":276}," redis-server",[259,4154,1562],{"class":376},[122,4156,4158],{"id":4157},"_102-数据库连接失败","10.2 数据库连接失败",[113,4160,4161,4163],{},[244,4162,4068],{},"：应用无法连接到数据库",[113,4165,4166,247],{},[244,4167,4074],{},[249,4169,4171],{"className":251,"code":4170,"language":253,"meta":254,"style":254},"# 检查数据库服务状态\nsystemctl status mysqld\n\n# 检查数据库用户权限\nmysql -u root -p -e \"SHOW GRANTS FOR 'tagtag'@'%';\"\n\n# 检查防火墙设置\nfirewall-cmd --list-ports\n\n# 检查 SELinux 设置\ngetenforce\n",[256,4172,4173,4178,4188,4192,4197,4218,4222,4227,4235,4239,4244],{"__ignoreMap":254},[259,4174,4175],{"class":261,"line":262},[259,4176,4177],{"class":265},"# 检查数据库服务状态\n",[259,4179,4180,4182,4185],{"class":261,"line":269},[259,4181,273],{"class":272},[259,4183,4184],{"class":276}," status",[259,4186,4187],{"class":276}," mysqld\n",[259,4189,4190],{"class":261,"line":283},[259,4191,316],{"emptyLinePlaceholder":315},[259,4193,4194],{"class":261,"line":293},[259,4195,4196],{"class":265},"# 检查数据库用户权限\n",[259,4198,4199,4202,4204,4206,4208,4211,4213,4216],{"class":261,"line":303},[259,4200,4201],{"class":272},"mysql",[259,4203,3428],{"class":276},[259,4205,3431],{"class":276},[259,4207,733],{"class":276},[259,4209,4210],{"class":276}," -e",[259,4212,1041],{"class":357},[259,4214,4215],{"class":276},"SHOW GRANTS FOR 'tagtag'@'%';",[259,4217,634],{"class":357},[259,4219,4220],{"class":261,"line":312},[259,4221,316],{"emptyLinePlaceholder":315},[259,4223,4224],{"class":261,"line":319},[259,4225,4226],{"class":265},"# 检查防火墙设置\n",[259,4228,4229,4232],{"class":261,"line":325},[259,4230,4231],{"class":272},"firewall-cmd",[259,4233,4234],{"class":276}," --list-ports\n",[259,4236,4237],{"class":261,"line":337},[259,4238,316],{"emptyLinePlaceholder":315},[259,4240,4241],{"class":261,"line":342},[259,4242,4243],{"class":265},"# 检查 SELinux 设置\n",[259,4245,4246],{"class":261,"line":348},[259,4247,4248],{"class":272},"getenforce\n",[122,4250,4252],{"id":4251},"_103-前端页面无法访问","10.3 前端页面无法访问",[113,4254,4255,4257],{},[244,4256,4068],{},"：访问前端页面显示 404 或空白页",[113,4259,4260,247],{},[244,4261,4074],{},[249,4263,4265],{"className":251,"code":4264,"language":253,"meta":254,"style":254},"# 检查 Nginx 配置\nnginx -t\n\n# 检查 Nginx 日志\ncat /var/log/nginx/tagtag.error.log\n\n# 检查静态文件权限\nls -la /usr/share/nginx/html/tagtag/\n\n# 检查前端路由配置\n# 确保 Nginx 配置了 try_files $uri $uri/ /index.html;\n",[256,4266,4267,4271,4277,4281,4286,4293,4297,4302,4312,4316,4321],{"__ignoreMap":254},[259,4268,4269],{"class":261,"line":262},[259,4270,2190],{"class":265},[259,4272,4273,4275],{"class":261,"line":269},[259,4274,2195],{"class":272},[259,4276,2198],{"class":276},[259,4278,4279],{"class":261,"line":283},[259,4280,316],{"emptyLinePlaceholder":315},[259,4282,4283],{"class":261,"line":293},[259,4284,4285],{"class":265},"# 检查 Nginx 日志\n",[259,4287,4288,4290],{"class":261,"line":303},[259,4289,394],{"class":272},[259,4291,4292],{"class":276}," /var/log/nginx/tagtag.error.log\n",[259,4294,4295],{"class":261,"line":312},[259,4296,316],{"emptyLinePlaceholder":315},[259,4298,4299],{"class":261,"line":319},[259,4300,4301],{"class":265},"# 检查静态文件权限\n",[259,4303,4304,4307,4310],{"class":261,"line":325},[259,4305,4306],{"class":272},"ls",[259,4308,4309],{"class":276}," -la",[259,4311,1978],{"class":276},[259,4313,4314],{"class":261,"line":337},[259,4315,316],{"emptyLinePlaceholder":315},[259,4317,4318],{"class":261,"line":342},[259,4319,4320],{"class":265},"# 检查前端路由配置\n",[259,4322,4323],{"class":261,"line":348},[259,4324,4325],{"class":265},"# 确保 Nginx 配置了 try_files $uri $uri/ /index.html;\n",[117,4327,4329],{"id":4328},"_11-总结","11. 总结",[113,4331,4332],{},"生产环境部署是一个复杂的过程，需要考虑服务器配置、应用部署、数据库优化、安全配置、监控日志和备份恢复等多个方面。本文档提供了 Tagtag Starter 项目在生产环境部署的详细指南，希望能帮助您顺利完成部署工作。",[113,4334,4335],{},"在实际部署过程中，建议根据您的业务需求和服务器资源情况，灵活调整配置参数，确保系统的高性能、高可用性和高安全性。",[4337,4338,4339],"style",{},"html pre.shiki code .sHwdD, html code.shiki .sHwdD{--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#546E7A;--shiki-default-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic}html pre.shiki code .sBMFI, html code.shiki .sBMFI{--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B}html pre.shiki code .sfazB, html code.shiki .sfazB{--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D}html pre.shiki code .sMK4o, html code.shiki .sMK4o{--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF}html pre.shiki code .sbssI, html code.shiki .sbssI{--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s2Zo4, html code.shiki .s2Zo4{--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF}html pre.shiki code .spNyl, html code.shiki .spNyl{--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA}html pre.shiki code .sTEyZ, html code.shiki .sTEyZ{--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8}html pre.shiki code .swJcz, html code.shiki .swJcz{--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178}",{"title":254,"searchDepth":262,"depth":269,"links":4341},[4342,4346,4351,4356,4362,4366,4372,4376,4380,4384,4389],{"id":119,"depth":269,"text":120,"children":4343},[4344,4345],{"id":124,"depth":283,"text":125},{"id":236,"depth":283,"text":237},{"id":542,"depth":269,"text":543,"children":4347},[4348,4349,4350],{"id":546,"depth":283,"text":547},{"id":686,"depth":283,"text":687},{"id":1317,"depth":283,"text":1318},{"id":1782,"depth":269,"text":1783,"children":4352},[4353,4354,4355],{"id":1786,"depth":283,"text":1787},{"id":1888,"depth":283,"text":1889},{"id":2227,"depth":283,"text":2228},{"id":2473,"depth":269,"text":2474,"children":4357},[4358,4359,4360,4361],{"id":2477,"depth":283,"text":2478},{"id":2714,"depth":283,"text":2715},{"id":2822,"depth":283,"text":2823},{"id":2947,"depth":283,"text":2948},{"id":2990,"depth":269,"text":2991,"children":4363},[4364,4365],{"id":2994,"depth":283,"text":2995},{"id":3148,"depth":283,"text":3149},{"id":3205,"depth":269,"text":3206,"children":4367},[4368,4369,4370,4371],{"id":3209,"depth":283,"text":3210},{"id":3230,"depth":283,"text":3231},{"id":3254,"depth":283,"text":3255},{"id":3281,"depth":283,"text":3282},{"id":3305,"depth":269,"text":3306,"children":4373},[4374,4375],{"id":3309,"depth":283,"text":3310},{"id":3354,"depth":283,"text":3355},{"id":3400,"depth":269,"text":3401,"children":4377},[4378,4379],{"id":3404,"depth":283,"text":3405},{"id":3741,"depth":283,"text":3742},{"id":3969,"depth":269,"text":3970,"children":4381},[4382,4383],{"id":3973,"depth":283,"text":3974},{"id":4003,"depth":283,"text":4004},{"id":4058,"depth":269,"text":4059,"children":4385},[4386,4387,4388],{"id":4062,"depth":283,"text":4063},{"id":4157,"depth":283,"text":4158},{"id":4251,"depth":283,"text":4252},{"id":4328,"depth":269,"text":4329},"Tagtag Starter 生产环境部署指南，包括服务器配置、数据库优化和安全配置。","md",null,{},{"title":87,"description":4390},"jL3M85ouC2-ppn79HbzXnrjjQmIwCAT46Ajr5V-TJ1E",[4397,4399],{"title":78,"path":79,"stem":80,"description":4398,"children":-1},"文件存储模块文档，详细说明存储实现、支持的存储模式和核心功能。",{"title":91,"path":92,"stem":93,"description":4400,"children":-1},"Tagtag Starter 容器化部署指南，包括 Docker 和 Kubernetes 部署方案。",1767077440407]