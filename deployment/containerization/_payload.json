[{"data":1,"prerenderedAt":7066},["ShallowReactive",2],{"navigation":3,"/deployment/containerization":107,"/deployment/containerization-surround":7061},[4,18,35,60,81,94,103],{"title":5,"path":6,"stem":7,"children":8,"page":17},"Getting Started","/getting-started","1.getting-started",[9,13],{"title":10,"path":11,"stem":12},"项目介绍","/getting-started/introduction","1.getting-started/1.introduction",{"title":14,"path":15,"stem":16},"快速上手","/getting-started/quick-start","1.getting-started/2.quick-start",false,{"title":19,"path":20,"stem":21,"children":22,"page":17},"Architecture","/architecture","2.architecture",[23,27,31],{"title":24,"path":25,"stem":26},"架构概览","/architecture/overview","2.architecture/1.overview",{"title":28,"path":29,"stem":30},"项目结构","/architecture/project-structure","2.architecture/2.project-structure",{"title":32,"path":33,"stem":34},"前端架构","/architecture/frontend-architecture","2.architecture/3.frontend-architecture",{"title":36,"path":37,"stem":38,"children":39,"page":17},"Developer Guide","/developer-guide","3.developer-guide",[40,44,48,52,56],{"title":41,"path":42,"stem":43},"实战教程：开发 CRUD 功能","/developer-guide/crud-tutorial","3.developer-guide/1.crud-tutorial",{"title":45,"path":46,"stem":47},"代码规范与最佳实践","/developer-guide/code-style","3.developer-guide/2.code-style",{"title":49,"path":50,"stem":51},"测试指南","/developer-guide/testing","3.developer-guide/3.testing",{"title":53,"path":54,"stem":55},"前端开发指南","/developer-guide/frontend-development","3.developer-guide/4.frontend-development",{"title":57,"path":58,"stem":59},"AI 辅助开发","/developer-guide/ai-development","3.developer-guide/5.ai-development",{"title":61,"path":62,"stem":63,"children":64,"page":17},"Modules","/modules","3.modules",[65,69,73,77],{"title":66,"path":67,"stem":68},"身份管理 (IAM)","/modules/iam","3.modules/1.iam",{"title":70,"path":71,"stem":72},"系统模块","/modules/system","3.modules/2.system",{"title":74,"path":75,"stem":76},"认证模块","/modules/auth","3.modules/3.auth",{"title":78,"path":79,"stem":80},"存储模块","/modules/storage","3.modules/4.storage",{"title":82,"path":83,"stem":84,"children":85,"page":17},"Deployment","/deployment","4.deployment",[86,90],{"title":87,"path":88,"stem":89},"生产环境部署","/deployment/production","4.deployment/1.production",{"title":91,"path":92,"stem":93},"容器化部署","/deployment/containerization","4.deployment/2.containerization",{"title":95,"path":96,"stem":97,"children":98,"page":17},"Maintenance","/maintenance","5.maintenance",[99],{"title":100,"path":101,"stem":102},"监控与维护","/maintenance/monitoring","5.maintenance/1.monitoring",{"title":104,"path":105,"stem":106},"更新日志","/releases","releases",{"id":108,"title":91,"body":109,"description":7055,"extension":7056,"links":7057,"meta":7058,"navigation":281,"path":92,"seo":7059,"stem":93,"__hash__":7060},"docs/4.deployment/2.containerization.md",{"type":110,"value":111,"toc":7028},"minimark",[112,116,121,126,167,171,239,243,247,252,475,479,644,648,763,767,1690,1694,1700,1873,1877,1881,1885,1890,2023,2028,2181,2185,2199,2203,2207,2264,2268,2412,2416,2507,2511,3053,3057,3523,3527,4169,4173,4577,4581,4818,4822,4826,4834,4838,5002,5006,5521,5525,5756,5760,5764,6674,6678,6682,6732,6736,6797,6801,6851,6855,6859,6863,6869,6874,6888,6892,6897,6901,6918,6922,6926,6931,6935,6952,6956,6961,6965,6981,6985,6990,6994,7011,7015,7018,7021,7024],[113,114,115],"p",{},"容器化是现代应用部署的趋势，Tagtag Starter 项目支持 Docker 和 Kubernetes 部署，本文档将详细介绍容器化部署的方案和最佳实践。",[117,118,120],"h2",{"id":119},"_1-容器化概述","1. 容器化概述",[122,123,125],"h3",{"id":124},"_11-为什么选择容器化","1.1 为什么选择容器化",[127,128,129,137,143,149,155,161],"ul",{},[130,131,132,136],"li",{},[133,134,135],"strong",{},"一致性","：容器确保应用在不同环境中运行一致",[130,138,139,142],{},[133,140,141],{},"轻量级","：容器比虚拟机更轻量，启动更快",[130,144,145,148],{},[133,146,147],{},"可移植性","：容器可以在任何支持 Docker 的环境中运行",[130,150,151,154],{},[133,152,153],{},"可扩展性","：容器易于横向扩展，支持自动化运维",[130,156,157,160],{},[133,158,159],{},"资源隔离","：容器提供了良好的资源隔离机制",[130,162,163,166],{},[133,164,165],{},"版本控制","：容器镜像支持版本控制，便于回滚和管理",[122,168,170],{"id":169},"_12-技术栈","1.2 技术栈",[172,173,174,187],"table",{},[175,176,177],"thead",{},[178,179,180,184],"tr",{},[181,182,183],"th",{},"技术",[181,185,186],{},"用途",[188,189,190,199,207,215,223,231],"tbody",{},[178,191,192,196],{},[193,194,195],"td",{},"Docker",[193,197,198],{},"容器运行时和镜像构建",[178,200,201,204],{},[193,202,203],{},"Docker Compose",[193,205,206],{},"本地开发和测试环境部署",[178,208,209,212],{},[193,210,211],{},"Kubernetes",[193,213,214],{},"生产环境容器编排",[178,216,217,220],{},[193,218,219],{},"Helm",[193,221,222],{},"Kubernetes 应用包管理",[178,224,225,228],{},[193,226,227],{},"GitHub Actions",[193,229,230],{},"CI/CD 自动化部署",[178,232,233,236],{},[193,234,235],{},"Harbor",[193,237,238],{},"私有 Docker 镜像仓库",[117,240,242],{"id":241},"_2-docker-部署","2. Docker 部署",[122,244,246],{"id":245},"_21-dockerfile-编写","2.1 Dockerfile 编写",[248,249,251],"h4",{"id":250},"_211-后端-dockerfile","2.1.1 后端 Dockerfile",[253,254,259],"pre",{"className":255,"code":256,"language":257,"meta":258,"style":258},"language-dockerfile shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","# 使用 Java 17 作为基础镜像\nFROM openjdk:17-jdk-slim as builder\n\n# 设置工作目录\nWORKDIR /app\n\n# 复制 Maven 配置文件\nCOPY pom.xml .\nCOPY .mvn .mvn\n\n# 下载依赖\nRUN ./mvnw dependency:go-offline\n\n# 复制源代码\nCOPY src src\n\n# 构建项目\nRUN ./mvnw package -DskipTests\n\n# 使用轻量级基础镜像\nFROM openjdk:17-jdk-slim\n\n# 设置工作目录\nWORKDIR /app\n\n# 从构建阶段复制 JAR 文件\nCOPY --from=builder /app/target/tagtag-backend.jar .\n\n# 设置环境变量\nENV JAVA_OPTS=\"-Xmx8g -Xms4g\"\nENV SPRING_PROFILES_ACTIVE=prod\n\n# 暴露端口\nEXPOSE 8080\n\n# 启动应用\nENTRYPOINT [\"sh\", \"-c\", \"java $JAVA_OPTS -jar tagtag-backend.jar\"]\n","dockerfile","",[260,261,262,270,276,283,289,295,300,306,312,318,323,329,335,340,346,352,357,363,369,374,380,386,391,396,401,406,412,418,423,429,435,441,446,452,458,463,469],"code",{"__ignoreMap":258},[263,264,267],"span",{"class":265,"line":266},"line",1,[263,268,269],{},"# 使用 Java 17 作为基础镜像\n",[263,271,273],{"class":265,"line":272},2,[263,274,275],{},"FROM openjdk:17-jdk-slim as builder\n",[263,277,279],{"class":265,"line":278},3,[263,280,282],{"emptyLinePlaceholder":281},true,"\n",[263,284,286],{"class":265,"line":285},4,[263,287,288],{},"# 设置工作目录\n",[263,290,292],{"class":265,"line":291},5,[263,293,294],{},"WORKDIR /app\n",[263,296,298],{"class":265,"line":297},6,[263,299,282],{"emptyLinePlaceholder":281},[263,301,303],{"class":265,"line":302},7,[263,304,305],{},"# 复制 Maven 配置文件\n",[263,307,309],{"class":265,"line":308},8,[263,310,311],{},"COPY pom.xml .\n",[263,313,315],{"class":265,"line":314},9,[263,316,317],{},"COPY .mvn .mvn\n",[263,319,321],{"class":265,"line":320},10,[263,322,282],{"emptyLinePlaceholder":281},[263,324,326],{"class":265,"line":325},11,[263,327,328],{},"# 下载依赖\n",[263,330,332],{"class":265,"line":331},12,[263,333,334],{},"RUN ./mvnw dependency:go-offline\n",[263,336,338],{"class":265,"line":337},13,[263,339,282],{"emptyLinePlaceholder":281},[263,341,343],{"class":265,"line":342},14,[263,344,345],{},"# 复制源代码\n",[263,347,349],{"class":265,"line":348},15,[263,350,351],{},"COPY src src\n",[263,353,355],{"class":265,"line":354},16,[263,356,282],{"emptyLinePlaceholder":281},[263,358,360],{"class":265,"line":359},17,[263,361,362],{},"# 构建项目\n",[263,364,366],{"class":265,"line":365},18,[263,367,368],{},"RUN ./mvnw package -DskipTests\n",[263,370,372],{"class":265,"line":371},19,[263,373,282],{"emptyLinePlaceholder":281},[263,375,377],{"class":265,"line":376},20,[263,378,379],{},"# 使用轻量级基础镜像\n",[263,381,383],{"class":265,"line":382},21,[263,384,385],{},"FROM openjdk:17-jdk-slim\n",[263,387,389],{"class":265,"line":388},22,[263,390,282],{"emptyLinePlaceholder":281},[263,392,394],{"class":265,"line":393},23,[263,395,288],{},[263,397,399],{"class":265,"line":398},24,[263,400,294],{},[263,402,404],{"class":265,"line":403},25,[263,405,282],{"emptyLinePlaceholder":281},[263,407,409],{"class":265,"line":408},26,[263,410,411],{},"# 从构建阶段复制 JAR 文件\n",[263,413,415],{"class":265,"line":414},27,[263,416,417],{},"COPY --from=builder /app/target/tagtag-backend.jar .\n",[263,419,421],{"class":265,"line":420},28,[263,422,282],{"emptyLinePlaceholder":281},[263,424,426],{"class":265,"line":425},29,[263,427,428],{},"# 设置环境变量\n",[263,430,432],{"class":265,"line":431},30,[263,433,434],{},"ENV JAVA_OPTS=\"-Xmx8g -Xms4g\"\n",[263,436,438],{"class":265,"line":437},31,[263,439,440],{},"ENV SPRING_PROFILES_ACTIVE=prod\n",[263,442,444],{"class":265,"line":443},32,[263,445,282],{"emptyLinePlaceholder":281},[263,447,449],{"class":265,"line":448},33,[263,450,451],{},"# 暴露端口\n",[263,453,455],{"class":265,"line":454},34,[263,456,457],{},"EXPOSE 8080\n",[263,459,461],{"class":265,"line":460},35,[263,462,282],{"emptyLinePlaceholder":281},[263,464,466],{"class":265,"line":465},36,[263,467,468],{},"# 启动应用\n",[263,470,472],{"class":265,"line":471},37,[263,473,474],{},"ENTRYPOINT [\"sh\", \"-c\", \"java $JAVA_OPTS -jar tagtag-backend.jar\"]\n",[248,476,478],{"id":477},"_212-前端-dockerfile","2.1.2 前端 Dockerfile",[253,480,482],{"className":255,"code":481,"language":257,"meta":258,"style":258},"# 使用 Node.js 18 作为基础镜像\nFROM node:18-alpine as builder\n\n# 设置工作目录\nWORKDIR /app\n\n# 复制 package.json 和 pnpm-lock.yaml\nCOPY package.json pnpm-lock.yaml ./\n\n# 安装 pnpm\nRUN npm install -g pnpm\n\n# 安装依赖\nRUN pnpm install\n\n# 复制源代码\nCOPY . .\n\n# 构建生产版本\nRUN pnpm build\n\n# 使用 Nginx 作为基础镜像\nFROM nginx:alpine\n\n# 复制构建好的静态文件到 Nginx 目录\nCOPY --from=builder /app/dist /usr/share/nginx/html\n\n# 复制 Nginx 配置文件\nCOPY nginx.conf /etc/nginx/conf.d/default.conf\n\n# 暴露端口\nEXPOSE 80\n\n# 启动 Nginx\nENTRYPOINT [\"nginx\", \"-g\", \"daemon off;\"]\n",[260,483,484,489,494,498,502,506,510,515,520,524,529,534,538,543,548,552,556,561,565,570,575,579,584,589,593,598,603,607,612,617,621,625,630,634,639],{"__ignoreMap":258},[263,485,486],{"class":265,"line":266},[263,487,488],{},"# 使用 Node.js 18 作为基础镜像\n",[263,490,491],{"class":265,"line":272},[263,492,493],{},"FROM node:18-alpine as builder\n",[263,495,496],{"class":265,"line":278},[263,497,282],{"emptyLinePlaceholder":281},[263,499,500],{"class":265,"line":285},[263,501,288],{},[263,503,504],{"class":265,"line":291},[263,505,294],{},[263,507,508],{"class":265,"line":297},[263,509,282],{"emptyLinePlaceholder":281},[263,511,512],{"class":265,"line":302},[263,513,514],{},"# 复制 package.json 和 pnpm-lock.yaml\n",[263,516,517],{"class":265,"line":308},[263,518,519],{},"COPY package.json pnpm-lock.yaml ./\n",[263,521,522],{"class":265,"line":314},[263,523,282],{"emptyLinePlaceholder":281},[263,525,526],{"class":265,"line":320},[263,527,528],{},"# 安装 pnpm\n",[263,530,531],{"class":265,"line":325},[263,532,533],{},"RUN npm install -g pnpm\n",[263,535,536],{"class":265,"line":331},[263,537,282],{"emptyLinePlaceholder":281},[263,539,540],{"class":265,"line":337},[263,541,542],{},"# 安装依赖\n",[263,544,545],{"class":265,"line":342},[263,546,547],{},"RUN pnpm install\n",[263,549,550],{"class":265,"line":348},[263,551,282],{"emptyLinePlaceholder":281},[263,553,554],{"class":265,"line":354},[263,555,345],{},[263,557,558],{"class":265,"line":359},[263,559,560],{},"COPY . .\n",[263,562,563],{"class":265,"line":365},[263,564,282],{"emptyLinePlaceholder":281},[263,566,567],{"class":265,"line":371},[263,568,569],{},"# 构建生产版本\n",[263,571,572],{"class":265,"line":376},[263,573,574],{},"RUN pnpm build\n",[263,576,577],{"class":265,"line":382},[263,578,282],{"emptyLinePlaceholder":281},[263,580,581],{"class":265,"line":388},[263,582,583],{},"# 使用 Nginx 作为基础镜像\n",[263,585,586],{"class":265,"line":393},[263,587,588],{},"FROM nginx:alpine\n",[263,590,591],{"class":265,"line":398},[263,592,282],{"emptyLinePlaceholder":281},[263,594,595],{"class":265,"line":403},[263,596,597],{},"# 复制构建好的静态文件到 Nginx 目录\n",[263,599,600],{"class":265,"line":408},[263,601,602],{},"COPY --from=builder /app/dist /usr/share/nginx/html\n",[263,604,605],{"class":265,"line":414},[263,606,282],{"emptyLinePlaceholder":281},[263,608,609],{"class":265,"line":420},[263,610,611],{},"# 复制 Nginx 配置文件\n",[263,613,614],{"class":265,"line":425},[263,615,616],{},"COPY nginx.conf /etc/nginx/conf.d/default.conf\n",[263,618,619],{"class":265,"line":431},[263,620,282],{"emptyLinePlaceholder":281},[263,622,623],{"class":265,"line":437},[263,624,451],{},[263,626,627],{"class":265,"line":443},[263,628,629],{},"EXPOSE 80\n",[263,631,632],{"class":265,"line":448},[263,633,282],{"emptyLinePlaceholder":281},[263,635,636],{"class":265,"line":454},[263,637,638],{},"# 启动 Nginx\n",[263,640,641],{"class":265,"line":460},[263,642,643],{},"ENTRYPOINT [\"nginx\", \"-g\", \"daemon off;\"]\n",[248,645,647],{"id":646},"_213-nginx-配置","2.1.3 Nginx 配置",[253,649,653],{"className":650,"code":651,"language":652,"meta":258,"style":258},"language-nginx shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","server {\n    listen 80;\n    server_name localhost;\n    \n    location / {\n        root /usr/share/nginx/html;\n        index index.html;\n        try_files $uri $uri/ /index.html;\n    }\n    \n    location /api {\n        proxy_pass http://backend:8080;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n","nginx",[260,654,655,660,665,670,675,680,685,690,695,700,704,709,714,719,724,729,734,739,744,749,754,758],{"__ignoreMap":258},[263,656,657],{"class":265,"line":266},[263,658,659],{},"server {\n",[263,661,662],{"class":265,"line":272},[263,663,664],{},"    listen 80;\n",[263,666,667],{"class":265,"line":278},[263,668,669],{},"    server_name localhost;\n",[263,671,672],{"class":265,"line":285},[263,673,674],{},"    \n",[263,676,677],{"class":265,"line":291},[263,678,679],{},"    location / {\n",[263,681,682],{"class":265,"line":297},[263,683,684],{},"        root /usr/share/nginx/html;\n",[263,686,687],{"class":265,"line":302},[263,688,689],{},"        index index.html;\n",[263,691,692],{"class":265,"line":308},[263,693,694],{},"        try_files $uri $uri/ /index.html;\n",[263,696,697],{"class":265,"line":314},[263,698,699],{},"    }\n",[263,701,702],{"class":265,"line":320},[263,703,674],{},[263,705,706],{"class":265,"line":325},[263,707,708],{},"    location /api {\n",[263,710,711],{"class":265,"line":331},[263,712,713],{},"        proxy_pass http://backend:8080;\n",[263,715,716],{"class":265,"line":337},[263,717,718],{},"        proxy_set_header Host $host;\n",[263,720,721],{"class":265,"line":342},[263,722,723],{},"        proxy_set_header X-Real-IP $remote_addr;\n",[263,725,726],{"class":265,"line":348},[263,727,728],{},"        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n",[263,730,731],{"class":265,"line":354},[263,732,733],{},"        proxy_set_header X-Forwarded-Proto $scheme;\n",[263,735,736],{"class":265,"line":359},[263,737,738],{},"        \n",[263,740,741],{"class":265,"line":365},[263,742,743],{},"        proxy_http_version 1.1;\n",[263,745,746],{"class":265,"line":371},[263,747,748],{},"        proxy_set_header Upgrade $http_upgrade;\n",[263,750,751],{"class":265,"line":376},[263,752,753],{},"        proxy_set_header Connection \"upgrade\";\n",[263,755,756],{"class":265,"line":382},[263,757,699],{},[263,759,760],{"class":265,"line":388},[263,761,762],{},"}\n",[122,764,766],{"id":765},"_22-docker-compose-配置","2.2 Docker Compose 配置",[253,768,772],{"className":769,"code":770,"language":771,"meta":258,"style":258},"language-yaml shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","version: '3.8'\n\nnetworks:\n  tagtag-network:\n    driver: bridge\n\nvolumes:\n  mysql-data:\n  redis-data:\n  logs:\n\nservices:\n  # MySQL 数据库\n  mysql:\n    image: mysql:8.0\n    container_name: tagtag-mysql\n    restart: always\n    environment:\n      - MYSQL_ROOT_PASSWORD=password\n      - MYSQL_DATABASE=tagtag\n      - MYSQL_CHARSET=utf8mb4\n      - MYSQL_COLLATION=utf8mb4_unicode_ci\n    ports:\n      - \"3306:3306\"\n    volumes:\n      - mysql-data:/var/lib/mysql\n      - ./mysql/conf:/etc/mysql/conf.d\n      - ./mysql/init:/docker-entrypoint-initdb.d\n    networks:\n      - tagtag-network\n    command: --default-authentication-plugin=mysql_native_password\n\n  # Redis 缓存\n  redis:\n    image: redis:7.0-alpine\n    container_name: tagtag-redis\n    restart: always\n    environment:\n      - REDIS_PASSWORD=password\n    ports:\n      - \"6379:6379\"\n    volumes:\n      - redis-data:/data\n    networks:\n      - tagtag-network\n    command: redis-server --requirepass password --appendonly yes\n\n  # 后端应用\n  backend:\n    build:\n      context: ../backend\n      dockerfile: Dockerfile\n    container_name: tagtag-backend\n    restart: always\n    environment:\n      - SPRING_PROFILES_ACTIVE=prod\n      - SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/tagtag?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai\n      - SPRING_DATASOURCE_USERNAME=root\n      - SPRING_DATASOURCE_PASSWORD=password\n      - SPRING_REDIS_HOST=redis\n      - SPRING_REDIS_PORT=6379\n      - SPRING_REDIS_PASSWORD=password\n      - JWT_SECRET=your-secret-key\n    ports:\n      - \"8080:8080\"\n    volumes:\n      - logs:/app/logs\n    networks:\n      - tagtag-network\n    depends_on:\n      - mysql\n      - redis\n\n  # 前端应用\n  frontend:\n    build:\n      context: ../frontend\n      dockerfile: Dockerfile\n    container_name: tagtag-frontend\n    restart: always\n    ports:\n      - \"80:80\"\n    networks:\n      - tagtag-network\n    depends_on:\n      - backend\n\n  # 可选：phpMyAdmin（用于管理数据库）\n  phpmyadmin:\n    image: phpmyadmin/phpmyadmin\n    container_name: tagtag-phpmyadmin\n    restart: always\n    environment:\n      - PMA_HOST=mysql\n      - PMA_PORT=3306\n      - MYSQL_ROOT_PASSWORD=password\n    ports:\n      - \"8081:80\"\n    networks:\n      - tagtag-network\n    depends_on:\n      - mysql\n\n  # 可选：Redis Commander（用于管理 Redis）\n  redis-commander:\n    image: rediscommander/redis-commander:latest\n    container_name: tagtag-redis-commander\n    restart: always\n    environment:\n      - REDIS_HOSTS=local:redis:6379:0:password\n    ports:\n      - \"8082:8081\"\n    networks:\n      - tagtag-network\n    depends_on:\n      - redis\n","yaml",[260,773,774,794,798,806,813,823,827,834,841,848,855,859,866,872,879,889,899,909,916,924,931,938,945,952,965,972,979,986,993,1000,1007,1017,1021,1026,1033,1042,1051,1059,1066,1074,1081,1093,1100,1108,1115,1122,1132,1137,1143,1151,1159,1170,1181,1191,1200,1207,1215,1223,1231,1239,1247,1255,1263,1271,1278,1290,1297,1305,1312,1319,1327,1335,1343,1348,1354,1362,1369,1379,1388,1398,1407,1414,1426,1433,1440,1447,1455,1460,1466,1474,1484,1494,1503,1510,1518,1526,1533,1540,1552,1559,1566,1573,1580,1585,1591,1599,1609,1619,1628,1635,1643,1650,1662,1669,1676,1683],{"__ignoreMap":258},[263,775,776,780,784,787,791],{"class":265,"line":266},[263,777,779],{"class":778},"swJcz","version",[263,781,783],{"class":782},"sMK4o",":",[263,785,786],{"class":782}," '",[263,788,790],{"class":789},"sfazB","3.8",[263,792,793],{"class":782},"'\n",[263,795,796],{"class":265,"line":272},[263,797,282],{"emptyLinePlaceholder":281},[263,799,800,803],{"class":265,"line":278},[263,801,802],{"class":778},"networks",[263,804,805],{"class":782},":\n",[263,807,808,811],{"class":265,"line":285},[263,809,810],{"class":778},"  tagtag-network",[263,812,805],{"class":782},[263,814,815,818,820],{"class":265,"line":291},[263,816,817],{"class":778},"    driver",[263,819,783],{"class":782},[263,821,822],{"class":789}," bridge\n",[263,824,825],{"class":265,"line":297},[263,826,282],{"emptyLinePlaceholder":281},[263,828,829,832],{"class":265,"line":302},[263,830,831],{"class":778},"volumes",[263,833,805],{"class":782},[263,835,836,839],{"class":265,"line":308},[263,837,838],{"class":778},"  mysql-data",[263,840,805],{"class":782},[263,842,843,846],{"class":265,"line":314},[263,844,845],{"class":778},"  redis-data",[263,847,805],{"class":782},[263,849,850,853],{"class":265,"line":320},[263,851,852],{"class":778},"  logs",[263,854,805],{"class":782},[263,856,857],{"class":265,"line":325},[263,858,282],{"emptyLinePlaceholder":281},[263,860,861,864],{"class":265,"line":331},[263,862,863],{"class":778},"services",[263,865,805],{"class":782},[263,867,868],{"class":265,"line":337},[263,869,871],{"class":870},"sHwdD","  # MySQL 数据库\n",[263,873,874,877],{"class":265,"line":342},[263,875,876],{"class":778},"  mysql",[263,878,805],{"class":782},[263,880,881,884,886],{"class":265,"line":348},[263,882,883],{"class":778},"    image",[263,885,783],{"class":782},[263,887,888],{"class":789}," mysql:8.0\n",[263,890,891,894,896],{"class":265,"line":354},[263,892,893],{"class":778},"    container_name",[263,895,783],{"class":782},[263,897,898],{"class":789}," tagtag-mysql\n",[263,900,901,904,906],{"class":265,"line":359},[263,902,903],{"class":778},"    restart",[263,905,783],{"class":782},[263,907,908],{"class":789}," always\n",[263,910,911,914],{"class":265,"line":365},[263,912,913],{"class":778},"    environment",[263,915,805],{"class":782},[263,917,918,921],{"class":265,"line":371},[263,919,920],{"class":782},"      -",[263,922,923],{"class":789}," MYSQL_ROOT_PASSWORD=password\n",[263,925,926,928],{"class":265,"line":376},[263,927,920],{"class":782},[263,929,930],{"class":789}," MYSQL_DATABASE=tagtag\n",[263,932,933,935],{"class":265,"line":382},[263,934,920],{"class":782},[263,936,937],{"class":789}," MYSQL_CHARSET=utf8mb4\n",[263,939,940,942],{"class":265,"line":388},[263,941,920],{"class":782},[263,943,944],{"class":789}," MYSQL_COLLATION=utf8mb4_unicode_ci\n",[263,946,947,950],{"class":265,"line":393},[263,948,949],{"class":778},"    ports",[263,951,805],{"class":782},[263,953,954,956,959,962],{"class":265,"line":398},[263,955,920],{"class":782},[263,957,958],{"class":782}," \"",[263,960,961],{"class":789},"3306:3306",[263,963,964],{"class":782},"\"\n",[263,966,967,970],{"class":265,"line":403},[263,968,969],{"class":778},"    volumes",[263,971,805],{"class":782},[263,973,974,976],{"class":265,"line":408},[263,975,920],{"class":782},[263,977,978],{"class":789}," mysql-data:/var/lib/mysql\n",[263,980,981,983],{"class":265,"line":414},[263,982,920],{"class":782},[263,984,985],{"class":789}," ./mysql/conf:/etc/mysql/conf.d\n",[263,987,988,990],{"class":265,"line":420},[263,989,920],{"class":782},[263,991,992],{"class":789}," ./mysql/init:/docker-entrypoint-initdb.d\n",[263,994,995,998],{"class":265,"line":425},[263,996,997],{"class":778},"    networks",[263,999,805],{"class":782},[263,1001,1002,1004],{"class":265,"line":431},[263,1003,920],{"class":782},[263,1005,1006],{"class":789}," tagtag-network\n",[263,1008,1009,1012,1014],{"class":265,"line":437},[263,1010,1011],{"class":778},"    command",[263,1013,783],{"class":782},[263,1015,1016],{"class":789}," --default-authentication-plugin=mysql_native_password\n",[263,1018,1019],{"class":265,"line":443},[263,1020,282],{"emptyLinePlaceholder":281},[263,1022,1023],{"class":265,"line":448},[263,1024,1025],{"class":870},"  # Redis 缓存\n",[263,1027,1028,1031],{"class":265,"line":454},[263,1029,1030],{"class":778},"  redis",[263,1032,805],{"class":782},[263,1034,1035,1037,1039],{"class":265,"line":460},[263,1036,883],{"class":778},[263,1038,783],{"class":782},[263,1040,1041],{"class":789}," redis:7.0-alpine\n",[263,1043,1044,1046,1048],{"class":265,"line":465},[263,1045,893],{"class":778},[263,1047,783],{"class":782},[263,1049,1050],{"class":789}," tagtag-redis\n",[263,1052,1053,1055,1057],{"class":265,"line":471},[263,1054,903],{"class":778},[263,1056,783],{"class":782},[263,1058,908],{"class":789},[263,1060,1062,1064],{"class":265,"line":1061},38,[263,1063,913],{"class":778},[263,1065,805],{"class":782},[263,1067,1069,1071],{"class":265,"line":1068},39,[263,1070,920],{"class":782},[263,1072,1073],{"class":789}," REDIS_PASSWORD=password\n",[263,1075,1077,1079],{"class":265,"line":1076},40,[263,1078,949],{"class":778},[263,1080,805],{"class":782},[263,1082,1084,1086,1088,1091],{"class":265,"line":1083},41,[263,1085,920],{"class":782},[263,1087,958],{"class":782},[263,1089,1090],{"class":789},"6379:6379",[263,1092,964],{"class":782},[263,1094,1096,1098],{"class":265,"line":1095},42,[263,1097,969],{"class":778},[263,1099,805],{"class":782},[263,1101,1103,1105],{"class":265,"line":1102},43,[263,1104,920],{"class":782},[263,1106,1107],{"class":789}," redis-data:/data\n",[263,1109,1111,1113],{"class":265,"line":1110},44,[263,1112,997],{"class":778},[263,1114,805],{"class":782},[263,1116,1118,1120],{"class":265,"line":1117},45,[263,1119,920],{"class":782},[263,1121,1006],{"class":789},[263,1123,1125,1127,1129],{"class":265,"line":1124},46,[263,1126,1011],{"class":778},[263,1128,783],{"class":782},[263,1130,1131],{"class":789}," redis-server --requirepass password --appendonly yes\n",[263,1133,1135],{"class":265,"line":1134},47,[263,1136,282],{"emptyLinePlaceholder":281},[263,1138,1140],{"class":265,"line":1139},48,[263,1141,1142],{"class":870},"  # 后端应用\n",[263,1144,1146,1149],{"class":265,"line":1145},49,[263,1147,1148],{"class":778},"  backend",[263,1150,805],{"class":782},[263,1152,1154,1157],{"class":265,"line":1153},50,[263,1155,1156],{"class":778},"    build",[263,1158,805],{"class":782},[263,1160,1162,1165,1167],{"class":265,"line":1161},51,[263,1163,1164],{"class":778},"      context",[263,1166,783],{"class":782},[263,1168,1169],{"class":789}," ../backend\n",[263,1171,1173,1176,1178],{"class":265,"line":1172},52,[263,1174,1175],{"class":778},"      dockerfile",[263,1177,783],{"class":782},[263,1179,1180],{"class":789}," Dockerfile\n",[263,1182,1184,1186,1188],{"class":265,"line":1183},53,[263,1185,893],{"class":778},[263,1187,783],{"class":782},[263,1189,1190],{"class":789}," tagtag-backend\n",[263,1192,1194,1196,1198],{"class":265,"line":1193},54,[263,1195,903],{"class":778},[263,1197,783],{"class":782},[263,1199,908],{"class":789},[263,1201,1203,1205],{"class":265,"line":1202},55,[263,1204,913],{"class":778},[263,1206,805],{"class":782},[263,1208,1210,1212],{"class":265,"line":1209},56,[263,1211,920],{"class":782},[263,1213,1214],{"class":789}," SPRING_PROFILES_ACTIVE=prod\n",[263,1216,1218,1220],{"class":265,"line":1217},57,[263,1219,920],{"class":782},[263,1221,1222],{"class":789}," SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/tagtag?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai\n",[263,1224,1226,1228],{"class":265,"line":1225},58,[263,1227,920],{"class":782},[263,1229,1230],{"class":789}," SPRING_DATASOURCE_USERNAME=root\n",[263,1232,1234,1236],{"class":265,"line":1233},59,[263,1235,920],{"class":782},[263,1237,1238],{"class":789}," SPRING_DATASOURCE_PASSWORD=password\n",[263,1240,1242,1244],{"class":265,"line":1241},60,[263,1243,920],{"class":782},[263,1245,1246],{"class":789}," SPRING_REDIS_HOST=redis\n",[263,1248,1250,1252],{"class":265,"line":1249},61,[263,1251,920],{"class":782},[263,1253,1254],{"class":789}," SPRING_REDIS_PORT=6379\n",[263,1256,1258,1260],{"class":265,"line":1257},62,[263,1259,920],{"class":782},[263,1261,1262],{"class":789}," SPRING_REDIS_PASSWORD=password\n",[263,1264,1266,1268],{"class":265,"line":1265},63,[263,1267,920],{"class":782},[263,1269,1270],{"class":789}," JWT_SECRET=your-secret-key\n",[263,1272,1274,1276],{"class":265,"line":1273},64,[263,1275,949],{"class":778},[263,1277,805],{"class":782},[263,1279,1281,1283,1285,1288],{"class":265,"line":1280},65,[263,1282,920],{"class":782},[263,1284,958],{"class":782},[263,1286,1287],{"class":789},"8080:8080",[263,1289,964],{"class":782},[263,1291,1293,1295],{"class":265,"line":1292},66,[263,1294,969],{"class":778},[263,1296,805],{"class":782},[263,1298,1300,1302],{"class":265,"line":1299},67,[263,1301,920],{"class":782},[263,1303,1304],{"class":789}," logs:/app/logs\n",[263,1306,1308,1310],{"class":265,"line":1307},68,[263,1309,997],{"class":778},[263,1311,805],{"class":782},[263,1313,1315,1317],{"class":265,"line":1314},69,[263,1316,920],{"class":782},[263,1318,1006],{"class":789},[263,1320,1322,1325],{"class":265,"line":1321},70,[263,1323,1324],{"class":778},"    depends_on",[263,1326,805],{"class":782},[263,1328,1330,1332],{"class":265,"line":1329},71,[263,1331,920],{"class":782},[263,1333,1334],{"class":789}," mysql\n",[263,1336,1338,1340],{"class":265,"line":1337},72,[263,1339,920],{"class":782},[263,1341,1342],{"class":789}," redis\n",[263,1344,1346],{"class":265,"line":1345},73,[263,1347,282],{"emptyLinePlaceholder":281},[263,1349,1351],{"class":265,"line":1350},74,[263,1352,1353],{"class":870},"  # 前端应用\n",[263,1355,1357,1360],{"class":265,"line":1356},75,[263,1358,1359],{"class":778},"  frontend",[263,1361,805],{"class":782},[263,1363,1365,1367],{"class":265,"line":1364},76,[263,1366,1156],{"class":778},[263,1368,805],{"class":782},[263,1370,1372,1374,1376],{"class":265,"line":1371},77,[263,1373,1164],{"class":778},[263,1375,783],{"class":782},[263,1377,1378],{"class":789}," ../frontend\n",[263,1380,1382,1384,1386],{"class":265,"line":1381},78,[263,1383,1175],{"class":778},[263,1385,783],{"class":782},[263,1387,1180],{"class":789},[263,1389,1391,1393,1395],{"class":265,"line":1390},79,[263,1392,893],{"class":778},[263,1394,783],{"class":782},[263,1396,1397],{"class":789}," tagtag-frontend\n",[263,1399,1401,1403,1405],{"class":265,"line":1400},80,[263,1402,903],{"class":778},[263,1404,783],{"class":782},[263,1406,908],{"class":789},[263,1408,1410,1412],{"class":265,"line":1409},81,[263,1411,949],{"class":778},[263,1413,805],{"class":782},[263,1415,1417,1419,1421,1424],{"class":265,"line":1416},82,[263,1418,920],{"class":782},[263,1420,958],{"class":782},[263,1422,1423],{"class":789},"80:80",[263,1425,964],{"class":782},[263,1427,1429,1431],{"class":265,"line":1428},83,[263,1430,997],{"class":778},[263,1432,805],{"class":782},[263,1434,1436,1438],{"class":265,"line":1435},84,[263,1437,920],{"class":782},[263,1439,1006],{"class":789},[263,1441,1443,1445],{"class":265,"line":1442},85,[263,1444,1324],{"class":778},[263,1446,805],{"class":782},[263,1448,1450,1452],{"class":265,"line":1449},86,[263,1451,920],{"class":782},[263,1453,1454],{"class":789}," backend\n",[263,1456,1458],{"class":265,"line":1457},87,[263,1459,282],{"emptyLinePlaceholder":281},[263,1461,1463],{"class":265,"line":1462},88,[263,1464,1465],{"class":870},"  # 可选：phpMyAdmin（用于管理数据库）\n",[263,1467,1469,1472],{"class":265,"line":1468},89,[263,1470,1471],{"class":778},"  phpmyadmin",[263,1473,805],{"class":782},[263,1475,1477,1479,1481],{"class":265,"line":1476},90,[263,1478,883],{"class":778},[263,1480,783],{"class":782},[263,1482,1483],{"class":789}," phpmyadmin/phpmyadmin\n",[263,1485,1487,1489,1491],{"class":265,"line":1486},91,[263,1488,893],{"class":778},[263,1490,783],{"class":782},[263,1492,1493],{"class":789}," tagtag-phpmyadmin\n",[263,1495,1497,1499,1501],{"class":265,"line":1496},92,[263,1498,903],{"class":778},[263,1500,783],{"class":782},[263,1502,908],{"class":789},[263,1504,1506,1508],{"class":265,"line":1505},93,[263,1507,913],{"class":778},[263,1509,805],{"class":782},[263,1511,1513,1515],{"class":265,"line":1512},94,[263,1514,920],{"class":782},[263,1516,1517],{"class":789}," PMA_HOST=mysql\n",[263,1519,1521,1523],{"class":265,"line":1520},95,[263,1522,920],{"class":782},[263,1524,1525],{"class":789}," PMA_PORT=3306\n",[263,1527,1529,1531],{"class":265,"line":1528},96,[263,1530,920],{"class":782},[263,1532,923],{"class":789},[263,1534,1536,1538],{"class":265,"line":1535},97,[263,1537,949],{"class":778},[263,1539,805],{"class":782},[263,1541,1543,1545,1547,1550],{"class":265,"line":1542},98,[263,1544,920],{"class":782},[263,1546,958],{"class":782},[263,1548,1549],{"class":789},"8081:80",[263,1551,964],{"class":782},[263,1553,1555,1557],{"class":265,"line":1554},99,[263,1556,997],{"class":778},[263,1558,805],{"class":782},[263,1560,1562,1564],{"class":265,"line":1561},100,[263,1563,920],{"class":782},[263,1565,1006],{"class":789},[263,1567,1569,1571],{"class":265,"line":1568},101,[263,1570,1324],{"class":778},[263,1572,805],{"class":782},[263,1574,1576,1578],{"class":265,"line":1575},102,[263,1577,920],{"class":782},[263,1579,1334],{"class":789},[263,1581,1583],{"class":265,"line":1582},103,[263,1584,282],{"emptyLinePlaceholder":281},[263,1586,1588],{"class":265,"line":1587},104,[263,1589,1590],{"class":870},"  # 可选：Redis Commander（用于管理 Redis）\n",[263,1592,1594,1597],{"class":265,"line":1593},105,[263,1595,1596],{"class":778},"  redis-commander",[263,1598,805],{"class":782},[263,1600,1602,1604,1606],{"class":265,"line":1601},106,[263,1603,883],{"class":778},[263,1605,783],{"class":782},[263,1607,1608],{"class":789}," rediscommander/redis-commander:latest\n",[263,1610,1612,1614,1616],{"class":265,"line":1611},107,[263,1613,893],{"class":778},[263,1615,783],{"class":782},[263,1617,1618],{"class":789}," tagtag-redis-commander\n",[263,1620,1622,1624,1626],{"class":265,"line":1621},108,[263,1623,903],{"class":778},[263,1625,783],{"class":782},[263,1627,908],{"class":789},[263,1629,1631,1633],{"class":265,"line":1630},109,[263,1632,913],{"class":778},[263,1634,805],{"class":782},[263,1636,1638,1640],{"class":265,"line":1637},110,[263,1639,920],{"class":782},[263,1641,1642],{"class":789}," REDIS_HOSTS=local:redis:6379:0:password\n",[263,1644,1646,1648],{"class":265,"line":1645},111,[263,1647,949],{"class":778},[263,1649,805],{"class":782},[263,1651,1653,1655,1657,1660],{"class":265,"line":1652},112,[263,1654,920],{"class":782},[263,1656,958],{"class":782},[263,1658,1659],{"class":789},"8082:8081",[263,1661,964],{"class":782},[263,1663,1665,1667],{"class":265,"line":1664},113,[263,1666,997],{"class":778},[263,1668,805],{"class":782},[263,1670,1672,1674],{"class":265,"line":1671},114,[263,1673,920],{"class":782},[263,1675,1006],{"class":789},[263,1677,1679,1681],{"class":265,"line":1678},115,[263,1680,1324],{"class":778},[263,1682,805],{"class":782},[263,1684,1686,1688],{"class":265,"line":1685},116,[263,1687,920],{"class":782},[263,1689,1342],{"class":789},[122,1691,1693],{"id":1692},"_23-构建和运行","2.3 构建和运行",[113,1695,1696,1699],{},[133,1697,1698],{},"命令示例","：",[253,1701,1705],{"className":1702,"code":1703,"language":1704,"meta":258,"style":258},"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","# 进入 Docker Compose 目录\ncd docker\n\n# 构建所有服务\ndocker-compose build\n\n# 运行所有服务\ndocker-compose up -d\n\n# 查看服务状态\ndocker-compose ps\n\n# 查看日志\ndocker-compose logs -f\n\n# 停止服务\ndocker-compose down\n\n# 停止服务并删除数据卷\ndocker-compose down -v\n\n# 仅构建特定服务\ndocker-compose build frontend\n\n# 仅运行特定服务\ndocker-compose up -d backend mysql redis\n","bash",[260,1706,1707,1712,1721,1725,1730,1739,1743,1748,1758,1762,1767,1774,1778,1783,1793,1797,1802,1809,1813,1818,1828,1832,1837,1847,1851,1856],{"__ignoreMap":258},[263,1708,1709],{"class":265,"line":266},[263,1710,1711],{"class":870},"# 进入 Docker Compose 目录\n",[263,1713,1714,1718],{"class":265,"line":272},[263,1715,1717],{"class":1716},"s2Zo4","cd",[263,1719,1720],{"class":789}," docker\n",[263,1722,1723],{"class":265,"line":278},[263,1724,282],{"emptyLinePlaceholder":281},[263,1726,1727],{"class":265,"line":285},[263,1728,1729],{"class":870},"# 构建所有服务\n",[263,1731,1732,1736],{"class":265,"line":291},[263,1733,1735],{"class":1734},"sBMFI","docker-compose",[263,1737,1738],{"class":789}," build\n",[263,1740,1741],{"class":265,"line":297},[263,1742,282],{"emptyLinePlaceholder":281},[263,1744,1745],{"class":265,"line":302},[263,1746,1747],{"class":870},"# 运行所有服务\n",[263,1749,1750,1752,1755],{"class":265,"line":308},[263,1751,1735],{"class":1734},[263,1753,1754],{"class":789}," up",[263,1756,1757],{"class":789}," -d\n",[263,1759,1760],{"class":265,"line":314},[263,1761,282],{"emptyLinePlaceholder":281},[263,1763,1764],{"class":265,"line":320},[263,1765,1766],{"class":870},"# 查看服务状态\n",[263,1768,1769,1771],{"class":265,"line":325},[263,1770,1735],{"class":1734},[263,1772,1773],{"class":789}," ps\n",[263,1775,1776],{"class":265,"line":331},[263,1777,282],{"emptyLinePlaceholder":281},[263,1779,1780],{"class":265,"line":337},[263,1781,1782],{"class":870},"# 查看日志\n",[263,1784,1785,1787,1790],{"class":265,"line":342},[263,1786,1735],{"class":1734},[263,1788,1789],{"class":789}," logs",[263,1791,1792],{"class":789}," -f\n",[263,1794,1795],{"class":265,"line":348},[263,1796,282],{"emptyLinePlaceholder":281},[263,1798,1799],{"class":265,"line":354},[263,1800,1801],{"class":870},"# 停止服务\n",[263,1803,1804,1806],{"class":265,"line":359},[263,1805,1735],{"class":1734},[263,1807,1808],{"class":789}," down\n",[263,1810,1811],{"class":265,"line":365},[263,1812,282],{"emptyLinePlaceholder":281},[263,1814,1815],{"class":265,"line":371},[263,1816,1817],{"class":870},"# 停止服务并删除数据卷\n",[263,1819,1820,1822,1825],{"class":265,"line":376},[263,1821,1735],{"class":1734},[263,1823,1824],{"class":789}," down",[263,1826,1827],{"class":789}," -v\n",[263,1829,1830],{"class":265,"line":382},[263,1831,282],{"emptyLinePlaceholder":281},[263,1833,1834],{"class":265,"line":388},[263,1835,1836],{"class":870},"# 仅构建特定服务\n",[263,1838,1839,1841,1844],{"class":265,"line":393},[263,1840,1735],{"class":1734},[263,1842,1843],{"class":789}," build",[263,1845,1846],{"class":789}," frontend\n",[263,1848,1849],{"class":265,"line":398},[263,1850,282],{"emptyLinePlaceholder":281},[263,1852,1853],{"class":265,"line":403},[263,1854,1855],{"class":870},"# 仅运行特定服务\n",[263,1857,1858,1860,1862,1865,1868,1871],{"class":265,"line":408},[263,1859,1735],{"class":1734},[263,1861,1754],{"class":789},[263,1863,1864],{"class":789}," -d",[263,1866,1867],{"class":789}," backend",[263,1869,1870],{"class":789}," mysql",[263,1872,1342],{"class":789},[117,1874,1876],{"id":1875},"_3-kubernetes-部署","3. Kubernetes 部署",[122,1878,1880],{"id":1879},"_31-kubernetes-集群搭建","3.1 Kubernetes 集群搭建",[248,1882,1884],{"id":1883},"_311-本地开发环境","3.1.1 本地开发环境",[113,1886,1887,1699],{},[133,1888,1889],{},"使用 Minikube",[253,1891,1893],{"className":1702,"code":1892,"language":1704,"meta":258,"style":258},"# 安装 Minikube\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo install minikube-linux-amd64 /usr/local/bin/minikube\n\n# 启动 Minikube\nminikube start --cpus 4 --memory 8g --disk-size 40g\n\n# 安装 kubectl\nsudo apt-get update && sudo apt-get install -y kubectl\n\n# 验证集群\nkubectl cluster-info\nkubectl get nodes\n",[260,1894,1895,1900,1911,1925,1929,1934,1961,1965,1970,1996,2000,2005,2013],{"__ignoreMap":258},[263,1896,1897],{"class":265,"line":266},[263,1898,1899],{"class":870},"# 安装 Minikube\n",[263,1901,1902,1905,1908],{"class":265,"line":272},[263,1903,1904],{"class":1734},"curl",[263,1906,1907],{"class":789}," -LO",[263,1909,1910],{"class":789}," https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\n",[263,1912,1913,1916,1919,1922],{"class":265,"line":278},[263,1914,1915],{"class":1734},"sudo",[263,1917,1918],{"class":789}," install",[263,1920,1921],{"class":789}," minikube-linux-amd64",[263,1923,1924],{"class":789}," /usr/local/bin/minikube\n",[263,1926,1927],{"class":265,"line":285},[263,1928,282],{"emptyLinePlaceholder":281},[263,1930,1931],{"class":265,"line":291},[263,1932,1933],{"class":870},"# 启动 Minikube\n",[263,1935,1936,1939,1942,1945,1949,1952,1955,1958],{"class":265,"line":297},[263,1937,1938],{"class":1734},"minikube",[263,1940,1941],{"class":789}," start",[263,1943,1944],{"class":789}," --cpus",[263,1946,1948],{"class":1947},"sbssI"," 4",[263,1950,1951],{"class":789}," --memory",[263,1953,1954],{"class":789}," 8g",[263,1956,1957],{"class":789}," --disk-size",[263,1959,1960],{"class":789}," 40g\n",[263,1962,1963],{"class":265,"line":302},[263,1964,282],{"emptyLinePlaceholder":281},[263,1966,1967],{"class":265,"line":308},[263,1968,1969],{"class":870},"# 安装 kubectl\n",[263,1971,1972,1974,1977,1980,1983,1986,1988,1990,1993],{"class":265,"line":314},[263,1973,1915],{"class":1734},[263,1975,1976],{"class":789}," apt-get",[263,1978,1979],{"class":789}," update",[263,1981,1982],{"class":782}," &&",[263,1984,1985],{"class":1734}," sudo",[263,1987,1976],{"class":789},[263,1989,1918],{"class":789},[263,1991,1992],{"class":789}," -y",[263,1994,1995],{"class":789}," kubectl\n",[263,1997,1998],{"class":265,"line":320},[263,1999,282],{"emptyLinePlaceholder":281},[263,2001,2002],{"class":265,"line":325},[263,2003,2004],{"class":870},"# 验证集群\n",[263,2006,2007,2010],{"class":265,"line":331},[263,2008,2009],{"class":1734},"kubectl",[263,2011,2012],{"class":789}," cluster-info\n",[263,2014,2015,2017,2020],{"class":265,"line":337},[263,2016,2009],{"class":1734},[263,2018,2019],{"class":789}," get",[263,2021,2022],{"class":789}," nodes\n",[113,2024,2025,1699],{},[133,2026,2027],{},"使用 Kind",[253,2029,2031],{"className":1702,"code":2030,"language":1704,"meta":258,"style":258},"# 安装 Kind\ngo install sigs.k8s.io/kind@v0.20.0\n\n# 创建集群配置\ncat > kind-config.yaml \u003C\u003C EOF\nkind: Cluster\napiVersion: kind.x-k8s.io/v1alpha4\nnodes:\n- role: control-plane\n  extraPortMappings:\n  - containerPort: 30080\n    hostPort: 80\n    protocol: TCP\n  - containerPort: 30443\n    hostPort: 443\n    protocol: TCP\nEOF\n\n# 创建集群\nkind create cluster --config kind-config.yaml\n\n# 验证集群\nkubectl cluster-info\nkubectl get nodes\n",[260,2032,2033,2038,2048,2052,2057,2074,2079,2084,2089,2094,2099,2104,2109,2114,2119,2124,2128,2133,2137,2142,2159,2163,2167,2173],{"__ignoreMap":258},[263,2034,2035],{"class":265,"line":266},[263,2036,2037],{"class":870},"# 安装 Kind\n",[263,2039,2040,2043,2045],{"class":265,"line":272},[263,2041,2042],{"class":1734},"go",[263,2044,1918],{"class":789},[263,2046,2047],{"class":789}," sigs.k8s.io/kind@v0.20.0\n",[263,2049,2050],{"class":265,"line":278},[263,2051,282],{"emptyLinePlaceholder":281},[263,2053,2054],{"class":265,"line":285},[263,2055,2056],{"class":870},"# 创建集群配置\n",[263,2058,2059,2062,2065,2068,2071],{"class":265,"line":291},[263,2060,2061],{"class":1734},"cat",[263,2063,2064],{"class":782}," >",[263,2066,2067],{"class":789}," kind-config.yaml",[263,2069,2070],{"class":782}," \u003C\u003C",[263,2072,2073],{"class":782}," EOF\n",[263,2075,2076],{"class":265,"line":297},[263,2077,2078],{"class":789},"kind: Cluster\n",[263,2080,2081],{"class":265,"line":302},[263,2082,2083],{"class":789},"apiVersion: kind.x-k8s.io/v1alpha4\n",[263,2085,2086],{"class":265,"line":308},[263,2087,2088],{"class":789},"nodes:\n",[263,2090,2091],{"class":265,"line":314},[263,2092,2093],{"class":789},"- role: control-plane\n",[263,2095,2096],{"class":265,"line":320},[263,2097,2098],{"class":789},"  extraPortMappings:\n",[263,2100,2101],{"class":265,"line":325},[263,2102,2103],{"class":789},"  - containerPort: 30080\n",[263,2105,2106],{"class":265,"line":331},[263,2107,2108],{"class":789},"    hostPort: 80\n",[263,2110,2111],{"class":265,"line":337},[263,2112,2113],{"class":789},"    protocol: TCP\n",[263,2115,2116],{"class":265,"line":342},[263,2117,2118],{"class":789},"  - containerPort: 30443\n",[263,2120,2121],{"class":265,"line":348},[263,2122,2123],{"class":789},"    hostPort: 443\n",[263,2125,2126],{"class":265,"line":354},[263,2127,2113],{"class":789},[263,2129,2130],{"class":265,"line":359},[263,2131,2132],{"class":782},"EOF\n",[263,2134,2135],{"class":265,"line":365},[263,2136,282],{"emptyLinePlaceholder":281},[263,2138,2139],{"class":265,"line":371},[263,2140,2141],{"class":870},"# 创建集群\n",[263,2143,2144,2147,2150,2153,2156],{"class":265,"line":376},[263,2145,2146],{"class":1734},"kind",[263,2148,2149],{"class":789}," create",[263,2151,2152],{"class":789}," cluster",[263,2154,2155],{"class":789}," --config",[263,2157,2158],{"class":789}," kind-config.yaml\n",[263,2160,2161],{"class":265,"line":382},[263,2162,282],{"emptyLinePlaceholder":281},[263,2164,2165],{"class":265,"line":388},[263,2166,2004],{"class":870},[263,2168,2169,2171],{"class":265,"line":393},[263,2170,2009],{"class":1734},[263,2172,2012],{"class":789},[263,2174,2175,2177,2179],{"class":265,"line":398},[263,2176,2009],{"class":1734},[263,2178,2019],{"class":789},[263,2180,2022],{"class":789},[248,2182,2184],{"id":2183},"_312-生产环境","3.1.2 生产环境",[127,2186,2187,2193],{},[130,2188,2189,2192],{},[133,2190,2191],{},"云厂商托管集群","：推荐使用 AWS EKS、Azure AKS、Google GKE 或阿里云 ACK",[130,2194,2195,2198],{},[133,2196,2197],{},"自建集群","：使用 kubeadm 或 Rancher 搭建",[122,2200,2202],{"id":2201},"_32-kubernetes-资源配置","3.2 Kubernetes 资源配置",[248,2204,2206],{"id":2205},"_321-命名空间","3.2.1 命名空间",[253,2208,2210],{"className":769,"code":2209,"language":771,"meta":258,"style":258},"apiVersion: v1\nkind: Namespace\nmetadata:\n  name: tagtag\n  labels:\n    name: tagtag\n",[260,2211,2212,2222,2231,2238,2248,2255],{"__ignoreMap":258},[263,2213,2214,2217,2219],{"class":265,"line":266},[263,2215,2216],{"class":778},"apiVersion",[263,2218,783],{"class":782},[263,2220,2221],{"class":789}," v1\n",[263,2223,2224,2226,2228],{"class":265,"line":272},[263,2225,2146],{"class":778},[263,2227,783],{"class":782},[263,2229,2230],{"class":789}," Namespace\n",[263,2232,2233,2236],{"class":265,"line":278},[263,2234,2235],{"class":778},"metadata",[263,2237,805],{"class":782},[263,2239,2240,2243,2245],{"class":265,"line":285},[263,2241,2242],{"class":778},"  name",[263,2244,783],{"class":782},[263,2246,2247],{"class":789}," tagtag\n",[263,2249,2250,2253],{"class":265,"line":291},[263,2251,2252],{"class":778},"  labels",[263,2254,805],{"class":782},[263,2256,2257,2260,2262],{"class":265,"line":297},[263,2258,2259],{"class":778},"    name",[263,2261,783],{"class":782},[263,2263,2247],{"class":789},[248,2265,2267],{"id":2266},"_322-配置文件configmap","3.2.2 配置文件（ConfigMap）",[253,2269,2271],{"className":769,"code":2270,"language":771,"meta":258,"style":258},"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: tagtag-config\n  namespace: tagtag\ndata:\n  application-prod.yaml: |\n    server:\n      port: 8080\n      servlet:\n        context-path: /api\n    spring:\n      datasource:\n        url: jdbc:mysql://mysql.tagtag:3306/tagtag?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai\n        username: root\n        password: ${MYSQL_PASSWORD}\n      redis:\n        host: redis.tagtag\n        port: 6379\n        password: ${REDIS_PASSWORD}\n    jwt:\n      secret: ${JWT_SECRET}\n      expiration: 3600\n",[260,2272,2273,2281,2290,2296,2305,2314,2321,2332,2337,2342,2347,2352,2357,2362,2367,2372,2377,2382,2387,2392,2397,2402,2407],{"__ignoreMap":258},[263,2274,2275,2277,2279],{"class":265,"line":266},[263,2276,2216],{"class":778},[263,2278,783],{"class":782},[263,2280,2221],{"class":789},[263,2282,2283,2285,2287],{"class":265,"line":272},[263,2284,2146],{"class":778},[263,2286,783],{"class":782},[263,2288,2289],{"class":789}," ConfigMap\n",[263,2291,2292,2294],{"class":265,"line":278},[263,2293,2235],{"class":778},[263,2295,805],{"class":782},[263,2297,2298,2300,2302],{"class":265,"line":285},[263,2299,2242],{"class":778},[263,2301,783],{"class":782},[263,2303,2304],{"class":789}," tagtag-config\n",[263,2306,2307,2310,2312],{"class":265,"line":291},[263,2308,2309],{"class":778},"  namespace",[263,2311,783],{"class":782},[263,2313,2247],{"class":789},[263,2315,2316,2319],{"class":265,"line":297},[263,2317,2318],{"class":778},"data",[263,2320,805],{"class":782},[263,2322,2323,2326,2328],{"class":265,"line":302},[263,2324,2325],{"class":778},"  application-prod.yaml",[263,2327,783],{"class":782},[263,2329,2331],{"class":2330},"s7zQu"," |\n",[263,2333,2334],{"class":265,"line":308},[263,2335,2336],{"class":789},"    server:\n",[263,2338,2339],{"class":265,"line":314},[263,2340,2341],{"class":789},"      port: 8080\n",[263,2343,2344],{"class":265,"line":320},[263,2345,2346],{"class":789},"      servlet:\n",[263,2348,2349],{"class":265,"line":325},[263,2350,2351],{"class":789},"        context-path: /api\n",[263,2353,2354],{"class":265,"line":331},[263,2355,2356],{"class":789},"    spring:\n",[263,2358,2359],{"class":265,"line":337},[263,2360,2361],{"class":789},"      datasource:\n",[263,2363,2364],{"class":265,"line":342},[263,2365,2366],{"class":789},"        url: jdbc:mysql://mysql.tagtag:3306/tagtag?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai\n",[263,2368,2369],{"class":265,"line":348},[263,2370,2371],{"class":789},"        username: root\n",[263,2373,2374],{"class":265,"line":354},[263,2375,2376],{"class":789},"        password: ${MYSQL_PASSWORD}\n",[263,2378,2379],{"class":265,"line":359},[263,2380,2381],{"class":789},"      redis:\n",[263,2383,2384],{"class":265,"line":365},[263,2385,2386],{"class":789},"        host: redis.tagtag\n",[263,2388,2389],{"class":265,"line":371},[263,2390,2391],{"class":789},"        port: 6379\n",[263,2393,2394],{"class":265,"line":376},[263,2395,2396],{"class":789},"        password: ${REDIS_PASSWORD}\n",[263,2398,2399],{"class":265,"line":382},[263,2400,2401],{"class":789},"    jwt:\n",[263,2403,2404],{"class":265,"line":388},[263,2405,2406],{"class":789},"      secret: ${JWT_SECRET}\n",[263,2408,2409],{"class":265,"line":393},[263,2410,2411],{"class":789},"      expiration: 3600\n",[248,2413,2415],{"id":2414},"_323-密钥secret","3.2.3 密钥（Secret）",[253,2417,2419],{"className":769,"code":2418,"language":771,"meta":258,"style":258},"apiVersion: v1\nkind: Secret\nmetadata:\n  name: tagtag-secrets\n  namespace: tagtag\ntype: Opaque\nstringData:\n  mysql-password: password\n  redis-password: password\n  jwt-secret: your-secret-key\n",[260,2420,2421,2429,2438,2444,2453,2461,2471,2478,2488,2497],{"__ignoreMap":258},[263,2422,2423,2425,2427],{"class":265,"line":266},[263,2424,2216],{"class":778},[263,2426,783],{"class":782},[263,2428,2221],{"class":789},[263,2430,2431,2433,2435],{"class":265,"line":272},[263,2432,2146],{"class":778},[263,2434,783],{"class":782},[263,2436,2437],{"class":789}," Secret\n",[263,2439,2440,2442],{"class":265,"line":278},[263,2441,2235],{"class":778},[263,2443,805],{"class":782},[263,2445,2446,2448,2450],{"class":265,"line":285},[263,2447,2242],{"class":778},[263,2449,783],{"class":782},[263,2451,2452],{"class":789}," tagtag-secrets\n",[263,2454,2455,2457,2459],{"class":265,"line":291},[263,2456,2309],{"class":778},[263,2458,783],{"class":782},[263,2460,2247],{"class":789},[263,2462,2463,2466,2468],{"class":265,"line":297},[263,2464,2465],{"class":778},"type",[263,2467,783],{"class":782},[263,2469,2470],{"class":789}," Opaque\n",[263,2472,2473,2476],{"class":265,"line":302},[263,2474,2475],{"class":778},"stringData",[263,2477,805],{"class":782},[263,2479,2480,2483,2485],{"class":265,"line":308},[263,2481,2482],{"class":778},"  mysql-password",[263,2484,783],{"class":782},[263,2486,2487],{"class":789}," password\n",[263,2489,2490,2493,2495],{"class":265,"line":314},[263,2491,2492],{"class":778},"  redis-password",[263,2494,783],{"class":782},[263,2496,2487],{"class":789},[263,2498,2499,2502,2504],{"class":265,"line":320},[263,2500,2501],{"class":778},"  jwt-secret",[263,2503,783],{"class":782},[263,2505,2506],{"class":789}," your-secret-key\n",[248,2508,2510],{"id":2509},"_324-mysql-部署","3.2.4 MySQL 部署",[253,2512,2514],{"className":769,"code":2513,"language":771,"meta":258,"style":258},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mysql\n  namespace: tagtag\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: mysql\n  template:\n    metadata:\n      labels:\n        app: mysql\n    spec:\n      containers:\n      - name: mysql\n        image: mysql:8.0\n        env:\n        - name: MYSQL_ROOT_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: tagtag-secrets\n              key: mysql-password\n        - name: MYSQL_DATABASE\n          value: tagtag\n        ports:\n        - containerPort: 3306\n        volumeMounts:\n        - name: mysql-data\n          mountPath: /var/lib/mysql\n        - name: mysql-conf\n          mountPath: /etc/mysql/conf.d\n      volumes:\n      - name: mysql-data\n        persistentVolumeClaim:\n          claimName: mysql-pvc\n      - name: mysql-conf\n        configMap:\n          name: mysql-config\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: mysql\n  namespace: tagtag\nspec:\n  selector:\n    app: mysql\n  ports:\n  - port: 3306\n    targetPort: 3306\n  clusterIP: None  # 使用 Headless Service\n---\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: mysql-pvc\n  namespace: tagtag\nspec:\n  accessModes:\n  - ReadWriteOnce\n  resources:\n    requests:\n      storage: 20Gi\n",[260,2515,2516,2525,2534,2540,2548,2556,2563,2573,2580,2587,2596,2603,2610,2617,2626,2633,2640,2651,2660,2667,2679,2686,2693,2702,2712,2723,2732,2739,2751,2758,2769,2779,2790,2799,2806,2816,2823,2833,2843,2850,2860,2865,2873,2882,2888,2896,2904,2910,2916,2925,2932,2944,2953,2966,2970,2978,2987,2993,3001,3009,3015,3022,3029,3036,3043],{"__ignoreMap":258},[263,2517,2518,2520,2522],{"class":265,"line":266},[263,2519,2216],{"class":778},[263,2521,783],{"class":782},[263,2523,2524],{"class":789}," apps/v1\n",[263,2526,2527,2529,2531],{"class":265,"line":272},[263,2528,2146],{"class":778},[263,2530,783],{"class":782},[263,2532,2533],{"class":789}," Deployment\n",[263,2535,2536,2538],{"class":265,"line":278},[263,2537,2235],{"class":778},[263,2539,805],{"class":782},[263,2541,2542,2544,2546],{"class":265,"line":285},[263,2543,2242],{"class":778},[263,2545,783],{"class":782},[263,2547,1334],{"class":789},[263,2549,2550,2552,2554],{"class":265,"line":291},[263,2551,2309],{"class":778},[263,2553,783],{"class":782},[263,2555,2247],{"class":789},[263,2557,2558,2561],{"class":265,"line":297},[263,2559,2560],{"class":778},"spec",[263,2562,805],{"class":782},[263,2564,2565,2568,2570],{"class":265,"line":302},[263,2566,2567],{"class":778},"  replicas",[263,2569,783],{"class":782},[263,2571,2572],{"class":1947}," 1\n",[263,2574,2575,2578],{"class":265,"line":308},[263,2576,2577],{"class":778},"  selector",[263,2579,805],{"class":782},[263,2581,2582,2585],{"class":265,"line":314},[263,2583,2584],{"class":778},"    matchLabels",[263,2586,805],{"class":782},[263,2588,2589,2592,2594],{"class":265,"line":320},[263,2590,2591],{"class":778},"      app",[263,2593,783],{"class":782},[263,2595,1334],{"class":789},[263,2597,2598,2601],{"class":265,"line":325},[263,2599,2600],{"class":778},"  template",[263,2602,805],{"class":782},[263,2604,2605,2608],{"class":265,"line":331},[263,2606,2607],{"class":778},"    metadata",[263,2609,805],{"class":782},[263,2611,2612,2615],{"class":265,"line":337},[263,2613,2614],{"class":778},"      labels",[263,2616,805],{"class":782},[263,2618,2619,2622,2624],{"class":265,"line":342},[263,2620,2621],{"class":778},"        app",[263,2623,783],{"class":782},[263,2625,1334],{"class":789},[263,2627,2628,2631],{"class":265,"line":348},[263,2629,2630],{"class":778},"    spec",[263,2632,805],{"class":782},[263,2634,2635,2638],{"class":265,"line":354},[263,2636,2637],{"class":778},"      containers",[263,2639,805],{"class":782},[263,2641,2642,2644,2647,2649],{"class":265,"line":359},[263,2643,920],{"class":782},[263,2645,2646],{"class":778}," name",[263,2648,783],{"class":782},[263,2650,1334],{"class":789},[263,2652,2653,2656,2658],{"class":265,"line":365},[263,2654,2655],{"class":778},"        image",[263,2657,783],{"class":782},[263,2659,888],{"class":789},[263,2661,2662,2665],{"class":265,"line":371},[263,2663,2664],{"class":778},"        env",[263,2666,805],{"class":782},[263,2668,2669,2672,2674,2676],{"class":265,"line":376},[263,2670,2671],{"class":782},"        -",[263,2673,2646],{"class":778},[263,2675,783],{"class":782},[263,2677,2678],{"class":789}," MYSQL_ROOT_PASSWORD\n",[263,2680,2681,2684],{"class":265,"line":382},[263,2682,2683],{"class":778},"          valueFrom",[263,2685,805],{"class":782},[263,2687,2688,2691],{"class":265,"line":388},[263,2689,2690],{"class":778},"            secretKeyRef",[263,2692,805],{"class":782},[263,2694,2695,2698,2700],{"class":265,"line":393},[263,2696,2697],{"class":778},"              name",[263,2699,783],{"class":782},[263,2701,2452],{"class":789},[263,2703,2704,2707,2709],{"class":265,"line":398},[263,2705,2706],{"class":778},"              key",[263,2708,783],{"class":782},[263,2710,2711],{"class":789}," mysql-password\n",[263,2713,2714,2716,2718,2720],{"class":265,"line":403},[263,2715,2671],{"class":782},[263,2717,2646],{"class":778},[263,2719,783],{"class":782},[263,2721,2722],{"class":789}," MYSQL_DATABASE\n",[263,2724,2725,2728,2730],{"class":265,"line":408},[263,2726,2727],{"class":778},"          value",[263,2729,783],{"class":782},[263,2731,2247],{"class":789},[263,2733,2734,2737],{"class":265,"line":414},[263,2735,2736],{"class":778},"        ports",[263,2738,805],{"class":782},[263,2740,2741,2743,2746,2748],{"class":265,"line":420},[263,2742,2671],{"class":782},[263,2744,2745],{"class":778}," containerPort",[263,2747,783],{"class":782},[263,2749,2750],{"class":1947}," 3306\n",[263,2752,2753,2756],{"class":265,"line":425},[263,2754,2755],{"class":778},"        volumeMounts",[263,2757,805],{"class":782},[263,2759,2760,2762,2764,2766],{"class":265,"line":431},[263,2761,2671],{"class":782},[263,2763,2646],{"class":778},[263,2765,783],{"class":782},[263,2767,2768],{"class":789}," mysql-data\n",[263,2770,2771,2774,2776],{"class":265,"line":437},[263,2772,2773],{"class":778},"          mountPath",[263,2775,783],{"class":782},[263,2777,2778],{"class":789}," /var/lib/mysql\n",[263,2780,2781,2783,2785,2787],{"class":265,"line":443},[263,2782,2671],{"class":782},[263,2784,2646],{"class":778},[263,2786,783],{"class":782},[263,2788,2789],{"class":789}," mysql-conf\n",[263,2791,2792,2794,2796],{"class":265,"line":448},[263,2793,2773],{"class":778},[263,2795,783],{"class":782},[263,2797,2798],{"class":789}," /etc/mysql/conf.d\n",[263,2800,2801,2804],{"class":265,"line":454},[263,2802,2803],{"class":778},"      volumes",[263,2805,805],{"class":782},[263,2807,2808,2810,2812,2814],{"class":265,"line":460},[263,2809,920],{"class":782},[263,2811,2646],{"class":778},[263,2813,783],{"class":782},[263,2815,2768],{"class":789},[263,2817,2818,2821],{"class":265,"line":465},[263,2819,2820],{"class":778},"        persistentVolumeClaim",[263,2822,805],{"class":782},[263,2824,2825,2828,2830],{"class":265,"line":471},[263,2826,2827],{"class":778},"          claimName",[263,2829,783],{"class":782},[263,2831,2832],{"class":789}," mysql-pvc\n",[263,2834,2835,2837,2839,2841],{"class":265,"line":1061},[263,2836,920],{"class":782},[263,2838,2646],{"class":778},[263,2840,783],{"class":782},[263,2842,2789],{"class":789},[263,2844,2845,2848],{"class":265,"line":1068},[263,2846,2847],{"class":778},"        configMap",[263,2849,805],{"class":782},[263,2851,2852,2855,2857],{"class":265,"line":1076},[263,2853,2854],{"class":778},"          name",[263,2856,783],{"class":782},[263,2858,2859],{"class":789}," mysql-config\n",[263,2861,2862],{"class":265,"line":1083},[263,2863,2864],{"class":1734},"---\n",[263,2866,2867,2869,2871],{"class":265,"line":1095},[263,2868,2216],{"class":778},[263,2870,783],{"class":782},[263,2872,2221],{"class":789},[263,2874,2875,2877,2879],{"class":265,"line":1102},[263,2876,2146],{"class":778},[263,2878,783],{"class":782},[263,2880,2881],{"class":789}," Service\n",[263,2883,2884,2886],{"class":265,"line":1110},[263,2885,2235],{"class":778},[263,2887,805],{"class":782},[263,2889,2890,2892,2894],{"class":265,"line":1117},[263,2891,2242],{"class":778},[263,2893,783],{"class":782},[263,2895,1334],{"class":789},[263,2897,2898,2900,2902],{"class":265,"line":1124},[263,2899,2309],{"class":778},[263,2901,783],{"class":782},[263,2903,2247],{"class":789},[263,2905,2906,2908],{"class":265,"line":1134},[263,2907,2560],{"class":778},[263,2909,805],{"class":782},[263,2911,2912,2914],{"class":265,"line":1139},[263,2913,2577],{"class":778},[263,2915,805],{"class":782},[263,2917,2918,2921,2923],{"class":265,"line":1145},[263,2919,2920],{"class":778},"    app",[263,2922,783],{"class":782},[263,2924,1334],{"class":789},[263,2926,2927,2930],{"class":265,"line":1153},[263,2928,2929],{"class":778},"  ports",[263,2931,805],{"class":782},[263,2933,2934,2937,2940,2942],{"class":265,"line":1161},[263,2935,2936],{"class":782},"  -",[263,2938,2939],{"class":778}," port",[263,2941,783],{"class":782},[263,2943,2750],{"class":1947},[263,2945,2946,2949,2951],{"class":265,"line":1172},[263,2947,2948],{"class":778},"    targetPort",[263,2950,783],{"class":782},[263,2952,2750],{"class":1947},[263,2954,2955,2958,2960,2963],{"class":265,"line":1183},[263,2956,2957],{"class":778},"  clusterIP",[263,2959,783],{"class":782},[263,2961,2962],{"class":789}," None",[263,2964,2965],{"class":870},"  # 使用 Headless Service\n",[263,2967,2968],{"class":265,"line":1193},[263,2969,2864],{"class":1734},[263,2971,2972,2974,2976],{"class":265,"line":1202},[263,2973,2216],{"class":778},[263,2975,783],{"class":782},[263,2977,2221],{"class":789},[263,2979,2980,2982,2984],{"class":265,"line":1209},[263,2981,2146],{"class":778},[263,2983,783],{"class":782},[263,2985,2986],{"class":789}," PersistentVolumeClaim\n",[263,2988,2989,2991],{"class":265,"line":1217},[263,2990,2235],{"class":778},[263,2992,805],{"class":782},[263,2994,2995,2997,2999],{"class":265,"line":1225},[263,2996,2242],{"class":778},[263,2998,783],{"class":782},[263,3000,2832],{"class":789},[263,3002,3003,3005,3007],{"class":265,"line":1233},[263,3004,2309],{"class":778},[263,3006,783],{"class":782},[263,3008,2247],{"class":789},[263,3010,3011,3013],{"class":265,"line":1241},[263,3012,2560],{"class":778},[263,3014,805],{"class":782},[263,3016,3017,3020],{"class":265,"line":1249},[263,3018,3019],{"class":778},"  accessModes",[263,3021,805],{"class":782},[263,3023,3024,3026],{"class":265,"line":1257},[263,3025,2936],{"class":782},[263,3027,3028],{"class":789}," ReadWriteOnce\n",[263,3030,3031,3034],{"class":265,"line":1265},[263,3032,3033],{"class":778},"  resources",[263,3035,805],{"class":782},[263,3037,3038,3041],{"class":265,"line":1273},[263,3039,3040],{"class":778},"    requests",[263,3042,805],{"class":782},[263,3044,3045,3048,3050],{"class":265,"line":1280},[263,3046,3047],{"class":778},"      storage",[263,3049,783],{"class":782},[263,3051,3052],{"class":789}," 20Gi\n",[248,3054,3056],{"id":3055},"_325-redis-部署","3.2.5 Redis 部署",[253,3058,3060],{"className":769,"code":3059,"language":771,"meta":258,"style":258},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: redis\n  namespace: tagtag\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: redis\n  template:\n    metadata:\n      labels:\n        app: redis\n    spec:\n      containers:\n      - name: redis\n        image: redis:7.0-alpine\n        env:\n        - name: REDIS_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: tagtag-secrets\n              key: redis-password\n        ports:\n        - containerPort: 6379\n        volumeMounts:\n        - name: redis-data\n          mountPath: /data\n        command:\n        - redis-server\n        - --requirepass\n        - $(REDIS_PASSWORD)\n        - --appendonly\n        - \"yes\"\n      volumes:\n      - name: redis-data\n        persistentVolumeClaim:\n          claimName: redis-pvc\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: redis\n  namespace: tagtag\nspec:\n  selector:\n    app: redis\n  ports:\n  - port: 6379\n    targetPort: 6379\n---\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: redis-pvc\n  namespace: tagtag\nspec:\n  accessModes:\n  - ReadWriteOnce\n  resources:\n    requests:\n      storage: 10Gi\n",[260,3061,3062,3070,3078,3084,3092,3100,3106,3114,3120,3126,3134,3140,3146,3152,3160,3166,3172,3182,3190,3196,3207,3213,3219,3227,3236,3242,3253,3259,3270,3279,3286,3293,3300,3307,3314,3325,3331,3341,3347,3356,3360,3368,3376,3382,3390,3398,3404,3410,3418,3424,3434,3442,3446,3454,3462,3468,3476,3484,3490,3496,3502,3508,3514],{"__ignoreMap":258},[263,3063,3064,3066,3068],{"class":265,"line":266},[263,3065,2216],{"class":778},[263,3067,783],{"class":782},[263,3069,2524],{"class":789},[263,3071,3072,3074,3076],{"class":265,"line":272},[263,3073,2146],{"class":778},[263,3075,783],{"class":782},[263,3077,2533],{"class":789},[263,3079,3080,3082],{"class":265,"line":278},[263,3081,2235],{"class":778},[263,3083,805],{"class":782},[263,3085,3086,3088,3090],{"class":265,"line":285},[263,3087,2242],{"class":778},[263,3089,783],{"class":782},[263,3091,1342],{"class":789},[263,3093,3094,3096,3098],{"class":265,"line":291},[263,3095,2309],{"class":778},[263,3097,783],{"class":782},[263,3099,2247],{"class":789},[263,3101,3102,3104],{"class":265,"line":297},[263,3103,2560],{"class":778},[263,3105,805],{"class":782},[263,3107,3108,3110,3112],{"class":265,"line":302},[263,3109,2567],{"class":778},[263,3111,783],{"class":782},[263,3113,2572],{"class":1947},[263,3115,3116,3118],{"class":265,"line":308},[263,3117,2577],{"class":778},[263,3119,805],{"class":782},[263,3121,3122,3124],{"class":265,"line":314},[263,3123,2584],{"class":778},[263,3125,805],{"class":782},[263,3127,3128,3130,3132],{"class":265,"line":320},[263,3129,2591],{"class":778},[263,3131,783],{"class":782},[263,3133,1342],{"class":789},[263,3135,3136,3138],{"class":265,"line":325},[263,3137,2600],{"class":778},[263,3139,805],{"class":782},[263,3141,3142,3144],{"class":265,"line":331},[263,3143,2607],{"class":778},[263,3145,805],{"class":782},[263,3147,3148,3150],{"class":265,"line":337},[263,3149,2614],{"class":778},[263,3151,805],{"class":782},[263,3153,3154,3156,3158],{"class":265,"line":342},[263,3155,2621],{"class":778},[263,3157,783],{"class":782},[263,3159,1342],{"class":789},[263,3161,3162,3164],{"class":265,"line":348},[263,3163,2630],{"class":778},[263,3165,805],{"class":782},[263,3167,3168,3170],{"class":265,"line":354},[263,3169,2637],{"class":778},[263,3171,805],{"class":782},[263,3173,3174,3176,3178,3180],{"class":265,"line":359},[263,3175,920],{"class":782},[263,3177,2646],{"class":778},[263,3179,783],{"class":782},[263,3181,1342],{"class":789},[263,3183,3184,3186,3188],{"class":265,"line":365},[263,3185,2655],{"class":778},[263,3187,783],{"class":782},[263,3189,1041],{"class":789},[263,3191,3192,3194],{"class":265,"line":371},[263,3193,2664],{"class":778},[263,3195,805],{"class":782},[263,3197,3198,3200,3202,3204],{"class":265,"line":376},[263,3199,2671],{"class":782},[263,3201,2646],{"class":778},[263,3203,783],{"class":782},[263,3205,3206],{"class":789}," REDIS_PASSWORD\n",[263,3208,3209,3211],{"class":265,"line":382},[263,3210,2683],{"class":778},[263,3212,805],{"class":782},[263,3214,3215,3217],{"class":265,"line":388},[263,3216,2690],{"class":778},[263,3218,805],{"class":782},[263,3220,3221,3223,3225],{"class":265,"line":393},[263,3222,2697],{"class":778},[263,3224,783],{"class":782},[263,3226,2452],{"class":789},[263,3228,3229,3231,3233],{"class":265,"line":398},[263,3230,2706],{"class":778},[263,3232,783],{"class":782},[263,3234,3235],{"class":789}," redis-password\n",[263,3237,3238,3240],{"class":265,"line":403},[263,3239,2736],{"class":778},[263,3241,805],{"class":782},[263,3243,3244,3246,3248,3250],{"class":265,"line":408},[263,3245,2671],{"class":782},[263,3247,2745],{"class":778},[263,3249,783],{"class":782},[263,3251,3252],{"class":1947}," 6379\n",[263,3254,3255,3257],{"class":265,"line":414},[263,3256,2755],{"class":778},[263,3258,805],{"class":782},[263,3260,3261,3263,3265,3267],{"class":265,"line":420},[263,3262,2671],{"class":782},[263,3264,2646],{"class":778},[263,3266,783],{"class":782},[263,3268,3269],{"class":789}," redis-data\n",[263,3271,3272,3274,3276],{"class":265,"line":425},[263,3273,2773],{"class":778},[263,3275,783],{"class":782},[263,3277,3278],{"class":789}," /data\n",[263,3280,3281,3284],{"class":265,"line":431},[263,3282,3283],{"class":778},"        command",[263,3285,805],{"class":782},[263,3287,3288,3290],{"class":265,"line":437},[263,3289,2671],{"class":782},[263,3291,3292],{"class":789}," redis-server\n",[263,3294,3295,3297],{"class":265,"line":443},[263,3296,2671],{"class":782},[263,3298,3299],{"class":789}," --requirepass\n",[263,3301,3302,3304],{"class":265,"line":448},[263,3303,2671],{"class":782},[263,3305,3306],{"class":789}," $(REDIS_PASSWORD)\n",[263,3308,3309,3311],{"class":265,"line":454},[263,3310,2671],{"class":782},[263,3312,3313],{"class":789}," --appendonly\n",[263,3315,3316,3318,3320,3323],{"class":265,"line":460},[263,3317,2671],{"class":782},[263,3319,958],{"class":782},[263,3321,3322],{"class":789},"yes",[263,3324,964],{"class":782},[263,3326,3327,3329],{"class":265,"line":465},[263,3328,2803],{"class":778},[263,3330,805],{"class":782},[263,3332,3333,3335,3337,3339],{"class":265,"line":471},[263,3334,920],{"class":782},[263,3336,2646],{"class":778},[263,3338,783],{"class":782},[263,3340,3269],{"class":789},[263,3342,3343,3345],{"class":265,"line":1061},[263,3344,2820],{"class":778},[263,3346,805],{"class":782},[263,3348,3349,3351,3353],{"class":265,"line":1068},[263,3350,2827],{"class":778},[263,3352,783],{"class":782},[263,3354,3355],{"class":789}," redis-pvc\n",[263,3357,3358],{"class":265,"line":1076},[263,3359,2864],{"class":1734},[263,3361,3362,3364,3366],{"class":265,"line":1083},[263,3363,2216],{"class":778},[263,3365,783],{"class":782},[263,3367,2221],{"class":789},[263,3369,3370,3372,3374],{"class":265,"line":1095},[263,3371,2146],{"class":778},[263,3373,783],{"class":782},[263,3375,2881],{"class":789},[263,3377,3378,3380],{"class":265,"line":1102},[263,3379,2235],{"class":778},[263,3381,805],{"class":782},[263,3383,3384,3386,3388],{"class":265,"line":1110},[263,3385,2242],{"class":778},[263,3387,783],{"class":782},[263,3389,1342],{"class":789},[263,3391,3392,3394,3396],{"class":265,"line":1117},[263,3393,2309],{"class":778},[263,3395,783],{"class":782},[263,3397,2247],{"class":789},[263,3399,3400,3402],{"class":265,"line":1124},[263,3401,2560],{"class":778},[263,3403,805],{"class":782},[263,3405,3406,3408],{"class":265,"line":1134},[263,3407,2577],{"class":778},[263,3409,805],{"class":782},[263,3411,3412,3414,3416],{"class":265,"line":1139},[263,3413,2920],{"class":778},[263,3415,783],{"class":782},[263,3417,1342],{"class":789},[263,3419,3420,3422],{"class":265,"line":1145},[263,3421,2929],{"class":778},[263,3423,805],{"class":782},[263,3425,3426,3428,3430,3432],{"class":265,"line":1153},[263,3427,2936],{"class":782},[263,3429,2939],{"class":778},[263,3431,783],{"class":782},[263,3433,3252],{"class":1947},[263,3435,3436,3438,3440],{"class":265,"line":1161},[263,3437,2948],{"class":778},[263,3439,783],{"class":782},[263,3441,3252],{"class":1947},[263,3443,3444],{"class":265,"line":1172},[263,3445,2864],{"class":1734},[263,3447,3448,3450,3452],{"class":265,"line":1183},[263,3449,2216],{"class":778},[263,3451,783],{"class":782},[263,3453,2221],{"class":789},[263,3455,3456,3458,3460],{"class":265,"line":1193},[263,3457,2146],{"class":778},[263,3459,783],{"class":782},[263,3461,2986],{"class":789},[263,3463,3464,3466],{"class":265,"line":1202},[263,3465,2235],{"class":778},[263,3467,805],{"class":782},[263,3469,3470,3472,3474],{"class":265,"line":1209},[263,3471,2242],{"class":778},[263,3473,783],{"class":782},[263,3475,3355],{"class":789},[263,3477,3478,3480,3482],{"class":265,"line":1217},[263,3479,2309],{"class":778},[263,3481,783],{"class":782},[263,3483,2247],{"class":789},[263,3485,3486,3488],{"class":265,"line":1225},[263,3487,2560],{"class":778},[263,3489,805],{"class":782},[263,3491,3492,3494],{"class":265,"line":1233},[263,3493,3019],{"class":778},[263,3495,805],{"class":782},[263,3497,3498,3500],{"class":265,"line":1241},[263,3499,2936],{"class":782},[263,3501,3028],{"class":789},[263,3503,3504,3506],{"class":265,"line":1249},[263,3505,3033],{"class":778},[263,3507,805],{"class":782},[263,3509,3510,3512],{"class":265,"line":1257},[263,3511,3040],{"class":778},[263,3513,805],{"class":782},[263,3515,3516,3518,3520],{"class":265,"line":1265},[263,3517,3047],{"class":778},[263,3519,783],{"class":782},[263,3521,3522],{"class":789}," 10Gi\n",[248,3524,3526],{"id":3525},"_326-后端应用部署","3.2.6 后端应用部署",[253,3528,3530],{"className":769,"code":3529,"language":771,"meta":258,"style":258},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: backend\n  namespace: tagtag\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: backend\n  template:\n    metadata:\n      labels:\n        app: backend\n    spec:\n      containers:\n      - name: backend\n        image: tagtag/backend:latest\n        env:\n        - name: MYSQL_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: tagtag-secrets\n              key: mysql-password\n        - name: REDIS_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: tagtag-secrets\n              key: redis-password\n        - name: JWT_SECRET\n          valueFrom:\n            secretKeyRef:\n              name: tagtag-secrets\n              key: jwt-secret\n        ports:\n        - containerPort: 8080\n        livenessProbe:\n          httpGet:\n            path: /api/actuator/health/liveness\n            port: 8080\n          initialDelaySeconds: 60\n          periodSeconds: 30\n        readinessProbe:\n          httpGet:\n            path: /api/actuator/health/readiness\n            port: 8080\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        resources:\n          requests:\n            memory: \"4Gi\"\n            cpu: \"2\"\n          limits:\n            memory: \"8Gi\"\n            cpu: \"4\"\n        volumeMounts:\n        - name: logs\n          mountPath: /app/logs\n        - name: config\n          mountPath: /app/config\n      volumes:\n      - name: logs\n        emptyDir: {}\n      - name: config\n        configMap:\n          name: tagtag-config\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: backend\n  namespace: tagtag\nspec:\n  selector:\n    app: backend\n  ports:\n  - port: 8080\n    targetPort: 8080\n  type: ClusterIP\n",[260,3531,3532,3540,3548,3554,3562,3570,3576,3585,3591,3597,3605,3611,3617,3623,3631,3637,3643,3653,3662,3668,3679,3685,3691,3699,3707,3717,3723,3729,3737,3745,3756,3762,3768,3776,3785,3791,3802,3809,3816,3826,3835,3845,3855,3862,3868,3877,3885,3893,3902,3909,3916,3930,3944,3951,3964,3977,3983,3994,4003,4014,4023,4029,4039,4049,4059,4065,4073,4077,4085,4093,4099,4107,4115,4121,4127,4135,4141,4151,4159],{"__ignoreMap":258},[263,3533,3534,3536,3538],{"class":265,"line":266},[263,3535,2216],{"class":778},[263,3537,783],{"class":782},[263,3539,2524],{"class":789},[263,3541,3542,3544,3546],{"class":265,"line":272},[263,3543,2146],{"class":778},[263,3545,783],{"class":782},[263,3547,2533],{"class":789},[263,3549,3550,3552],{"class":265,"line":278},[263,3551,2235],{"class":778},[263,3553,805],{"class":782},[263,3555,3556,3558,3560],{"class":265,"line":285},[263,3557,2242],{"class":778},[263,3559,783],{"class":782},[263,3561,1454],{"class":789},[263,3563,3564,3566,3568],{"class":265,"line":291},[263,3565,2309],{"class":778},[263,3567,783],{"class":782},[263,3569,2247],{"class":789},[263,3571,3572,3574],{"class":265,"line":297},[263,3573,2560],{"class":778},[263,3575,805],{"class":782},[263,3577,3578,3580,3582],{"class":265,"line":302},[263,3579,2567],{"class":778},[263,3581,783],{"class":782},[263,3583,3584],{"class":1947}," 3\n",[263,3586,3587,3589],{"class":265,"line":308},[263,3588,2577],{"class":778},[263,3590,805],{"class":782},[263,3592,3593,3595],{"class":265,"line":314},[263,3594,2584],{"class":778},[263,3596,805],{"class":782},[263,3598,3599,3601,3603],{"class":265,"line":320},[263,3600,2591],{"class":778},[263,3602,783],{"class":782},[263,3604,1454],{"class":789},[263,3606,3607,3609],{"class":265,"line":325},[263,3608,2600],{"class":778},[263,3610,805],{"class":782},[263,3612,3613,3615],{"class":265,"line":331},[263,3614,2607],{"class":778},[263,3616,805],{"class":782},[263,3618,3619,3621],{"class":265,"line":337},[263,3620,2614],{"class":778},[263,3622,805],{"class":782},[263,3624,3625,3627,3629],{"class":265,"line":342},[263,3626,2621],{"class":778},[263,3628,783],{"class":782},[263,3630,1454],{"class":789},[263,3632,3633,3635],{"class":265,"line":348},[263,3634,2630],{"class":778},[263,3636,805],{"class":782},[263,3638,3639,3641],{"class":265,"line":354},[263,3640,2637],{"class":778},[263,3642,805],{"class":782},[263,3644,3645,3647,3649,3651],{"class":265,"line":359},[263,3646,920],{"class":782},[263,3648,2646],{"class":778},[263,3650,783],{"class":782},[263,3652,1454],{"class":789},[263,3654,3655,3657,3659],{"class":265,"line":365},[263,3656,2655],{"class":778},[263,3658,783],{"class":782},[263,3660,3661],{"class":789}," tagtag/backend:latest\n",[263,3663,3664,3666],{"class":265,"line":371},[263,3665,2664],{"class":778},[263,3667,805],{"class":782},[263,3669,3670,3672,3674,3676],{"class":265,"line":376},[263,3671,2671],{"class":782},[263,3673,2646],{"class":778},[263,3675,783],{"class":782},[263,3677,3678],{"class":789}," MYSQL_PASSWORD\n",[263,3680,3681,3683],{"class":265,"line":382},[263,3682,2683],{"class":778},[263,3684,805],{"class":782},[263,3686,3687,3689],{"class":265,"line":388},[263,3688,2690],{"class":778},[263,3690,805],{"class":782},[263,3692,3693,3695,3697],{"class":265,"line":393},[263,3694,2697],{"class":778},[263,3696,783],{"class":782},[263,3698,2452],{"class":789},[263,3700,3701,3703,3705],{"class":265,"line":398},[263,3702,2706],{"class":778},[263,3704,783],{"class":782},[263,3706,2711],{"class":789},[263,3708,3709,3711,3713,3715],{"class":265,"line":403},[263,3710,2671],{"class":782},[263,3712,2646],{"class":778},[263,3714,783],{"class":782},[263,3716,3206],{"class":789},[263,3718,3719,3721],{"class":265,"line":408},[263,3720,2683],{"class":778},[263,3722,805],{"class":782},[263,3724,3725,3727],{"class":265,"line":414},[263,3726,2690],{"class":778},[263,3728,805],{"class":782},[263,3730,3731,3733,3735],{"class":265,"line":420},[263,3732,2697],{"class":778},[263,3734,783],{"class":782},[263,3736,2452],{"class":789},[263,3738,3739,3741,3743],{"class":265,"line":425},[263,3740,2706],{"class":778},[263,3742,783],{"class":782},[263,3744,3235],{"class":789},[263,3746,3747,3749,3751,3753],{"class":265,"line":431},[263,3748,2671],{"class":782},[263,3750,2646],{"class":778},[263,3752,783],{"class":782},[263,3754,3755],{"class":789}," JWT_SECRET\n",[263,3757,3758,3760],{"class":265,"line":437},[263,3759,2683],{"class":778},[263,3761,805],{"class":782},[263,3763,3764,3766],{"class":265,"line":443},[263,3765,2690],{"class":778},[263,3767,805],{"class":782},[263,3769,3770,3772,3774],{"class":265,"line":448},[263,3771,2697],{"class":778},[263,3773,783],{"class":782},[263,3775,2452],{"class":789},[263,3777,3778,3780,3782],{"class":265,"line":454},[263,3779,2706],{"class":778},[263,3781,783],{"class":782},[263,3783,3784],{"class":789}," jwt-secret\n",[263,3786,3787,3789],{"class":265,"line":460},[263,3788,2736],{"class":778},[263,3790,805],{"class":782},[263,3792,3793,3795,3797,3799],{"class":265,"line":465},[263,3794,2671],{"class":782},[263,3796,2745],{"class":778},[263,3798,783],{"class":782},[263,3800,3801],{"class":1947}," 8080\n",[263,3803,3804,3807],{"class":265,"line":471},[263,3805,3806],{"class":778},"        livenessProbe",[263,3808,805],{"class":782},[263,3810,3811,3814],{"class":265,"line":1061},[263,3812,3813],{"class":778},"          httpGet",[263,3815,805],{"class":782},[263,3817,3818,3821,3823],{"class":265,"line":1068},[263,3819,3820],{"class":778},"            path",[263,3822,783],{"class":782},[263,3824,3825],{"class":789}," /api/actuator/health/liveness\n",[263,3827,3828,3831,3833],{"class":265,"line":1076},[263,3829,3830],{"class":778},"            port",[263,3832,783],{"class":782},[263,3834,3801],{"class":1947},[263,3836,3837,3840,3842],{"class":265,"line":1083},[263,3838,3839],{"class":778},"          initialDelaySeconds",[263,3841,783],{"class":782},[263,3843,3844],{"class":1947}," 60\n",[263,3846,3847,3850,3852],{"class":265,"line":1095},[263,3848,3849],{"class":778},"          periodSeconds",[263,3851,783],{"class":782},[263,3853,3854],{"class":1947}," 30\n",[263,3856,3857,3860],{"class":265,"line":1102},[263,3858,3859],{"class":778},"        readinessProbe",[263,3861,805],{"class":782},[263,3863,3864,3866],{"class":265,"line":1110},[263,3865,3813],{"class":778},[263,3867,805],{"class":782},[263,3869,3870,3872,3874],{"class":265,"line":1117},[263,3871,3820],{"class":778},[263,3873,783],{"class":782},[263,3875,3876],{"class":789}," /api/actuator/health/readiness\n",[263,3878,3879,3881,3883],{"class":265,"line":1124},[263,3880,3830],{"class":778},[263,3882,783],{"class":782},[263,3884,3801],{"class":1947},[263,3886,3887,3889,3891],{"class":265,"line":1134},[263,3888,3839],{"class":778},[263,3890,783],{"class":782},[263,3892,3854],{"class":1947},[263,3894,3895,3897,3899],{"class":265,"line":1139},[263,3896,3849],{"class":778},[263,3898,783],{"class":782},[263,3900,3901],{"class":1947}," 10\n",[263,3903,3904,3907],{"class":265,"line":1145},[263,3905,3906],{"class":778},"        resources",[263,3908,805],{"class":782},[263,3910,3911,3914],{"class":265,"line":1153},[263,3912,3913],{"class":778},"          requests",[263,3915,805],{"class":782},[263,3917,3918,3921,3923,3925,3928],{"class":265,"line":1161},[263,3919,3920],{"class":778},"            memory",[263,3922,783],{"class":782},[263,3924,958],{"class":782},[263,3926,3927],{"class":789},"4Gi",[263,3929,964],{"class":782},[263,3931,3932,3935,3937,3939,3942],{"class":265,"line":1172},[263,3933,3934],{"class":778},"            cpu",[263,3936,783],{"class":782},[263,3938,958],{"class":782},[263,3940,3941],{"class":789},"2",[263,3943,964],{"class":782},[263,3945,3946,3949],{"class":265,"line":1183},[263,3947,3948],{"class":778},"          limits",[263,3950,805],{"class":782},[263,3952,3953,3955,3957,3959,3962],{"class":265,"line":1193},[263,3954,3920],{"class":778},[263,3956,783],{"class":782},[263,3958,958],{"class":782},[263,3960,3961],{"class":789},"8Gi",[263,3963,964],{"class":782},[263,3965,3966,3968,3970,3972,3975],{"class":265,"line":1202},[263,3967,3934],{"class":778},[263,3969,783],{"class":782},[263,3971,958],{"class":782},[263,3973,3974],{"class":789},"4",[263,3976,964],{"class":782},[263,3978,3979,3981],{"class":265,"line":1209},[263,3980,2755],{"class":778},[263,3982,805],{"class":782},[263,3984,3985,3987,3989,3991],{"class":265,"line":1217},[263,3986,2671],{"class":782},[263,3988,2646],{"class":778},[263,3990,783],{"class":782},[263,3992,3993],{"class":789}," logs\n",[263,3995,3996,3998,4000],{"class":265,"line":1225},[263,3997,2773],{"class":778},[263,3999,783],{"class":782},[263,4001,4002],{"class":789}," /app/logs\n",[263,4004,4005,4007,4009,4011],{"class":265,"line":1233},[263,4006,2671],{"class":782},[263,4008,2646],{"class":778},[263,4010,783],{"class":782},[263,4012,4013],{"class":789}," config\n",[263,4015,4016,4018,4020],{"class":265,"line":1241},[263,4017,2773],{"class":778},[263,4019,783],{"class":782},[263,4021,4022],{"class":789}," /app/config\n",[263,4024,4025,4027],{"class":265,"line":1249},[263,4026,2803],{"class":778},[263,4028,805],{"class":782},[263,4030,4031,4033,4035,4037],{"class":265,"line":1257},[263,4032,920],{"class":782},[263,4034,2646],{"class":778},[263,4036,783],{"class":782},[263,4038,3993],{"class":789},[263,4040,4041,4044,4046],{"class":265,"line":1265},[263,4042,4043],{"class":778},"        emptyDir",[263,4045,783],{"class":782},[263,4047,4048],{"class":782}," {}\n",[263,4050,4051,4053,4055,4057],{"class":265,"line":1273},[263,4052,920],{"class":782},[263,4054,2646],{"class":778},[263,4056,783],{"class":782},[263,4058,4013],{"class":789},[263,4060,4061,4063],{"class":265,"line":1280},[263,4062,2847],{"class":778},[263,4064,805],{"class":782},[263,4066,4067,4069,4071],{"class":265,"line":1292},[263,4068,2854],{"class":778},[263,4070,783],{"class":782},[263,4072,2304],{"class":789},[263,4074,4075],{"class":265,"line":1299},[263,4076,2864],{"class":1734},[263,4078,4079,4081,4083],{"class":265,"line":1307},[263,4080,2216],{"class":778},[263,4082,783],{"class":782},[263,4084,2221],{"class":789},[263,4086,4087,4089,4091],{"class":265,"line":1314},[263,4088,2146],{"class":778},[263,4090,783],{"class":782},[263,4092,2881],{"class":789},[263,4094,4095,4097],{"class":265,"line":1321},[263,4096,2235],{"class":778},[263,4098,805],{"class":782},[263,4100,4101,4103,4105],{"class":265,"line":1329},[263,4102,2242],{"class":778},[263,4104,783],{"class":782},[263,4106,1454],{"class":789},[263,4108,4109,4111,4113],{"class":265,"line":1337},[263,4110,2309],{"class":778},[263,4112,783],{"class":782},[263,4114,2247],{"class":789},[263,4116,4117,4119],{"class":265,"line":1345},[263,4118,2560],{"class":778},[263,4120,805],{"class":782},[263,4122,4123,4125],{"class":265,"line":1350},[263,4124,2577],{"class":778},[263,4126,805],{"class":782},[263,4128,4129,4131,4133],{"class":265,"line":1356},[263,4130,2920],{"class":778},[263,4132,783],{"class":782},[263,4134,1454],{"class":789},[263,4136,4137,4139],{"class":265,"line":1364},[263,4138,2929],{"class":778},[263,4140,805],{"class":782},[263,4142,4143,4145,4147,4149],{"class":265,"line":1371},[263,4144,2936],{"class":782},[263,4146,2939],{"class":778},[263,4148,783],{"class":782},[263,4150,3801],{"class":1947},[263,4152,4153,4155,4157],{"class":265,"line":1381},[263,4154,2948],{"class":778},[263,4156,783],{"class":782},[263,4158,3801],{"class":1947},[263,4160,4161,4164,4166],{"class":265,"line":1390},[263,4162,4163],{"class":778},"  type",[263,4165,783],{"class":782},[263,4167,4168],{"class":789}," ClusterIP\n",[248,4170,4172],{"id":4171},"_327-前端应用部署","3.2.7 前端应用部署",[253,4174,4176],{"className":769,"code":4175,"language":771,"meta":258,"style":258},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: frontend\n  namespace: tagtag\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: frontend\n  template:\n    metadata:\n      labels:\n        app: frontend\n    spec:\n      containers:\n      - name: frontend\n        image: tagtag/frontend:latest\n        ports:\n        - containerPort: 80\n        livenessProbe:\n          httpGet:\n            path: /\n            port: 80\n          initialDelaySeconds: 30\n          periodSeconds: 30\n        readinessProbe:\n          httpGet:\n            path: /\n            port: 80\n          initialDelaySeconds: 10\n          periodSeconds: 10\n        resources:\n          requests:\n            memory: \"512Mi\"\n            cpu: \"250m\"\n          limits:\n            memory: \"1Gi\"\n            cpu: \"500m\"\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: frontend\n  namespace: tagtag\nspec:\n  selector:\n    app: frontend\n  ports:\n  - port: 80\n    targetPort: 80\n  type: ClusterIP\n",[260,4177,4178,4186,4194,4200,4208,4216,4222,4230,4236,4242,4250,4256,4262,4268,4276,4282,4288,4298,4307,4313,4324,4330,4336,4345,4353,4361,4369,4375,4381,4389,4397,4405,4413,4419,4425,4438,4451,4457,4470,4483,4487,4495,4503,4509,4517,4525,4531,4537,4545,4551,4561,4569],{"__ignoreMap":258},[263,4179,4180,4182,4184],{"class":265,"line":266},[263,4181,2216],{"class":778},[263,4183,783],{"class":782},[263,4185,2524],{"class":789},[263,4187,4188,4190,4192],{"class":265,"line":272},[263,4189,2146],{"class":778},[263,4191,783],{"class":782},[263,4193,2533],{"class":789},[263,4195,4196,4198],{"class":265,"line":278},[263,4197,2235],{"class":778},[263,4199,805],{"class":782},[263,4201,4202,4204,4206],{"class":265,"line":285},[263,4203,2242],{"class":778},[263,4205,783],{"class":782},[263,4207,1846],{"class":789},[263,4209,4210,4212,4214],{"class":265,"line":291},[263,4211,2309],{"class":778},[263,4213,783],{"class":782},[263,4215,2247],{"class":789},[263,4217,4218,4220],{"class":265,"line":297},[263,4219,2560],{"class":778},[263,4221,805],{"class":782},[263,4223,4224,4226,4228],{"class":265,"line":302},[263,4225,2567],{"class":778},[263,4227,783],{"class":782},[263,4229,3584],{"class":1947},[263,4231,4232,4234],{"class":265,"line":308},[263,4233,2577],{"class":778},[263,4235,805],{"class":782},[263,4237,4238,4240],{"class":265,"line":314},[263,4239,2584],{"class":778},[263,4241,805],{"class":782},[263,4243,4244,4246,4248],{"class":265,"line":320},[263,4245,2591],{"class":778},[263,4247,783],{"class":782},[263,4249,1846],{"class":789},[263,4251,4252,4254],{"class":265,"line":325},[263,4253,2600],{"class":778},[263,4255,805],{"class":782},[263,4257,4258,4260],{"class":265,"line":331},[263,4259,2607],{"class":778},[263,4261,805],{"class":782},[263,4263,4264,4266],{"class":265,"line":337},[263,4265,2614],{"class":778},[263,4267,805],{"class":782},[263,4269,4270,4272,4274],{"class":265,"line":342},[263,4271,2621],{"class":778},[263,4273,783],{"class":782},[263,4275,1846],{"class":789},[263,4277,4278,4280],{"class":265,"line":348},[263,4279,2630],{"class":778},[263,4281,805],{"class":782},[263,4283,4284,4286],{"class":265,"line":354},[263,4285,2637],{"class":778},[263,4287,805],{"class":782},[263,4289,4290,4292,4294,4296],{"class":265,"line":359},[263,4291,920],{"class":782},[263,4293,2646],{"class":778},[263,4295,783],{"class":782},[263,4297,1846],{"class":789},[263,4299,4300,4302,4304],{"class":265,"line":365},[263,4301,2655],{"class":778},[263,4303,783],{"class":782},[263,4305,4306],{"class":789}," tagtag/frontend:latest\n",[263,4308,4309,4311],{"class":265,"line":371},[263,4310,2736],{"class":778},[263,4312,805],{"class":782},[263,4314,4315,4317,4319,4321],{"class":265,"line":376},[263,4316,2671],{"class":782},[263,4318,2745],{"class":778},[263,4320,783],{"class":782},[263,4322,4323],{"class":1947}," 80\n",[263,4325,4326,4328],{"class":265,"line":382},[263,4327,3806],{"class":778},[263,4329,805],{"class":782},[263,4331,4332,4334],{"class":265,"line":388},[263,4333,3813],{"class":778},[263,4335,805],{"class":782},[263,4337,4338,4340,4342],{"class":265,"line":393},[263,4339,3820],{"class":778},[263,4341,783],{"class":782},[263,4343,4344],{"class":789}," /\n",[263,4346,4347,4349,4351],{"class":265,"line":398},[263,4348,3830],{"class":778},[263,4350,783],{"class":782},[263,4352,4323],{"class":1947},[263,4354,4355,4357,4359],{"class":265,"line":403},[263,4356,3839],{"class":778},[263,4358,783],{"class":782},[263,4360,3854],{"class":1947},[263,4362,4363,4365,4367],{"class":265,"line":408},[263,4364,3849],{"class":778},[263,4366,783],{"class":782},[263,4368,3854],{"class":1947},[263,4370,4371,4373],{"class":265,"line":414},[263,4372,3859],{"class":778},[263,4374,805],{"class":782},[263,4376,4377,4379],{"class":265,"line":420},[263,4378,3813],{"class":778},[263,4380,805],{"class":782},[263,4382,4383,4385,4387],{"class":265,"line":425},[263,4384,3820],{"class":778},[263,4386,783],{"class":782},[263,4388,4344],{"class":789},[263,4390,4391,4393,4395],{"class":265,"line":431},[263,4392,3830],{"class":778},[263,4394,783],{"class":782},[263,4396,4323],{"class":1947},[263,4398,4399,4401,4403],{"class":265,"line":437},[263,4400,3839],{"class":778},[263,4402,783],{"class":782},[263,4404,3901],{"class":1947},[263,4406,4407,4409,4411],{"class":265,"line":443},[263,4408,3849],{"class":778},[263,4410,783],{"class":782},[263,4412,3901],{"class":1947},[263,4414,4415,4417],{"class":265,"line":448},[263,4416,3906],{"class":778},[263,4418,805],{"class":782},[263,4420,4421,4423],{"class":265,"line":454},[263,4422,3913],{"class":778},[263,4424,805],{"class":782},[263,4426,4427,4429,4431,4433,4436],{"class":265,"line":460},[263,4428,3920],{"class":778},[263,4430,783],{"class":782},[263,4432,958],{"class":782},[263,4434,4435],{"class":789},"512Mi",[263,4437,964],{"class":782},[263,4439,4440,4442,4444,4446,4449],{"class":265,"line":465},[263,4441,3934],{"class":778},[263,4443,783],{"class":782},[263,4445,958],{"class":782},[263,4447,4448],{"class":789},"250m",[263,4450,964],{"class":782},[263,4452,4453,4455],{"class":265,"line":471},[263,4454,3948],{"class":778},[263,4456,805],{"class":782},[263,4458,4459,4461,4463,4465,4468],{"class":265,"line":1061},[263,4460,3920],{"class":778},[263,4462,783],{"class":782},[263,4464,958],{"class":782},[263,4466,4467],{"class":789},"1Gi",[263,4469,964],{"class":782},[263,4471,4472,4474,4476,4478,4481],{"class":265,"line":1068},[263,4473,3934],{"class":778},[263,4475,783],{"class":782},[263,4477,958],{"class":782},[263,4479,4480],{"class":789},"500m",[263,4482,964],{"class":782},[263,4484,4485],{"class":265,"line":1076},[263,4486,2864],{"class":1734},[263,4488,4489,4491,4493],{"class":265,"line":1083},[263,4490,2216],{"class":778},[263,4492,783],{"class":782},[263,4494,2221],{"class":789},[263,4496,4497,4499,4501],{"class":265,"line":1095},[263,4498,2146],{"class":778},[263,4500,783],{"class":782},[263,4502,2881],{"class":789},[263,4504,4505,4507],{"class":265,"line":1102},[263,4506,2235],{"class":778},[263,4508,805],{"class":782},[263,4510,4511,4513,4515],{"class":265,"line":1110},[263,4512,2242],{"class":778},[263,4514,783],{"class":782},[263,4516,1846],{"class":789},[263,4518,4519,4521,4523],{"class":265,"line":1117},[263,4520,2309],{"class":778},[263,4522,783],{"class":782},[263,4524,2247],{"class":789},[263,4526,4527,4529],{"class":265,"line":1124},[263,4528,2560],{"class":778},[263,4530,805],{"class":782},[263,4532,4533,4535],{"class":265,"line":1134},[263,4534,2577],{"class":778},[263,4536,805],{"class":782},[263,4538,4539,4541,4543],{"class":265,"line":1139},[263,4540,2920],{"class":778},[263,4542,783],{"class":782},[263,4544,1846],{"class":789},[263,4546,4547,4549],{"class":265,"line":1145},[263,4548,2929],{"class":778},[263,4550,805],{"class":782},[263,4552,4553,4555,4557,4559],{"class":265,"line":1153},[263,4554,2936],{"class":782},[263,4556,2939],{"class":778},[263,4558,783],{"class":782},[263,4560,4323],{"class":1947},[263,4562,4563,4565,4567],{"class":265,"line":1161},[263,4564,2948],{"class":778},[263,4566,783],{"class":782},[263,4568,4323],{"class":1947},[263,4570,4571,4573,4575],{"class":265,"line":1172},[263,4572,4163],{"class":778},[263,4574,783],{"class":782},[263,4576,4168],{"class":789},[248,4578,4580],{"id":4579},"_328-ingress-配置","3.2.8 Ingress 配置",[253,4582,4584],{"className":769,"code":4583,"language":771,"meta":258,"style":258},"apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: tagtag-ingress\n  namespace: tagtag\n  annotations:\n    nginx.ingress.kubernetes.io/rewrite-target: /\n    nginx.ingress.kubernetes.io/proxy-body-size: \"10m\"\nspec:\n  ingressClassName: nginx\n  rules:\n  - host: tagtag.your-domain.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: frontend\n            port:\n              number: 80\n      - path: /api\n        pathType: Prefix\n        backend:\n          service:\n            name: backend\n            port:\n              number: 8080\n",[260,4585,4586,4595,4604,4610,4619,4627,4634,4643,4657,4663,4673,4680,4692,4699,4706,4717,4727,4734,4741,4750,4756,4765,4776,4784,4790,4796,4804,4810],{"__ignoreMap":258},[263,4587,4588,4590,4592],{"class":265,"line":266},[263,4589,2216],{"class":778},[263,4591,783],{"class":782},[263,4593,4594],{"class":789}," networking.k8s.io/v1\n",[263,4596,4597,4599,4601],{"class":265,"line":272},[263,4598,2146],{"class":778},[263,4600,783],{"class":782},[263,4602,4603],{"class":789}," Ingress\n",[263,4605,4606,4608],{"class":265,"line":278},[263,4607,2235],{"class":778},[263,4609,805],{"class":782},[263,4611,4612,4614,4616],{"class":265,"line":285},[263,4613,2242],{"class":778},[263,4615,783],{"class":782},[263,4617,4618],{"class":789}," tagtag-ingress\n",[263,4620,4621,4623,4625],{"class":265,"line":291},[263,4622,2309],{"class":778},[263,4624,783],{"class":782},[263,4626,2247],{"class":789},[263,4628,4629,4632],{"class":265,"line":297},[263,4630,4631],{"class":778},"  annotations",[263,4633,805],{"class":782},[263,4635,4636,4639,4641],{"class":265,"line":302},[263,4637,4638],{"class":778},"    nginx.ingress.kubernetes.io/rewrite-target",[263,4640,783],{"class":782},[263,4642,4344],{"class":789},[263,4644,4645,4648,4650,4652,4655],{"class":265,"line":308},[263,4646,4647],{"class":778},"    nginx.ingress.kubernetes.io/proxy-body-size",[263,4649,783],{"class":782},[263,4651,958],{"class":782},[263,4653,4654],{"class":789},"10m",[263,4656,964],{"class":782},[263,4658,4659,4661],{"class":265,"line":314},[263,4660,2560],{"class":778},[263,4662,805],{"class":782},[263,4664,4665,4668,4670],{"class":265,"line":320},[263,4666,4667],{"class":778},"  ingressClassName",[263,4669,783],{"class":782},[263,4671,4672],{"class":789}," nginx\n",[263,4674,4675,4678],{"class":265,"line":325},[263,4676,4677],{"class":778},"  rules",[263,4679,805],{"class":782},[263,4681,4682,4684,4687,4689],{"class":265,"line":331},[263,4683,2936],{"class":782},[263,4685,4686],{"class":778}," host",[263,4688,783],{"class":782},[263,4690,4691],{"class":789}," tagtag.your-domain.com\n",[263,4693,4694,4697],{"class":265,"line":337},[263,4695,4696],{"class":778},"    http",[263,4698,805],{"class":782},[263,4700,4701,4704],{"class":265,"line":342},[263,4702,4703],{"class":778},"      paths",[263,4705,805],{"class":782},[263,4707,4708,4710,4713,4715],{"class":265,"line":348},[263,4709,920],{"class":782},[263,4711,4712],{"class":778}," path",[263,4714,783],{"class":782},[263,4716,4344],{"class":789},[263,4718,4719,4722,4724],{"class":265,"line":354},[263,4720,4721],{"class":778},"        pathType",[263,4723,783],{"class":782},[263,4725,4726],{"class":789}," Prefix\n",[263,4728,4729,4732],{"class":265,"line":359},[263,4730,4731],{"class":778},"        backend",[263,4733,805],{"class":782},[263,4735,4736,4739],{"class":265,"line":365},[263,4737,4738],{"class":778},"          service",[263,4740,805],{"class":782},[263,4742,4743,4746,4748],{"class":265,"line":371},[263,4744,4745],{"class":778},"            name",[263,4747,783],{"class":782},[263,4749,1846],{"class":789},[263,4751,4752,4754],{"class":265,"line":376},[263,4753,3830],{"class":778},[263,4755,805],{"class":782},[263,4757,4758,4761,4763],{"class":265,"line":382},[263,4759,4760],{"class":778},"              number",[263,4762,783],{"class":782},[263,4764,4323],{"class":1947},[263,4766,4767,4769,4771,4773],{"class":265,"line":388},[263,4768,920],{"class":782},[263,4770,4712],{"class":778},[263,4772,783],{"class":782},[263,4774,4775],{"class":789}," /api\n",[263,4777,4778,4780,4782],{"class":265,"line":393},[263,4779,4721],{"class":778},[263,4781,783],{"class":782},[263,4783,4726],{"class":789},[263,4785,4786,4788],{"class":265,"line":398},[263,4787,4731],{"class":778},[263,4789,805],{"class":782},[263,4791,4792,4794],{"class":265,"line":403},[263,4793,4738],{"class":778},[263,4795,805],{"class":782},[263,4797,4798,4800,4802],{"class":265,"line":408},[263,4799,4745],{"class":778},[263,4801,783],{"class":782},[263,4803,1454],{"class":789},[263,4805,4806,4808],{"class":265,"line":414},[263,4807,3830],{"class":778},[263,4809,805],{"class":782},[263,4811,4812,4814,4816],{"class":265,"line":420},[263,4813,4760],{"class":778},[263,4815,783],{"class":782},[263,4817,3801],{"class":1947},[122,4819,4821],{"id":4820},"_33-helm-chart-配置","3.3 Helm Chart 配置",[248,4823,4825],{"id":4824},"_331-chart-目录结构","3.3.1 Chart 目录结构",[253,4827,4832],{"className":4828,"code":4830,"language":4831},[4829],"language-text","tagtag-chart/\n├── Chart.yaml          # Chart 元数据\n├── values.yaml         # 默认配置值\n├── templates/          # 模板文件\n│   ├── _helpers.tpl    # 辅助函数\n│   ├── configmap.yaml  # ConfigMap 模板\n│   ├── secret.yaml     # Secret 模板\n│   ├── mysql/          # MySQL 相关模板\n│   ├── redis/          # Redis 相关模板\n│   ├── backend/        # 后端应用模板\n│   ├── frontend/       # 前端应用模板\n│   └── ingress.yaml    # Ingress 模板\n└── charts/             # 依赖 Chart\n","text",[260,4833,4830],{"__ignoreMap":258},[248,4835,4837],{"id":4836},"_332-chartyaml","3.3.2 Chart.yaml",[253,4839,4841],{"className":769,"code":4840,"language":771,"meta":258,"style":258},"apiVersion: v2\nname: tagtag\ndescription: A Helm chart for Tagtag Starter application\ntype: application\nversion: 1.0.0\nappVersion: \"1.0.0\"\ndependencies:\n  - name: mysql\n    version: \"8.8.2\"\n    repository: \"https://charts.bitnami.com/bitnami\"\n    condition: mysql.enabled\n  - name: redis\n    version: \"17.10.2\"\n    repository: \"https://charts.bitnami.com/bitnami\"\n    condition: redis.enabled\n",[260,4842,4843,4852,4861,4871,4880,4889,4903,4910,4920,4934,4948,4958,4968,4981,4993],{"__ignoreMap":258},[263,4844,4845,4847,4849],{"class":265,"line":266},[263,4846,2216],{"class":778},[263,4848,783],{"class":782},[263,4850,4851],{"class":789}," v2\n",[263,4853,4854,4857,4859],{"class":265,"line":272},[263,4855,4856],{"class":778},"name",[263,4858,783],{"class":782},[263,4860,2247],{"class":789},[263,4862,4863,4866,4868],{"class":265,"line":278},[263,4864,4865],{"class":778},"description",[263,4867,783],{"class":782},[263,4869,4870],{"class":789}," A Helm chart for Tagtag Starter application\n",[263,4872,4873,4875,4877],{"class":265,"line":285},[263,4874,2465],{"class":778},[263,4876,783],{"class":782},[263,4878,4879],{"class":789}," application\n",[263,4881,4882,4884,4886],{"class":265,"line":291},[263,4883,779],{"class":778},[263,4885,783],{"class":782},[263,4887,4888],{"class":1947}," 1.0.0\n",[263,4890,4891,4894,4896,4898,4901],{"class":265,"line":297},[263,4892,4893],{"class":778},"appVersion",[263,4895,783],{"class":782},[263,4897,958],{"class":782},[263,4899,4900],{"class":789},"1.0.0",[263,4902,964],{"class":782},[263,4904,4905,4908],{"class":265,"line":302},[263,4906,4907],{"class":778},"dependencies",[263,4909,805],{"class":782},[263,4911,4912,4914,4916,4918],{"class":265,"line":308},[263,4913,2936],{"class":782},[263,4915,2646],{"class":778},[263,4917,783],{"class":782},[263,4919,1334],{"class":789},[263,4921,4922,4925,4927,4929,4932],{"class":265,"line":314},[263,4923,4924],{"class":778},"    version",[263,4926,783],{"class":782},[263,4928,958],{"class":782},[263,4930,4931],{"class":789},"8.8.2",[263,4933,964],{"class":782},[263,4935,4936,4939,4941,4943,4946],{"class":265,"line":320},[263,4937,4938],{"class":778},"    repository",[263,4940,783],{"class":782},[263,4942,958],{"class":782},[263,4944,4945],{"class":789},"https://charts.bitnami.com/bitnami",[263,4947,964],{"class":782},[263,4949,4950,4953,4955],{"class":265,"line":325},[263,4951,4952],{"class":778},"    condition",[263,4954,783],{"class":782},[263,4956,4957],{"class":789}," mysql.enabled\n",[263,4959,4960,4962,4964,4966],{"class":265,"line":331},[263,4961,2936],{"class":782},[263,4963,2646],{"class":778},[263,4965,783],{"class":782},[263,4967,1342],{"class":789},[263,4969,4970,4972,4974,4976,4979],{"class":265,"line":337},[263,4971,4924],{"class":778},[263,4973,783],{"class":782},[263,4975,958],{"class":782},[263,4977,4978],{"class":789},"17.10.2",[263,4980,964],{"class":782},[263,4982,4983,4985,4987,4989,4991],{"class":265,"line":342},[263,4984,4938],{"class":778},[263,4986,783],{"class":782},[263,4988,958],{"class":782},[263,4990,4945],{"class":789},[263,4992,964],{"class":782},[263,4994,4995,4997,4999],{"class":265,"line":348},[263,4996,4952],{"class":778},[263,4998,783],{"class":782},[263,5000,5001],{"class":789}," redis.enabled\n",[248,5003,5005],{"id":5004},"_333-valuesyaml","3.3.3 values.yaml",[253,5007,5009],{"className":769,"code":5008,"language":771,"meta":258,"style":258},"# 全局配置\nglobal:\n  namespace: tagtag\n  imageRegistry: \"\"\n\n# 前端配置\nfrontend:\n  replicaCount: 3\n  image:\n    repository: tagtag/frontend\n    tag: latest\n    pullPolicy: IfNotPresent\n  resources:\n    requests:\n      memory: \"512Mi\"\n      cpu: \"250m\"\n    limits:\n      memory: \"1Gi\"\n      cpu: \"500m\"\n\n# 后端配置\nbackend:\n  replicaCount: 3\n  image:\n    repository: tagtag/backend\n    tag: latest\n    pullPolicy: IfNotPresent\n  resources:\n    requests:\n      memory: \"4Gi\"\n      cpu: \"2\"\n    limits:\n      memory: \"8Gi\"\n      cpu: \"4\"\n\n# MySQL 配置\nmysql:\n  enabled: true\n  auth:\n    rootPassword: password\n    database: tagtag\n  primary:\n    persistence:\n      size: 20Gi\n\n# Redis 配置\nredis:\n  enabled: true\n  auth:\n    password: password\n  master:\n    persistence:\n      size: 10Gi\n\n# Ingress 配置\ningress:\n  enabled: true\n  className: nginx\n  hosts:\n    - host: tagtag.your-domain.com\n      paths:\n        - path: /\n          pathType: Prefix\n        - path: /api\n          pathType: Prefix\n",[260,5010,5011,5016,5023,5031,5041,5045,5050,5057,5066,5073,5082,5092,5102,5108,5114,5127,5140,5147,5159,5171,5175,5180,5187,5195,5201,5210,5218,5226,5232,5238,5250,5262,5268,5280,5292,5296,5301,5308,5319,5326,5335,5344,5351,5358,5367,5371,5376,5383,5391,5397,5406,5413,5419,5427,5431,5436,5443,5451,5460,5467,5478,5484,5494,5503,5513],{"__ignoreMap":258},[263,5012,5013],{"class":265,"line":266},[263,5014,5015],{"class":870},"# 全局配置\n",[263,5017,5018,5021],{"class":265,"line":272},[263,5019,5020],{"class":778},"global",[263,5022,805],{"class":782},[263,5024,5025,5027,5029],{"class":265,"line":278},[263,5026,2309],{"class":778},[263,5028,783],{"class":782},[263,5030,2247],{"class":789},[263,5032,5033,5036,5038],{"class":265,"line":285},[263,5034,5035],{"class":778},"  imageRegistry",[263,5037,783],{"class":782},[263,5039,5040],{"class":782}," \"\"\n",[263,5042,5043],{"class":265,"line":291},[263,5044,282],{"emptyLinePlaceholder":281},[263,5046,5047],{"class":265,"line":297},[263,5048,5049],{"class":870},"# 前端配置\n",[263,5051,5052,5055],{"class":265,"line":302},[263,5053,5054],{"class":778},"frontend",[263,5056,805],{"class":782},[263,5058,5059,5062,5064],{"class":265,"line":308},[263,5060,5061],{"class":778},"  replicaCount",[263,5063,783],{"class":782},[263,5065,3584],{"class":1947},[263,5067,5068,5071],{"class":265,"line":314},[263,5069,5070],{"class":778},"  image",[263,5072,805],{"class":782},[263,5074,5075,5077,5079],{"class":265,"line":320},[263,5076,4938],{"class":778},[263,5078,783],{"class":782},[263,5080,5081],{"class":789}," tagtag/frontend\n",[263,5083,5084,5087,5089],{"class":265,"line":325},[263,5085,5086],{"class":778},"    tag",[263,5088,783],{"class":782},[263,5090,5091],{"class":789}," latest\n",[263,5093,5094,5097,5099],{"class":265,"line":331},[263,5095,5096],{"class":778},"    pullPolicy",[263,5098,783],{"class":782},[263,5100,5101],{"class":789}," IfNotPresent\n",[263,5103,5104,5106],{"class":265,"line":337},[263,5105,3033],{"class":778},[263,5107,805],{"class":782},[263,5109,5110,5112],{"class":265,"line":342},[263,5111,3040],{"class":778},[263,5113,805],{"class":782},[263,5115,5116,5119,5121,5123,5125],{"class":265,"line":348},[263,5117,5118],{"class":778},"      memory",[263,5120,783],{"class":782},[263,5122,958],{"class":782},[263,5124,4435],{"class":789},[263,5126,964],{"class":782},[263,5128,5129,5132,5134,5136,5138],{"class":265,"line":354},[263,5130,5131],{"class":778},"      cpu",[263,5133,783],{"class":782},[263,5135,958],{"class":782},[263,5137,4448],{"class":789},[263,5139,964],{"class":782},[263,5141,5142,5145],{"class":265,"line":359},[263,5143,5144],{"class":778},"    limits",[263,5146,805],{"class":782},[263,5148,5149,5151,5153,5155,5157],{"class":265,"line":365},[263,5150,5118],{"class":778},[263,5152,783],{"class":782},[263,5154,958],{"class":782},[263,5156,4467],{"class":789},[263,5158,964],{"class":782},[263,5160,5161,5163,5165,5167,5169],{"class":265,"line":371},[263,5162,5131],{"class":778},[263,5164,783],{"class":782},[263,5166,958],{"class":782},[263,5168,4480],{"class":789},[263,5170,964],{"class":782},[263,5172,5173],{"class":265,"line":376},[263,5174,282],{"emptyLinePlaceholder":281},[263,5176,5177],{"class":265,"line":382},[263,5178,5179],{"class":870},"# 后端配置\n",[263,5181,5182,5185],{"class":265,"line":388},[263,5183,5184],{"class":778},"backend",[263,5186,805],{"class":782},[263,5188,5189,5191,5193],{"class":265,"line":393},[263,5190,5061],{"class":778},[263,5192,783],{"class":782},[263,5194,3584],{"class":1947},[263,5196,5197,5199],{"class":265,"line":398},[263,5198,5070],{"class":778},[263,5200,805],{"class":782},[263,5202,5203,5205,5207],{"class":265,"line":403},[263,5204,4938],{"class":778},[263,5206,783],{"class":782},[263,5208,5209],{"class":789}," tagtag/backend\n",[263,5211,5212,5214,5216],{"class":265,"line":408},[263,5213,5086],{"class":778},[263,5215,783],{"class":782},[263,5217,5091],{"class":789},[263,5219,5220,5222,5224],{"class":265,"line":414},[263,5221,5096],{"class":778},[263,5223,783],{"class":782},[263,5225,5101],{"class":789},[263,5227,5228,5230],{"class":265,"line":420},[263,5229,3033],{"class":778},[263,5231,805],{"class":782},[263,5233,5234,5236],{"class":265,"line":425},[263,5235,3040],{"class":778},[263,5237,805],{"class":782},[263,5239,5240,5242,5244,5246,5248],{"class":265,"line":431},[263,5241,5118],{"class":778},[263,5243,783],{"class":782},[263,5245,958],{"class":782},[263,5247,3927],{"class":789},[263,5249,964],{"class":782},[263,5251,5252,5254,5256,5258,5260],{"class":265,"line":437},[263,5253,5131],{"class":778},[263,5255,783],{"class":782},[263,5257,958],{"class":782},[263,5259,3941],{"class":789},[263,5261,964],{"class":782},[263,5263,5264,5266],{"class":265,"line":443},[263,5265,5144],{"class":778},[263,5267,805],{"class":782},[263,5269,5270,5272,5274,5276,5278],{"class":265,"line":448},[263,5271,5118],{"class":778},[263,5273,783],{"class":782},[263,5275,958],{"class":782},[263,5277,3961],{"class":789},[263,5279,964],{"class":782},[263,5281,5282,5284,5286,5288,5290],{"class":265,"line":454},[263,5283,5131],{"class":778},[263,5285,783],{"class":782},[263,5287,958],{"class":782},[263,5289,3974],{"class":789},[263,5291,964],{"class":782},[263,5293,5294],{"class":265,"line":460},[263,5295,282],{"emptyLinePlaceholder":281},[263,5297,5298],{"class":265,"line":465},[263,5299,5300],{"class":870},"# MySQL 配置\n",[263,5302,5303,5306],{"class":265,"line":471},[263,5304,5305],{"class":778},"mysql",[263,5307,805],{"class":782},[263,5309,5310,5313,5315],{"class":265,"line":1061},[263,5311,5312],{"class":778},"  enabled",[263,5314,783],{"class":782},[263,5316,5318],{"class":5317},"sfNiH"," true\n",[263,5320,5321,5324],{"class":265,"line":1068},[263,5322,5323],{"class":778},"  auth",[263,5325,805],{"class":782},[263,5327,5328,5331,5333],{"class":265,"line":1076},[263,5329,5330],{"class":778},"    rootPassword",[263,5332,783],{"class":782},[263,5334,2487],{"class":789},[263,5336,5337,5340,5342],{"class":265,"line":1083},[263,5338,5339],{"class":778},"    database",[263,5341,783],{"class":782},[263,5343,2247],{"class":789},[263,5345,5346,5349],{"class":265,"line":1095},[263,5347,5348],{"class":778},"  primary",[263,5350,805],{"class":782},[263,5352,5353,5356],{"class":265,"line":1102},[263,5354,5355],{"class":778},"    persistence",[263,5357,805],{"class":782},[263,5359,5360,5363,5365],{"class":265,"line":1110},[263,5361,5362],{"class":778},"      size",[263,5364,783],{"class":782},[263,5366,3052],{"class":789},[263,5368,5369],{"class":265,"line":1117},[263,5370,282],{"emptyLinePlaceholder":281},[263,5372,5373],{"class":265,"line":1124},[263,5374,5375],{"class":870},"# Redis 配置\n",[263,5377,5378,5381],{"class":265,"line":1134},[263,5379,5380],{"class":778},"redis",[263,5382,805],{"class":782},[263,5384,5385,5387,5389],{"class":265,"line":1139},[263,5386,5312],{"class":778},[263,5388,783],{"class":782},[263,5390,5318],{"class":5317},[263,5392,5393,5395],{"class":265,"line":1145},[263,5394,5323],{"class":778},[263,5396,805],{"class":782},[263,5398,5399,5402,5404],{"class":265,"line":1153},[263,5400,5401],{"class":778},"    password",[263,5403,783],{"class":782},[263,5405,2487],{"class":789},[263,5407,5408,5411],{"class":265,"line":1161},[263,5409,5410],{"class":778},"  master",[263,5412,805],{"class":782},[263,5414,5415,5417],{"class":265,"line":1172},[263,5416,5355],{"class":778},[263,5418,805],{"class":782},[263,5420,5421,5423,5425],{"class":265,"line":1183},[263,5422,5362],{"class":778},[263,5424,783],{"class":782},[263,5426,3522],{"class":789},[263,5428,5429],{"class":265,"line":1193},[263,5430,282],{"emptyLinePlaceholder":281},[263,5432,5433],{"class":265,"line":1202},[263,5434,5435],{"class":870},"# Ingress 配置\n",[263,5437,5438,5441],{"class":265,"line":1209},[263,5439,5440],{"class":778},"ingress",[263,5442,805],{"class":782},[263,5444,5445,5447,5449],{"class":265,"line":1217},[263,5446,5312],{"class":778},[263,5448,783],{"class":782},[263,5450,5318],{"class":5317},[263,5452,5453,5456,5458],{"class":265,"line":1225},[263,5454,5455],{"class":778},"  className",[263,5457,783],{"class":782},[263,5459,4672],{"class":789},[263,5461,5462,5465],{"class":265,"line":1233},[263,5463,5464],{"class":778},"  hosts",[263,5466,805],{"class":782},[263,5468,5469,5472,5474,5476],{"class":265,"line":1241},[263,5470,5471],{"class":782},"    -",[263,5473,4686],{"class":778},[263,5475,783],{"class":782},[263,5477,4691],{"class":789},[263,5479,5480,5482],{"class":265,"line":1249},[263,5481,4703],{"class":778},[263,5483,805],{"class":782},[263,5485,5486,5488,5490,5492],{"class":265,"line":1257},[263,5487,2671],{"class":782},[263,5489,4712],{"class":778},[263,5491,783],{"class":782},[263,5493,4344],{"class":789},[263,5495,5496,5499,5501],{"class":265,"line":1265},[263,5497,5498],{"class":778},"          pathType",[263,5500,783],{"class":782},[263,5502,4726],{"class":789},[263,5504,5505,5507,5509,5511],{"class":265,"line":1273},[263,5506,2671],{"class":782},[263,5508,4712],{"class":778},[263,5510,783],{"class":782},[263,5512,4775],{"class":789},[263,5514,5515,5517,5519],{"class":265,"line":1280},[263,5516,5498],{"class":778},[263,5518,783],{"class":782},[263,5520,4726],{"class":789},[248,5522,5524],{"id":5523},"_334-使用-helm-部署","3.3.4 使用 Helm 部署",[253,5526,5528],{"className":1702,"code":5527,"language":1704,"meta":258,"style":258},"# 安装 Helm\ncurl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n\n# 添加 Helm 仓库\nhelm repo add bitnami https://charts.bitnami.com/bitnami\nhelm repo update\n\n# 安装 Chart\nhelm install tagtag ./tagtag-chart -n tagtag --create-namespace\n\n# 更新 Chart\nhelm upgrade tagtag ./tagtag-chart -n tagtag\n\n# 卸载 Chart\nhelm uninstall tagtag -n tagtag\n\n# 查看已安装的 Chart\nhelm list -n tagtag\n\n# 查看 Chart 状态\nhelm status tagtag -n tagtag\n\n# 查看 Pod 状态\nkubectl get pods -n tagtag\n\n# 查看日志\nkubectl logs -f \u003Cpod-name> -n tagtag\n",[260,5529,5530,5535,5548,5552,5557,5574,5583,5587,5592,5612,5616,5621,5636,5640,5645,5658,5662,5667,5678,5682,5687,5700,5704,5709,5722,5726,5730],{"__ignoreMap":258},[263,5531,5532],{"class":265,"line":266},[263,5533,5534],{"class":870},"# 安装 Helm\n",[263,5536,5537,5539,5542,5545],{"class":265,"line":272},[263,5538,1904],{"class":1734},[263,5540,5541],{"class":789}," https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3",[263,5543,5544],{"class":782}," |",[263,5546,5547],{"class":1734}," bash\n",[263,5549,5550],{"class":265,"line":278},[263,5551,282],{"emptyLinePlaceholder":281},[263,5553,5554],{"class":265,"line":285},[263,5555,5556],{"class":870},"# 添加 Helm 仓库\n",[263,5558,5559,5562,5565,5568,5571],{"class":265,"line":291},[263,5560,5561],{"class":1734},"helm",[263,5563,5564],{"class":789}," repo",[263,5566,5567],{"class":789}," add",[263,5569,5570],{"class":789}," bitnami",[263,5572,5573],{"class":789}," https://charts.bitnami.com/bitnami\n",[263,5575,5576,5578,5580],{"class":265,"line":297},[263,5577,5561],{"class":1734},[263,5579,5564],{"class":789},[263,5581,5582],{"class":789}," update\n",[263,5584,5585],{"class":265,"line":302},[263,5586,282],{"emptyLinePlaceholder":281},[263,5588,5589],{"class":265,"line":308},[263,5590,5591],{"class":870},"# 安装 Chart\n",[263,5593,5594,5596,5598,5601,5604,5607,5609],{"class":265,"line":314},[263,5595,5561],{"class":1734},[263,5597,1918],{"class":789},[263,5599,5600],{"class":789}," tagtag",[263,5602,5603],{"class":789}," ./tagtag-chart",[263,5605,5606],{"class":789}," -n",[263,5608,5600],{"class":789},[263,5610,5611],{"class":789}," --create-namespace\n",[263,5613,5614],{"class":265,"line":320},[263,5615,282],{"emptyLinePlaceholder":281},[263,5617,5618],{"class":265,"line":325},[263,5619,5620],{"class":870},"# 更新 Chart\n",[263,5622,5623,5625,5628,5630,5632,5634],{"class":265,"line":331},[263,5624,5561],{"class":1734},[263,5626,5627],{"class":789}," upgrade",[263,5629,5600],{"class":789},[263,5631,5603],{"class":789},[263,5633,5606],{"class":789},[263,5635,2247],{"class":789},[263,5637,5638],{"class":265,"line":337},[263,5639,282],{"emptyLinePlaceholder":281},[263,5641,5642],{"class":265,"line":342},[263,5643,5644],{"class":870},"# 卸载 Chart\n",[263,5646,5647,5649,5652,5654,5656],{"class":265,"line":348},[263,5648,5561],{"class":1734},[263,5650,5651],{"class":789}," uninstall",[263,5653,5600],{"class":789},[263,5655,5606],{"class":789},[263,5657,2247],{"class":789},[263,5659,5660],{"class":265,"line":354},[263,5661,282],{"emptyLinePlaceholder":281},[263,5663,5664],{"class":265,"line":359},[263,5665,5666],{"class":870},"# 查看已安装的 Chart\n",[263,5668,5669,5671,5674,5676],{"class":265,"line":365},[263,5670,5561],{"class":1734},[263,5672,5673],{"class":789}," list",[263,5675,5606],{"class":789},[263,5677,2247],{"class":789},[263,5679,5680],{"class":265,"line":371},[263,5681,282],{"emptyLinePlaceholder":281},[263,5683,5684],{"class":265,"line":376},[263,5685,5686],{"class":870},"# 查看 Chart 状态\n",[263,5688,5689,5691,5694,5696,5698],{"class":265,"line":382},[263,5690,5561],{"class":1734},[263,5692,5693],{"class":789}," status",[263,5695,5600],{"class":789},[263,5697,5606],{"class":789},[263,5699,2247],{"class":789},[263,5701,5702],{"class":265,"line":388},[263,5703,282],{"emptyLinePlaceholder":281},[263,5705,5706],{"class":265,"line":393},[263,5707,5708],{"class":870},"# 查看 Pod 状态\n",[263,5710,5711,5713,5715,5718,5720],{"class":265,"line":398},[263,5712,2009],{"class":1734},[263,5714,2019],{"class":789},[263,5716,5717],{"class":789}," pods",[263,5719,5606],{"class":789},[263,5721,2247],{"class":789},[263,5723,5724],{"class":265,"line":403},[263,5725,282],{"emptyLinePlaceholder":281},[263,5727,5728],{"class":265,"line":408},[263,5729,1782],{"class":870},[263,5731,5732,5734,5736,5739,5742,5745,5749,5752,5754],{"class":265,"line":414},[263,5733,2009],{"class":1734},[263,5735,1789],{"class":789},[263,5737,5738],{"class":789}," -f",[263,5740,5741],{"class":782}," \u003C",[263,5743,5744],{"class":789},"pod-nam",[263,5746,5748],{"class":5747},"sTEyZ","e",[263,5750,5751],{"class":782},">",[263,5753,5606],{"class":789},[263,5755,2247],{"class":789},[122,5757,5759],{"id":5758},"_34-cicd-集成","3.4 CI/CD 集成",[248,5761,5763],{"id":5762},"_341-github-actions-配置","3.4.1 GitHub Actions 配置",[253,5765,5767],{"className":769,"code":5766,"language":771,"meta":258,"style":258},"name: CI/CD\n\non:\n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  # 构建后端\n  build-backend:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n    \n    - name: Set up JDK 17\n      uses: actions/setup-java@v3\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: maven\n    \n    - name: Build with Maven\n      run: mvn -B package -DskipTests --file backend/pom.xml\n    \n    - name: Login to Docker Hub\n      uses: docker/login-action@v2\n      with:\n        username: ${{ secrets.DOCKER_HUB_USERNAME }}\n        password: ${{ secrets.DOCKER_HUB_TOKEN }}\n    \n    - name: Build and push backend image\n      uses: docker/build-push-action@v4\n      with:\n        context: ./backend\n        file: ./backend/Dockerfile\n        push: true\n        tags: ${{ secrets.DOCKER_HUB_USERNAME }}/tagtag-backend:${{ github.sha }},${{ secrets.DOCKER_HUB_USERNAME }}/tagtag-backend:latest\n\n  # 构建前端\n  build-frontend:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n    \n    - name: Set up Node.js 18\n      uses: actions/setup-node@v3\n      with:\n        node-version: '18'\n        cache: 'pnpm'\n    \n    - name: Install pnpm\n      run: npm install -g pnpm\n    \n    - name: Install dependencies\n      run: pnpm install\n      working-directory: ./frontend\n    \n    - name: Build frontend\n      run: pnpm build\n      working-directory: ./frontend\n    \n    - name: Login to Docker Hub\n      uses: docker/login-action@v2\n      with:\n        username: ${{ secrets.DOCKER_HUB_USERNAME }}\n        password: ${{ secrets.DOCKER_HUB_TOKEN }}\n    \n    - name: Build and push frontend image\n      uses: docker/build-push-action@v4\n      with:\n        context: ./frontend\n        file: ./frontend/Dockerfile\n        push: true\n        tags: ${{ secrets.DOCKER_HUB_USERNAME }}/tagtag-frontend:${{ github.sha }},${{ secrets.DOCKER_HUB_USERNAME }}/tagtag-frontend:latest\n\n  # 部署到 Kubernetes\n  deploy:\n    needs: [ build-backend, build-frontend ]\n    runs-on: ubuntu-latest\n    if: github.event_name == 'push' && github.ref == 'refs/heads/main'\n    steps:\n    - uses: actions/checkout@v3\n    \n    - name: Set up kubectl\n      uses: azure/setup-kubectl@v3\n      with:\n        version: 'v1.25.0'\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v2\n      with:\n        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: ${{ secrets.AWS_REGION }}\n    \n    - name: Update kubeconfig\n      run: aws eks update-kubeconfig --name ${{ secrets.EKS_CLUSTER_NAME }} --region ${{ secrets.AWS_REGION }}\n    \n    - name: Deploy to Kubernetes\n      run: |\n        # 更新 Helm Chart 中的镜像版本\n        sed -i 's|tag: latest|tag: ${{ github.sha }}|g' ./helm/values.yaml\n        \n        # 部署应用\n        helm upgrade --install tagtag ./helm -n tagtag --create-namespace\n    \n    - name: Verify deployment\n      run: |\n        kubectl wait --for=condition=available deployment/backend -n tagtag --timeout=300s\n        kubectl wait --for=condition=available deployment/frontend -n tagtag --timeout=300s\n        kubectl get pods -n tagtag\n",[260,5768,5769,5778,5782,5789,5796,5812,5819,5831,5835,5842,5847,5854,5864,5871,5883,5887,5898,5908,5915,5929,5943,5953,5957,5968,5978,5982,5993,6002,6008,6018,6028,6032,6043,6052,6058,6068,6078,6087,6097,6101,6106,6113,6121,6127,6137,6141,6152,6161,6167,6181,6194,6198,6209,6218,6222,6233,6242,6252,6256,6267,6276,6284,6288,6298,6306,6312,6320,6328,6332,6343,6351,6357,6365,6374,6382,6391,6395,6400,6407,6427,6435,6445,6451,6461,6465,6476,6485,6491,6505,6509,6520,6529,6535,6545,6555,6565,6569,6580,6589,6593,6604,6612,6617,6622,6626,6631,6636,6640,6651,6659,6664,6669],{"__ignoreMap":258},[263,5770,5771,5773,5775],{"class":265,"line":266},[263,5772,4856],{"class":778},[263,5774,783],{"class":782},[263,5776,5777],{"class":789}," CI/CD\n",[263,5779,5780],{"class":265,"line":272},[263,5781,282],{"emptyLinePlaceholder":281},[263,5783,5784,5787],{"class":265,"line":278},[263,5785,5786],{"class":5317},"on",[263,5788,805],{"class":782},[263,5790,5791,5794],{"class":265,"line":285},[263,5792,5793],{"class":778},"  push",[263,5795,805],{"class":782},[263,5797,5798,5801,5803,5806,5809],{"class":265,"line":291},[263,5799,5800],{"class":778},"    branches",[263,5802,783],{"class":782},[263,5804,5805],{"class":782}," [",[263,5807,5808],{"class":789}," main",[263,5810,5811],{"class":782}," ]\n",[263,5813,5814,5817],{"class":265,"line":297},[263,5815,5816],{"class":778},"  pull_request",[263,5818,805],{"class":782},[263,5820,5821,5823,5825,5827,5829],{"class":265,"line":302},[263,5822,5800],{"class":778},[263,5824,783],{"class":782},[263,5826,5805],{"class":782},[263,5828,5808],{"class":789},[263,5830,5811],{"class":782},[263,5832,5833],{"class":265,"line":308},[263,5834,282],{"emptyLinePlaceholder":281},[263,5836,5837,5840],{"class":265,"line":314},[263,5838,5839],{"class":778},"jobs",[263,5841,805],{"class":782},[263,5843,5844],{"class":265,"line":320},[263,5845,5846],{"class":870},"  # 构建后端\n",[263,5848,5849,5852],{"class":265,"line":325},[263,5850,5851],{"class":778},"  build-backend",[263,5853,805],{"class":782},[263,5855,5856,5859,5861],{"class":265,"line":331},[263,5857,5858],{"class":778},"    runs-on",[263,5860,783],{"class":782},[263,5862,5863],{"class":789}," ubuntu-latest\n",[263,5865,5866,5869],{"class":265,"line":337},[263,5867,5868],{"class":778},"    steps",[263,5870,805],{"class":782},[263,5872,5873,5875,5878,5880],{"class":265,"line":342},[263,5874,5471],{"class":782},[263,5876,5877],{"class":778}," uses",[263,5879,783],{"class":782},[263,5881,5882],{"class":789}," actions/checkout@v3\n",[263,5884,5885],{"class":265,"line":348},[263,5886,674],{"class":5747},[263,5888,5889,5891,5893,5895],{"class":265,"line":354},[263,5890,5471],{"class":782},[263,5892,2646],{"class":778},[263,5894,783],{"class":782},[263,5896,5897],{"class":789}," Set up JDK 17\n",[263,5899,5900,5903,5905],{"class":265,"line":359},[263,5901,5902],{"class":778},"      uses",[263,5904,783],{"class":782},[263,5906,5907],{"class":789}," actions/setup-java@v3\n",[263,5909,5910,5913],{"class":265,"line":365},[263,5911,5912],{"class":778},"      with",[263,5914,805],{"class":782},[263,5916,5917,5920,5922,5924,5927],{"class":265,"line":371},[263,5918,5919],{"class":778},"        java-version",[263,5921,783],{"class":782},[263,5923,786],{"class":782},[263,5925,5926],{"class":789},"17",[263,5928,793],{"class":782},[263,5930,5931,5934,5936,5938,5941],{"class":265,"line":376},[263,5932,5933],{"class":778},"        distribution",[263,5935,783],{"class":782},[263,5937,786],{"class":782},[263,5939,5940],{"class":789},"temurin",[263,5942,793],{"class":782},[263,5944,5945,5948,5950],{"class":265,"line":382},[263,5946,5947],{"class":778},"        cache",[263,5949,783],{"class":782},[263,5951,5952],{"class":789}," maven\n",[263,5954,5955],{"class":265,"line":388},[263,5956,674],{"class":5747},[263,5958,5959,5961,5963,5965],{"class":265,"line":393},[263,5960,5471],{"class":782},[263,5962,2646],{"class":778},[263,5964,783],{"class":782},[263,5966,5967],{"class":789}," Build with Maven\n",[263,5969,5970,5973,5975],{"class":265,"line":398},[263,5971,5972],{"class":778},"      run",[263,5974,783],{"class":782},[263,5976,5977],{"class":789}," mvn -B package -DskipTests --file backend/pom.xml\n",[263,5979,5980],{"class":265,"line":403},[263,5981,674],{"class":5747},[263,5983,5984,5986,5988,5990],{"class":265,"line":408},[263,5985,5471],{"class":782},[263,5987,2646],{"class":778},[263,5989,783],{"class":782},[263,5991,5992],{"class":789}," Login to Docker Hub\n",[263,5994,5995,5997,5999],{"class":265,"line":414},[263,5996,5902],{"class":778},[263,5998,783],{"class":782},[263,6000,6001],{"class":789}," docker/login-action@v2\n",[263,6003,6004,6006],{"class":265,"line":420},[263,6005,5912],{"class":778},[263,6007,805],{"class":782},[263,6009,6010,6013,6015],{"class":265,"line":425},[263,6011,6012],{"class":778},"        username",[263,6014,783],{"class":782},[263,6016,6017],{"class":789}," ${{ secrets.DOCKER_HUB_USERNAME }}\n",[263,6019,6020,6023,6025],{"class":265,"line":431},[263,6021,6022],{"class":778},"        password",[263,6024,783],{"class":782},[263,6026,6027],{"class":789}," ${{ secrets.DOCKER_HUB_TOKEN }}\n",[263,6029,6030],{"class":265,"line":437},[263,6031,674],{"class":5747},[263,6033,6034,6036,6038,6040],{"class":265,"line":443},[263,6035,5471],{"class":782},[263,6037,2646],{"class":778},[263,6039,783],{"class":782},[263,6041,6042],{"class":789}," Build and push backend image\n",[263,6044,6045,6047,6049],{"class":265,"line":448},[263,6046,5902],{"class":778},[263,6048,783],{"class":782},[263,6050,6051],{"class":789}," docker/build-push-action@v4\n",[263,6053,6054,6056],{"class":265,"line":454},[263,6055,5912],{"class":778},[263,6057,805],{"class":782},[263,6059,6060,6063,6065],{"class":265,"line":460},[263,6061,6062],{"class":778},"        context",[263,6064,783],{"class":782},[263,6066,6067],{"class":789}," ./backend\n",[263,6069,6070,6073,6075],{"class":265,"line":465},[263,6071,6072],{"class":778},"        file",[263,6074,783],{"class":782},[263,6076,6077],{"class":789}," ./backend/Dockerfile\n",[263,6079,6080,6083,6085],{"class":265,"line":471},[263,6081,6082],{"class":778},"        push",[263,6084,783],{"class":782},[263,6086,5318],{"class":5317},[263,6088,6089,6092,6094],{"class":265,"line":1061},[263,6090,6091],{"class":778},"        tags",[263,6093,783],{"class":782},[263,6095,6096],{"class":789}," ${{ secrets.DOCKER_HUB_USERNAME }}/tagtag-backend:${{ github.sha }},${{ secrets.DOCKER_HUB_USERNAME }}/tagtag-backend:latest\n",[263,6098,6099],{"class":265,"line":1068},[263,6100,282],{"emptyLinePlaceholder":281},[263,6102,6103],{"class":265,"line":1076},[263,6104,6105],{"class":870},"  # 构建前端\n",[263,6107,6108,6111],{"class":265,"line":1083},[263,6109,6110],{"class":778},"  build-frontend",[263,6112,805],{"class":782},[263,6114,6115,6117,6119],{"class":265,"line":1095},[263,6116,5858],{"class":778},[263,6118,783],{"class":782},[263,6120,5863],{"class":789},[263,6122,6123,6125],{"class":265,"line":1102},[263,6124,5868],{"class":778},[263,6126,805],{"class":782},[263,6128,6129,6131,6133,6135],{"class":265,"line":1110},[263,6130,5471],{"class":782},[263,6132,5877],{"class":778},[263,6134,783],{"class":782},[263,6136,5882],{"class":789},[263,6138,6139],{"class":265,"line":1117},[263,6140,674],{"class":5747},[263,6142,6143,6145,6147,6149],{"class":265,"line":1124},[263,6144,5471],{"class":782},[263,6146,2646],{"class":778},[263,6148,783],{"class":782},[263,6150,6151],{"class":789}," Set up Node.js 18\n",[263,6153,6154,6156,6158],{"class":265,"line":1134},[263,6155,5902],{"class":778},[263,6157,783],{"class":782},[263,6159,6160],{"class":789}," actions/setup-node@v3\n",[263,6162,6163,6165],{"class":265,"line":1139},[263,6164,5912],{"class":778},[263,6166,805],{"class":782},[263,6168,6169,6172,6174,6176,6179],{"class":265,"line":1145},[263,6170,6171],{"class":778},"        node-version",[263,6173,783],{"class":782},[263,6175,786],{"class":782},[263,6177,6178],{"class":789},"18",[263,6180,793],{"class":782},[263,6182,6183,6185,6187,6189,6192],{"class":265,"line":1153},[263,6184,5947],{"class":778},[263,6186,783],{"class":782},[263,6188,786],{"class":782},[263,6190,6191],{"class":789},"pnpm",[263,6193,793],{"class":782},[263,6195,6196],{"class":265,"line":1161},[263,6197,674],{"class":5747},[263,6199,6200,6202,6204,6206],{"class":265,"line":1172},[263,6201,5471],{"class":782},[263,6203,2646],{"class":778},[263,6205,783],{"class":782},[263,6207,6208],{"class":789}," Install pnpm\n",[263,6210,6211,6213,6215],{"class":265,"line":1183},[263,6212,5972],{"class":778},[263,6214,783],{"class":782},[263,6216,6217],{"class":789}," npm install -g pnpm\n",[263,6219,6220],{"class":265,"line":1193},[263,6221,674],{"class":5747},[263,6223,6224,6226,6228,6230],{"class":265,"line":1202},[263,6225,5471],{"class":782},[263,6227,2646],{"class":778},[263,6229,783],{"class":782},[263,6231,6232],{"class":789}," Install dependencies\n",[263,6234,6235,6237,6239],{"class":265,"line":1209},[263,6236,5972],{"class":778},[263,6238,783],{"class":782},[263,6240,6241],{"class":789}," pnpm install\n",[263,6243,6244,6247,6249],{"class":265,"line":1217},[263,6245,6246],{"class":778},"      working-directory",[263,6248,783],{"class":782},[263,6250,6251],{"class":789}," ./frontend\n",[263,6253,6254],{"class":265,"line":1225},[263,6255,674],{"class":5747},[263,6257,6258,6260,6262,6264],{"class":265,"line":1233},[263,6259,5471],{"class":782},[263,6261,2646],{"class":778},[263,6263,783],{"class":782},[263,6265,6266],{"class":789}," Build frontend\n",[263,6268,6269,6271,6273],{"class":265,"line":1241},[263,6270,5972],{"class":778},[263,6272,783],{"class":782},[263,6274,6275],{"class":789}," pnpm build\n",[263,6277,6278,6280,6282],{"class":265,"line":1249},[263,6279,6246],{"class":778},[263,6281,783],{"class":782},[263,6283,6251],{"class":789},[263,6285,6286],{"class":265,"line":1257},[263,6287,674],{"class":5747},[263,6289,6290,6292,6294,6296],{"class":265,"line":1265},[263,6291,5471],{"class":782},[263,6293,2646],{"class":778},[263,6295,783],{"class":782},[263,6297,5992],{"class":789},[263,6299,6300,6302,6304],{"class":265,"line":1273},[263,6301,5902],{"class":778},[263,6303,783],{"class":782},[263,6305,6001],{"class":789},[263,6307,6308,6310],{"class":265,"line":1280},[263,6309,5912],{"class":778},[263,6311,805],{"class":782},[263,6313,6314,6316,6318],{"class":265,"line":1292},[263,6315,6012],{"class":778},[263,6317,783],{"class":782},[263,6319,6017],{"class":789},[263,6321,6322,6324,6326],{"class":265,"line":1299},[263,6323,6022],{"class":778},[263,6325,783],{"class":782},[263,6327,6027],{"class":789},[263,6329,6330],{"class":265,"line":1307},[263,6331,674],{"class":5747},[263,6333,6334,6336,6338,6340],{"class":265,"line":1314},[263,6335,5471],{"class":782},[263,6337,2646],{"class":778},[263,6339,783],{"class":782},[263,6341,6342],{"class":789}," Build and push frontend image\n",[263,6344,6345,6347,6349],{"class":265,"line":1321},[263,6346,5902],{"class":778},[263,6348,783],{"class":782},[263,6350,6051],{"class":789},[263,6352,6353,6355],{"class":265,"line":1329},[263,6354,5912],{"class":778},[263,6356,805],{"class":782},[263,6358,6359,6361,6363],{"class":265,"line":1337},[263,6360,6062],{"class":778},[263,6362,783],{"class":782},[263,6364,6251],{"class":789},[263,6366,6367,6369,6371],{"class":265,"line":1345},[263,6368,6072],{"class":778},[263,6370,783],{"class":782},[263,6372,6373],{"class":789}," ./frontend/Dockerfile\n",[263,6375,6376,6378,6380],{"class":265,"line":1350},[263,6377,6082],{"class":778},[263,6379,783],{"class":782},[263,6381,5318],{"class":5317},[263,6383,6384,6386,6388],{"class":265,"line":1356},[263,6385,6091],{"class":778},[263,6387,783],{"class":782},[263,6389,6390],{"class":789}," ${{ secrets.DOCKER_HUB_USERNAME }}/tagtag-frontend:${{ github.sha }},${{ secrets.DOCKER_HUB_USERNAME }}/tagtag-frontend:latest\n",[263,6392,6393],{"class":265,"line":1364},[263,6394,282],{"emptyLinePlaceholder":281},[263,6396,6397],{"class":265,"line":1371},[263,6398,6399],{"class":870},"  # 部署到 Kubernetes\n",[263,6401,6402,6405],{"class":265,"line":1381},[263,6403,6404],{"class":778},"  deploy",[263,6406,805],{"class":782},[263,6408,6409,6412,6414,6416,6419,6422,6425],{"class":265,"line":1390},[263,6410,6411],{"class":778},"    needs",[263,6413,783],{"class":782},[263,6415,5805],{"class":782},[263,6417,6418],{"class":789}," build-backend",[263,6420,6421],{"class":782},",",[263,6423,6424],{"class":789}," build-frontend",[263,6426,5811],{"class":782},[263,6428,6429,6431,6433],{"class":265,"line":1400},[263,6430,5858],{"class":778},[263,6432,783],{"class":782},[263,6434,5863],{"class":789},[263,6436,6437,6440,6442],{"class":265,"line":1409},[263,6438,6439],{"class":778},"    if",[263,6441,783],{"class":782},[263,6443,6444],{"class":789}," github.event_name == 'push' && github.ref == 'refs/heads/main'\n",[263,6446,6447,6449],{"class":265,"line":1416},[263,6448,5868],{"class":778},[263,6450,805],{"class":782},[263,6452,6453,6455,6457,6459],{"class":265,"line":1428},[263,6454,5471],{"class":782},[263,6456,5877],{"class":778},[263,6458,783],{"class":782},[263,6460,5882],{"class":789},[263,6462,6463],{"class":265,"line":1435},[263,6464,674],{"class":5747},[263,6466,6467,6469,6471,6473],{"class":265,"line":1442},[263,6468,5471],{"class":782},[263,6470,2646],{"class":778},[263,6472,783],{"class":782},[263,6474,6475],{"class":789}," Set up kubectl\n",[263,6477,6478,6480,6482],{"class":265,"line":1449},[263,6479,5902],{"class":778},[263,6481,783],{"class":782},[263,6483,6484],{"class":789}," azure/setup-kubectl@v3\n",[263,6486,6487,6489],{"class":265,"line":1457},[263,6488,5912],{"class":778},[263,6490,805],{"class":782},[263,6492,6493,6496,6498,6500,6503],{"class":265,"line":1462},[263,6494,6495],{"class":778},"        version",[263,6497,783],{"class":782},[263,6499,786],{"class":782},[263,6501,6502],{"class":789},"v1.25.0",[263,6504,793],{"class":782},[263,6506,6507],{"class":265,"line":1468},[263,6508,674],{"class":5747},[263,6510,6511,6513,6515,6517],{"class":265,"line":1476},[263,6512,5471],{"class":782},[263,6514,2646],{"class":778},[263,6516,783],{"class":782},[263,6518,6519],{"class":789}," Configure AWS credentials\n",[263,6521,6522,6524,6526],{"class":265,"line":1486},[263,6523,5902],{"class":778},[263,6525,783],{"class":782},[263,6527,6528],{"class":789}," aws-actions/configure-aws-credentials@v2\n",[263,6530,6531,6533],{"class":265,"line":1496},[263,6532,5912],{"class":778},[263,6534,805],{"class":782},[263,6536,6537,6540,6542],{"class":265,"line":1505},[263,6538,6539],{"class":778},"        aws-access-key-id",[263,6541,783],{"class":782},[263,6543,6544],{"class":789}," ${{ secrets.AWS_ACCESS_KEY_ID }}\n",[263,6546,6547,6550,6552],{"class":265,"line":1512},[263,6548,6549],{"class":778},"        aws-secret-access-key",[263,6551,783],{"class":782},[263,6553,6554],{"class":789}," ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n",[263,6556,6557,6560,6562],{"class":265,"line":1520},[263,6558,6559],{"class":778},"        aws-region",[263,6561,783],{"class":782},[263,6563,6564],{"class":789}," ${{ secrets.AWS_REGION }}\n",[263,6566,6567],{"class":265,"line":1528},[263,6568,674],{"class":5747},[263,6570,6571,6573,6575,6577],{"class":265,"line":1535},[263,6572,5471],{"class":782},[263,6574,2646],{"class":778},[263,6576,783],{"class":782},[263,6578,6579],{"class":789}," Update kubeconfig\n",[263,6581,6582,6584,6586],{"class":265,"line":1542},[263,6583,5972],{"class":778},[263,6585,783],{"class":782},[263,6587,6588],{"class":789}," aws eks update-kubeconfig --name ${{ secrets.EKS_CLUSTER_NAME }} --region ${{ secrets.AWS_REGION }}\n",[263,6590,6591],{"class":265,"line":1554},[263,6592,674],{"class":5747},[263,6594,6595,6597,6599,6601],{"class":265,"line":1561},[263,6596,5471],{"class":782},[263,6598,2646],{"class":778},[263,6600,783],{"class":782},[263,6602,6603],{"class":789}," Deploy to Kubernetes\n",[263,6605,6606,6608,6610],{"class":265,"line":1568},[263,6607,5972],{"class":778},[263,6609,783],{"class":782},[263,6611,2331],{"class":2330},[263,6613,6614],{"class":265,"line":1575},[263,6615,6616],{"class":789},"        # 更新 Helm Chart 中的镜像版本\n",[263,6618,6619],{"class":265,"line":1582},[263,6620,6621],{"class":789},"        sed -i 's|tag: latest|tag: ${{ github.sha }}|g' ./helm/values.yaml\n",[263,6623,6624],{"class":265,"line":1587},[263,6625,738],{"class":789},[263,6627,6628],{"class":265,"line":1593},[263,6629,6630],{"class":789},"        # 部署应用\n",[263,6632,6633],{"class":265,"line":1601},[263,6634,6635],{"class":789},"        helm upgrade --install tagtag ./helm -n tagtag --create-namespace\n",[263,6637,6638],{"class":265,"line":1611},[263,6639,674],{"class":789},[263,6641,6642,6644,6646,6648],{"class":265,"line":1621},[263,6643,5471],{"class":782},[263,6645,2646],{"class":778},[263,6647,783],{"class":782},[263,6649,6650],{"class":789}," Verify deployment\n",[263,6652,6653,6655,6657],{"class":265,"line":1630},[263,6654,5972],{"class":778},[263,6656,783],{"class":782},[263,6658,2331],{"class":2330},[263,6660,6661],{"class":265,"line":1637},[263,6662,6663],{"class":789},"        kubectl wait --for=condition=available deployment/backend -n tagtag --timeout=300s\n",[263,6665,6666],{"class":265,"line":1645},[263,6667,6668],{"class":789},"        kubectl wait --for=condition=available deployment/frontend -n tagtag --timeout=300s\n",[263,6670,6671],{"class":265,"line":1652},[263,6672,6673],{"class":789},"        kubectl get pods -n tagtag\n",[117,6675,6677],{"id":6676},"_4-最佳实践","4. 最佳实践",[122,6679,6681],{"id":6680},"_41-docker-最佳实践","4.1 Docker 最佳实践",[127,6683,6684,6690,6696,6702,6708,6714,6720,6726],{},[130,6685,6686,6689],{},[133,6687,6688],{},"使用轻量级基础镜像","：如 alpine 或 slim 版本",[130,6691,6692,6695],{},[133,6693,6694],{},"最小化镜像层数","：合并 RUN 指令，使用多阶段构建",[130,6697,6698,6701],{},[133,6699,6700],{},"使用 .dockerignore 文件","：排除不必要的文件和目录",[130,6703,6704,6707],{},[133,6705,6706],{},"非 root 用户运行容器","：提高安全性",[130,6709,6710,6713],{},[133,6711,6712],{},"设置合理的健康检查","：使用 HEALTHCHECK 指令",[130,6715,6716,6719],{},[133,6717,6718],{},"合理设置资源限制","：避免容器占用过多资源",[130,6721,6722,6725],{},[133,6723,6724],{},"使用标签管理镜像","：包括版本号、提交哈希等",[130,6727,6728,6731],{},[133,6729,6730],{},"避免在容器中存储数据","：使用 volumes 或外部存储",[122,6733,6735],{"id":6734},"_42-kubernetes-最佳实践","4.2 Kubernetes 最佳实践",[127,6737,6738,6744,6750,6756,6762,6768,6774,6780,6785,6791],{},[130,6739,6740,6743],{},[133,6741,6742],{},"使用命名空间","：按环境或团队划分资源",[130,6745,6746,6749],{},[133,6747,6748],{},"合理设置资源请求和限制","：确保集群稳定性",[130,6751,6752,6755],{},[133,6753,6754],{},"使用健康检查和就绪探针","：提高应用可用性",[130,6757,6758,6761],{},[133,6759,6760],{},"使用滚动更新","：确保零 downtime 部署",[130,6763,6764,6767],{},[133,6765,6766],{},"使用 StatefulSet 部署有状态应用","：如数据库",[130,6769,6770,6773],{},[133,6771,6772],{},"使用 ConfigMap 和 Secret 管理配置","：避免硬编码",[130,6775,6776,6779],{},[133,6777,6778],{},"使用 Horizontal Pod Autoscaler","：自动扩缩容",[130,6781,6782,6707],{},[133,6783,6784],{},"使用 NetworkPolicy 限制网络访问",[130,6786,6787,6790],{},[133,6788,6789],{},"定期备份数据","：使用 CronJob 或外部工具",[130,6792,6793,6796],{},[133,6794,6795],{},"监控和日志收集","：使用 Prometheus 和 ELK Stack",[122,6798,6800],{"id":6799},"_43-cicd-最佳实践","4.3 CI/CD 最佳实践",[127,6802,6803,6809,6815,6821,6827,6833,6839,6845],{},[130,6804,6805,6808],{},[133,6806,6807],{},"自动化测试","：在构建前运行单元测试和集成测试",[130,6810,6811,6814],{},[133,6812,6813],{},"代码质量检查","：使用 ESLint、SonarQube 等工具",[130,6816,6817,6820],{},[133,6818,6819],{},"镜像安全扫描","：使用 Trivy 或 Clair 扫描镜像漏洞",[130,6822,6823,6826],{},[133,6824,6825],{},"多环境部署","：开发、测试、预发布、生产环境",[130,6828,6829,6832],{},[133,6830,6831],{},"手动审批","：生产环境部署需要手动审批",[130,6834,6835,6838],{},[133,6836,6837],{},"回滚机制","：支持快速回滚到之前的版本",[130,6840,6841,6844],{},[133,6842,6843],{},"监控部署状态","：实时监控部署进度和状态",[130,6846,6847,6850],{},[133,6848,6849],{},"日志收集","：收集 CI/CD 流程的日志",[117,6852,6854],{"id":6853},"_5-常见问题与解决方案","5. 常见问题与解决方案",[122,6856,6858],{"id":6857},"_51-docker-相关问题","5.1 Docker 相关问题",[248,6860,6862],{"id":6861},"_511-镜像构建失败","5.1.1 镜像构建失败",[113,6864,6865,6868],{},[133,6866,6867],{},"问题","：构建镜像时出现依赖安装失败",[113,6870,6871,1699],{},[133,6872,6873],{},"解决方案",[127,6875,6876,6879,6882,6885],{},[130,6877,6878],{},"检查网络连接",[130,6880,6881],{},"检查 Dockerfile 中的依赖源",[130,6883,6884],{},"使用国内镜像源加速依赖下载",[130,6886,6887],{},"清理缓存后重新构建",[248,6889,6891],{"id":6890},"_512-容器启动失败","5.1.2 容器启动失败",[113,6893,6894,6896],{},[133,6895,6867],{},"：容器启动后立即退出",[113,6898,6899,1699],{},[133,6900,6873],{},[127,6902,6903,6909,6912,6915],{},[130,6904,6905,6906],{},"查看容器日志：",[260,6907,6908],{},"docker logs \u003Ccontainer-name>",[130,6910,6911],{},"检查环境变量配置",[130,6913,6914],{},"检查端口占用情况",[130,6916,6917],{},"检查挂载的卷和配置文件",[122,6919,6921],{"id":6920},"_52-kubernetes-相关问题","5.2 Kubernetes 相关问题",[248,6923,6925],{"id":6924},"_521-pod-处于-pending-状态","5.2.1 Pod 处于 Pending 状态",[113,6927,6928,6930],{},[133,6929,6867],{},"：Pod 一直处于 Pending 状态",[113,6932,6933,1699],{},[133,6934,6873],{},[127,6936,6937,6940,6943,6946],{},[130,6938,6939],{},"检查集群资源是否充足",[130,6941,6942],{},"检查 PersistentVolumeClaim 是否绑定成功",[130,6944,6945],{},"检查 NodeSelector 和 Toleration 配置",[130,6947,6948,6949],{},"查看事件：",[260,6950,6951],{},"kubectl describe pod \u003Cpod-name> -n \u003Cnamespace>",[248,6953,6955],{"id":6954},"_522-pod-处于-crashloopbackoff-状态","5.2.2 Pod 处于 CrashLoopBackOff 状态",[113,6957,6958,6960],{},[133,6959,6867],{},"：Pod 反复重启",[113,6962,6963,1699],{},[133,6964,6873],{},[127,6966,6967,6972,6975,6978],{},[130,6968,6905,6969],{},[260,6970,6971],{},"kubectl logs \u003Cpod-name> -n \u003Cnamespace>",[130,6973,6974],{},"检查应用配置",[130,6976,6977],{},"检查健康检查配置",[130,6979,6980],{},"检查资源限制是否合理",[248,6982,6984],{"id":6983},"_523-ingress-无法访问","5.2.3 Ingress 无法访问",[113,6986,6987,6989],{},[133,6988,6867],{},"：通过 Ingress 无法访问应用",[113,6991,6992,1699],{},[133,6993,6873],{},[127,6995,6996,6999,7002,7005,7008],{},[130,6997,6998],{},"检查 Ingress Controller 是否正常运行",[130,7000,7001],{},"检查 Ingress 规则配置",[130,7003,7004],{},"检查 Service 是否正常",[130,7006,7007],{},"检查 Pod 是否正常运行",[130,7009,7010],{},"查看 Ingress 日志",[117,7012,7014],{"id":7013},"_6-总结","6. 总结",[113,7016,7017],{},"容器化部署是现代应用部署的趋势，Tagtag Starter 项目支持 Docker 和 Kubernetes 部署，提供了灵活的部署方案。通过 Docker Compose 可以快速搭建本地开发和测试环境，通过 Kubernetes 和 Helm 可以实现生产环境的自动化部署和管理。",[113,7019,7020],{},"本文档详细介绍了 Tagtag Starter 项目的容器化部署方案，包括 Dockerfile 编写、Docker Compose 配置、Kubernetes 资源配置、Helm Chart 配置和 CI/CD 集成。遵循本文档的最佳实践，可以提高应用的可用性、可扩展性和安全性。",[113,7022,7023],{},"在实际部署过程中，建议根据业务需求和集群规模，灵活调整配置参数，确保系统的高性能和可靠性。",[7025,7026,7027],"style",{},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .swJcz, html code.shiki .swJcz{--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178}html pre.shiki code .sMK4o, html code.shiki .sMK4o{--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF}html pre.shiki code .sfazB, html code.shiki .sfazB{--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D}html pre.shiki code .sHwdD, html code.shiki .sHwdD{--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#546E7A;--shiki-default-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic}html pre.shiki code .s2Zo4, html code.shiki .s2Zo4{--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF}html pre.shiki code .sBMFI, html code.shiki .sBMFI{--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B}html pre.shiki code .sbssI, html code.shiki .sbssI{--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C}html pre.shiki code .s7zQu, html code.shiki .s7zQu{--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#89DDFF;--shiki-default-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic}html pre.shiki code .sfNiH, html code.shiki .sfNiH{--shiki-light:#FF5370;--shiki-default:#FF9CAC;--shiki-dark:#FF9CAC}html pre.shiki code .sTEyZ, html code.shiki .sTEyZ{--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8}",{"title":258,"searchDepth":266,"depth":272,"links":7029},[7030,7034,7039,7045,7050,7054],{"id":119,"depth":272,"text":120,"children":7031},[7032,7033],{"id":124,"depth":278,"text":125},{"id":169,"depth":278,"text":170},{"id":241,"depth":272,"text":242,"children":7035},[7036,7037,7038],{"id":245,"depth":278,"text":246},{"id":765,"depth":278,"text":766},{"id":1692,"depth":278,"text":1693},{"id":1875,"depth":272,"text":1876,"children":7040},[7041,7042,7043,7044],{"id":1879,"depth":278,"text":1880},{"id":2201,"depth":278,"text":2202},{"id":4820,"depth":278,"text":4821},{"id":5758,"depth":278,"text":5759},{"id":6676,"depth":272,"text":6677,"children":7046},[7047,7048,7049],{"id":6680,"depth":278,"text":6681},{"id":6734,"depth":278,"text":6735},{"id":6799,"depth":278,"text":6800},{"id":6853,"depth":272,"text":6854,"children":7051},[7052,7053],{"id":6857,"depth":278,"text":6858},{"id":6920,"depth":278,"text":6921},{"id":7013,"depth":272,"text":7014},"Tagtag Starter 容器化部署指南，包括 Docker 和 Kubernetes 部署方案。","md",null,{},{"title":91,"description":7055},"jwkP4CWaGMmBXN9xa6YK9PtAmnZL7NKxKH2NQtASJnk",[7062,7064],{"title":87,"path":88,"stem":89,"description":7063,"children":-1},"Tagtag Starter 生产环境部署指南，包括服务器配置、数据库优化和安全配置。",{"title":100,"path":101,"stem":102,"description":7065,"children":-1},"Tagtag Starter 监控与维护指南，包括日志管理和系统监控方案。",1767077440407]